(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports.PhotoEditorSDK=t():e.PhotoEditorSDK=t()})(this,function(){var e=Math.pow,t=Math.sin,o=Math.cos,r=Math.PI,a=String.fromCharCode,n=Math.sqrt,i=Math.abs,l=Math.ceil,d=Math.floor,p=Math.min,u=Math.max,s=Math.round;return function(e){function t(r){if(o[r])return o[r].exports;var a=o[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(o,'a',o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=100)}([function(e,t){'use strict';t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}},function(e,t,o){'use strict';t.__esModule=!0;var r=o(23),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'===('undefined'==typeof t?'undefined':(0,a.default)(t))||'function'==typeof t)?t:e}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=o(130),i=r(a),n=o(134),l=r(n),s=o(23),d=r(s);t.default=function(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof t?'undefined':(0,d.default)(t)));e.prototype=(0,l.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.LicenseChecker=t.Base64=t.GLUtils=t.Promise=t.Log=t.Constants=t.Color=t.Configurable=t.Utils=t.EventEmitter=t.Engine=t.cancelAnimationFrame=t.requestAnimationFrame=void 0;var a=o(137);Object.defineProperty(t,'requestAnimationFrame',{enumerable:!0,get:function(){return a.requestAnimationFrame}}),Object.defineProperty(t,'cancelAnimationFrame',{enumerable:!0,get:function(){return a.cancelAnimationFrame}});var i=o(76);Object.keys(i).forEach(function(e){'default'===e||'__esModule'===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var n=o(11),l=r(n),s=o(10),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(s),p=o(31),u=r(p),_=o(30),f=r(_),c=o(26),g=r(c),y=o(16),h=r(y),m=o(12),x=r(m),T=o(22),v=r(T),b=o(7),C=r(b),R=o(81),O=r(R),E=o(171),S=r(E);t.Engine=l.default,t.EventEmitter=f.default,t.Utils=g.default,t.Configurable=h.default,t.Color=x.default,t.Constants=d,t.Log=v.default,t.Promise=C.default,t.GLUtils=O.default,t.Base64=u.default,t.LicenseChecker=S.default},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(183),_=r(u),f=o(16),c=r(f),g=p.Constants.OptionType,y=function(e){function t(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this,o,{intensity:{type:g.NUMBER,default:1,setter:function(e){return this._stack&&this._stack.setIntensity(e),e}},dirty:{type:g.BOOLEAN,default:!0}}));return r._stack=new _.default(r._options.intensity),r}return(0,d.default)(t,e),t.prototype.render=function(e,t,o){var r=this;return this._stack.render(e,t,o).then(function(e){return r.setDirty(!1),e})},t.prototype.setDirtyForRenderer=function(e,t){this._stack.setDirtyForRenderer(e,t)},t.prototype.disposeRenderTextures=function(){this._stack.disposeRenderTextures()},t.prototype.dispose=function(){this._stack.dispose()},t}(c.default);y.identifier=null,y.isIdentity=!1,y.displayName=null,y.PrimitivesStack=_.default,t.default=y},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(223);Object.defineProperty(t,'Brightness',{enumerable:!0,get:function(){return r(a).default}});var i=o(225);Object.defineProperty(t,'Contrast',{enumerable:!0,get:function(){return r(i).default}});var n=o(227);Object.defineProperty(t,'ColorMatrixPrimitive',{enumerable:!0,get:function(){return r(n).default}});var l=o(229);Object.defineProperty(t,'Desaturation',{enumerable:!0,get:function(){return r(l).default}});var s=o(231);Object.defineProperty(t,'Gamma',{enumerable:!0,get:function(){return r(s).default}});var d=o(233);Object.defineProperty(t,'Glow',{enumerable:!0,get:function(){return r(d).default}});var p=o(235);Object.defineProperty(t,'Gobblin',{enumerable:!0,get:function(){return r(p).default}});var u=o(237);Object.defineProperty(t,'Grayscale',{enumerable:!0,get:function(){return r(u).default}});var _=o(99);Object.defineProperty(t,'LookupTable',{enumerable:!0,get:function(){return r(_).default}});var f=o(240);Object.defineProperty(t,'LookupTableImage',{enumerable:!0,get:function(){return r(f).default}});var c=o(242);Object.defineProperty(t,'Saturation',{enumerable:!0,get:function(){return r(c).default}});var g=o(244);Object.defineProperty(t,'SoftColorOverlay',{enumerable:!0,get:function(){return r(g).default}});var y=o(246);Object.defineProperty(t,'ToneCurve',{enumerable:!0,get:function(){return r(y).default}});var h=o(247);Object.defineProperty(t,'X400',{enumerable:!0,get:function(){return r(h).default}});var m=o(249);Object.defineProperty(t,'ThreeDLookupTableImage',{enumerable:!0,get:function(){return r(m).default}})},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.GLUtils=t.Constants=t.Utils=t.Log=t.EventEmitter=t.Rectangle=t.Vector2=t.Matrix=t.Color=t.VERTEX_BYTE_SIZE=t.VERTEX_SIZE=t.BATCH_SIZE=void 0;var a=o(22),i=r(a),n=o(12),l=r(n),s=o(79),d=r(s),p=o(78),u=r(p),_=o(21),f=r(_),c=o(30),g=r(c),y=o(26),h=r(y),m=o(81),x=r(m),T=o(10),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(T),b=5;t.BATCH_SIZE=2e3,t.VERTEX_SIZE=b,t.VERTEX_BYTE_SIZE=4*b,t.Color=l.default,t.Matrix=d.default,t.Vector2=f.default,t.Rectangle=u.default,t.EventEmitter=g.default,t.Log=i.default,t.Utils=h.default,t.Constants=v,t.GLUtils=x.default},function(e,t,o){'use strict';(function(e,r){/*!
 * Native Promise Only
 * v0.8.0-a (c) Kyle Simpson
 * MIT License: http://getify.mit-license.org
 */Object.defineProperty(t,'__esModule',{value:!0});var a=o(23),i=function(e){return e&&e.__esModule?e:{default:e}}(a),n='undefined'==typeof r?window:r,l='undefined'==typeof Promise?function(){function t(e,t){y.add(e,t),g||(g=f(y.drain))}function o(e){var t='undefined'==typeof e?'undefined':(0,i.default)(e),r;return null!=e&&('object'==t||'function'==t)&&(r=e.then),'function'==typeof r&&r}function r(){for(var e=0;e<this.chain.length;e++)a(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function a(e,t,r){var a,i;try{!1===t?r.reject(e.msg):(a=!0===t?e.msg:t.call(void 0,e.msg),a===r.promise?r.reject(TypeError('Promise-chain cycle')):(i=o(a))?i.call(a,r.resolve,r.reject):r.resolve(a))}catch(e){r.reject(e)}}function n(e){var a=this,i;if(!a.triggered){a.triggered=!0,a.def&&(a=a.def);try{(i=o(e))?t(function(){var t=new d(a);try{i.call(e,function(){n.apply(t,arguments)},function(){l.apply(t,arguments)})}catch(e){l.call(t,e)}}):(a.msg=e,a.state=1,0<a.chain.length&&t(r,a))}catch(e){l.call(new d(a),e)}}}function l(e){var o=this;o.triggered||(o.triggered=!0,o.def&&(o=o.def),o.msg=e,o.state=2,0<o.chain.length&&t(r,o))}function s(e,t,o,r){for(var a=0;a<t.length;a++)(function(a){e.resolve(t[a]).then(function(e){o(a,e)},r)})(a)}function d(e){this.def=e,this.triggered=!1}function p(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function u(e){if('function'!=typeof e)throw TypeError('Not a function');if(0!==this.__NPO__)throw TypeError('Not a promise');this.__NPO__=1;var a=new p(this);this.then=function(e,i){var n={success:'function'!=typeof e||e,failure:'function'==typeof i&&i};return n.promise=new this.constructor(function(e,t){if('function'!=typeof e||'function'!=typeof t)throw TypeError('Not a function');n.resolve=e,n.reject=t}),a.chain.push(n),0!==a.state&&t(r,a),n.promise},this['catch']=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){n.call(a,e)},function(e){l.call(a,e)})}catch(e){l.call(a,e)}}var _=Object.prototype.toString,f='undefined'==typeof e?setTimeout:function(t){return e(t)},c,g,y;try{Object.defineProperty({},'x',{}),c=function(e,t,o,r){return Object.defineProperty(e,t,{value:o,writable:!0,configurable:!1!==r})}}catch(e){c=function(e,t,o){return e[t]=o,e}}y=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,o,r;return{add:function(a,i){r=new e(a,i),o?o.next=r:t=r,o=r,r=void 0},drain:function(){var e=t;for(t=o=g=void 0;e;)e.fn.call(e.self),e=e.next}}}();var h=c({},'constructor',u,!1);return u.prototype=h,c(h,'__NPO__',0,!1),c(u,'resolve',function(e){var t=this;return e&&'object'==('undefined'==typeof e?'undefined':(0,i.default)(e))&&1===e.__NPO__?e:new t(function(t,o){if('function'!=typeof t||'function'!=typeof o)throw TypeError('Not a function');t(e)})}),c(u,'reject',function(e){return new this(function(t,o){if('function'!=typeof t||'function'!=typeof o)throw TypeError('Not a function');o(e)})}),c(u,'all',function(e){var t=this;return'[object Array]'==_.call(e)?0===e.length?t.resolve([]):new t(function(o,r){if('function'!=typeof o||'function'!=typeof r)throw TypeError('Not a function');var a=e.length,i=Array(a),n=0;s(t,e,function(e,t){i[e]=t,++n===a&&o(i)},r)}):t.reject(TypeError('Not an array'))}),c(u,'race',function(e){var t=this;return'[object Array]'==_.call(e)?new t(function(o,r){if('function'!=typeof o||'function'!=typeof r)throw TypeError('Not a function');s(t,e,function(e,t){o(t)},r)}):t.reject(TypeError('Not an array'))}),u}():Promise;n.Promise=n.Promise||l,t.default=l}).call(t,o(160).setImmediate,o(39))},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(10),u=o(7),_=r(u),f=o(22),c=r(f),g=o(11),y=r(g),h=o(16),m=r(h),x=o(91),T=r(x),v=function(e){function t(o){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,t);var a=(0,l.default)(this,e.call(this,r,{enabled:{type:p.OptionType.BOOLEAN,default:!0,serializable:!1}}));return a._sdk=o,a._cacheEnabled=!1,a._dirtiness={},a._sprite=new y.default.Sprite,a._container=new y.default.Container,a._container.addChild(a._sprite),a}return(0,d.default)(t,e),t.prototype._onOptionsChange=function(){this.setDirty(!0)},t.prototype.render=function(e){var t=this;if(!this.getEnabled())return c.default.info(this.constructor.name,'Disabled - skipping'),_.default.resolve(e);if(!this._renderTexture){var o=this._sdk.getSprite().getTexture().getFrame();this._renderTexture=new y.default.RenderTexture(this._sdk.getRenderer(),o.width,o.height)}var r=this._sdk.getRenderer(),a,i;if(c.default.canLog('info')&&(i=new T.default(this.constructor.name,'Rendering')),this.isDirtyForRenderer(r)){this._sprite.setTexture(e);var n=this.getNewDimensions(e.getDimensions()).floor();this._renderTexture.resizeTo(n),this._renderTexture.clear(),a=this._render(e).then(function(){return t.setDirtyForRenderer(!1,r),t._renderTexture})}else c.default.info(this.constructor.name,'Rendering from cache'),a=_.default.resolve(this._renderTexture);return a.then(function(e){return i&&i.stop(),e})},t.prototype._render=function(e){var t;return t=this._sdk.getRenderer().isOfType(p.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this),t(e)},t.prototype._renderWebGL=function(){throw new Error('Operation#_renderWebGL is abstract and not implemented in inherited class.')},t.prototype._renderCanvas=function(){throw new Error('Operation#_renderCanvas is abstract and not implemented in inherited class.')},t.prototype.getNewDimensions=function(e){return e.clone()},t.prototype.reset=function(){this._dirty=!0,this._glslPrograms={}},t.prototype.isDirtyForRenderer=function(e){var t=this._dirtiness[e.id];return'undefined'==typeof t||t},t.prototype.setDirtyForRenderer=function(e,t){2<arguments.length&&void 0!==arguments[2]&&arguments[2];this._dirtiness[t.id]=e},t.prototype.setDirty=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];for(var o in this._dirtiness)this.setDirtyForRenderer(e,{id:o},t)},t.prototype.getSDK=function(){return this._sdk},t.prototype.getInputDimensions=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,o=this._sdk.getInputDimensions();t&&o.multiply(this._sdk.getZoom()).floor();var r;return this._sdk.getOperationsStack().forEach(function(t){return r?void 0:t===e?void(r=!0):void(o=t.getNewDimensions(o))}),o.floor()},t.prototype.clone=function(){var e=this.constructor;return new e(this._sdk,this.serializeOptions())},t.prototype.disposeRenderTextures=function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null},t.prototype.dispose=function(){this.disposeRenderTextures(),this._sprite.dispose()},t}(m.default);v.identifier=null,t.default=v},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(16),u=r(p),_=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.update=function(){},t.prototype.getFilter=function(){return this._filter},t.prototype.dispose=function(){this._filter&&(this._filter.dispose(),this._filter=null)},t}(u.default);t.default=_},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=t.RenderType={IMAGE:'image',DATAURL:'data-url',BUFFER:'buffer',BLOB:'blob',MSBLOB:'ms-blob'},r=t.ImageFormat={PNG:'image/png',JPEG:'image/jpeg'},a=t.Events={OPERATION_UPDATED:'operation:update'},i=t.OptionType={NUMBER:'number',VECTOR2:'vector2',COLOR_MATRIX:'color-matrix',COLOR:'color',ARRAY:'array',OBJECT:'object',STRING:'string',BOOLEAN:'boolean',CONFIGURABLE:'configurable',IMAGE:'image',FUNCTION:'function',TEXTURE:'texture',ALL:'*'},n=t.UniformType={SAMPLER2D:'sampler2d',INT:'i',INT1:'1i',FLOAT:'f',FLOAT1:'1f',FLOAT2:'2f',FLOAT_VECTOR2:'2fv',FLOAT3:'3f',FLOAT4:'4f',MAT3:'mat3',MAT3FV:'mat3fv',MAT4:'mat4'},l=t.RendererType={WEBGL:'webgl',CANVAS:'canvas'}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(148),i=r(a),n=o(150),l=r(n),s=o(61),d=r(s),p=o(65),u=r(p),_=o(64),f=r(_),c=o(88),g=r(c),y=o(32),h=r(y),m=o(89),x=r(m),T=o(156),v=r(T),b=o(42),C=r(b),R=o(41),O=r(R),E=o(157),S=r(E),F=o(159),M=r(F),k=o(63),P=r(k),D=o(33),B=r(D),I=o(162),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(I),L=o(87),A=r(L),N={WebGLRenderer:l.default,CanvasRenderer:i.default,WebGLFilterManager:u.default,CanvasFilterManager:d.default,DisplayObject:f.default,Container:g.default,BaseTexture:h.default,Texture:x.default,RenderTexture:v.default,WebGLRenderTarget:C.default,CanvasRenderTarget:O.default,Sprite:S.default,Shaders:M.default,Shader:P.default,Filter:B.default,Filters:w,PixelArrayImage:A.default,autoDetectRenderer:function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return l.default.isSupported()?new l.default(e,t,o):new i.default(e,t,o)}};t.default=N},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(140),i=r(a),n=o(0),l=r(n),_=o(40),f=r(_),c=function(){function e(t,o,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;(0,l.default)(this,e),this.r=t,this.g=o,this.b=r,this.a=i}return e.prototype.toRGBA=function(){var e=[s(255*this.r),s(255*this.g),s(255*this.b),this.a.toFixed(2)];return'rgba('+e.join(',')+')'},e.prototype.set=function(e,t,o){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.a;return this.r=e,this.g=t,this.b=o,this.a=r,this},e.prototype.toRGB=function(){return[s(255*this.r),s(255*this.g),s(255*this.b)]},e.prototype.toHex=function(){var e=[this._componentToHex(s(255*this.r)),this._componentToHex(s(255*this.g)),this._componentToHex(s(255*this.b))];return'#'+e.join('')},e.prototype.toGLColor=function(){return[this.r,this.g,this.b,this.a]},e.prototype.toArray=function(){return this.toGLColor()},e.prototype.toRGBGLColor=function(){return[this.r,this.g,this.b]},e.prototype.toHSV=function(){var e=u(this.r,this.g,this.b),t=p(this.r,this.g,this.b),o=e-t,r,a;return a=0===e?0:o/e,e===t?r=0:(e===this.r?(r=(this.g-this.b)/o,this.g<this.b&&(r+=6)):e===this.g?r=(this.b-this.r)/o+2:e===this.b?r=(this.r-this.g)/o+4:void 0,r/=6),[r,a,e]},e.prototype.fromHSV=function(t,o,r){return this.copy(e.fromHSV(t,o,r)),this},e.fromHSV=function(o,n,l){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,a=[],u=a[0],r=a[1],_=a[2],c=d(6*o),i=6*o-c,f=l*(1-n),p=l*(1-i*n),g=l*(1-(1-i)*n);switch(c%6){case 0:u=l,r=g,_=f;break;case 1:u=p,r=l,_=f;break;case 2:u=f,r=l,_=g;break;case 3:u=f,r=p,_=l;break;case 4:u=g,r=f,_=l;break;case 5:u=l,r=f,_=p;}return new e(u,r,_,s)},e.fromArray=function(t){return new e(t[0],t[1],t[2],t[3])},e.fromHex=function(t){var o=t.match(/.{1,2}/g),a=(0,i.default)(o,3),n=a[0],r=a[1],l=a[2];return new e(parseInt(n,16)/255,parseInt(r,16)/255,parseInt(l,16)/255,1)},e.prototype.clone=function(){return new e(this.r,this.g,this.b,this.a)},e.prototype.copy=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this},e.prototype.equals=function(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a},e.prototype._componentToHex=function(e){var t=e.toString(16);return 1===t.length?'0'+t:t},e.prototype.toString=function(){return'Color('+this.r+', '+this.g+', '+this.b+', '+this.a+')'},(0,f.default)(e,null,[{key:'TRANSPARENT',get:function(){return new e(0,0,0,0)}},{key:'WHITE',get:function(){return new e(1,1,1,1)}},{key:'BLACK',get:function(){return new e(0,0,0,1)}}]),e}();t.default=c},function(e){var t=e.exports={version:'2.4.0'};'number'==typeof __e&&(__e=t)},function(e,t,o){var r=o(52)('wks'),a=o(38),i=o(15).Symbol,n='function'==typeof i,l=e.exports=function(e){return r[e]||(r[e]=n&&i[e]||(n?i:a)('Symbol.'+e))};l.store=r},function(e){var t=e.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=t)},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(23),i=r(a),n=o(82),l=r(n),s=o(0),d=r(s),p=o(1),u=r(p),_=o(2),f=r(_),c=o(7),g=r(c),y=o(22),h=r(y),m=o(30),x=r(m),T=o(21),v=r(T),b=o(12),C=r(b),R=o(26),O=r(R),E=o(59),S=r(E),F=o(10),M;M=window.Image;var k=function(e){function t(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,d.default)(this,t);var a=(0,u.default)(this,e.call(this));return a.availableOptions=a.availableOptions||{},a.availableOptions=O.default.extend(a.availableOptions,r),a._onConfigurableUpdate=a._onConfigurableUpdate.bind(a),a._initOptions(o),a}return(0,f.default)(t,e),t.prototype._buildConfigError=function(e){var t='';return this.constructor.name&&(t=this.constructor.name+': '),t+=e,new Error(t)},t.prototype._onOptionsChange=function(){},t.prototype.validateSettings=function(){var e=this;return new g.default(function(t,o){for(var r in e.availableOptions){var a=e.availableOptions[r];if(a.required&&'undefined'==typeof e._options[r])return o(e._buildConfigError('Option `'+r+'` is required.'))}t()})},t.prototype._initOptions=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._options={};var o=this,r,a,i;for(r in this.availableOptions){if(i=r.charAt(0).toUpperCase()+r.slice(1),a=this.availableOptions[r],-1===[F.OptionType.STRING,F.OptionType.NUMBER,F.OptionType.BOOLEAN,F.OptionType.OBJECT,F.OptionType.VECTOR2,F.OptionType.COLOR,F.OptionType.CONFIGURABLE,F.OptionType.COLOR_MATRIX,F.OptionType.ARRAY,F.OptionType.IMAGE,F.OptionType.FUNCTION,F.OptionType.ALL].indexOf(a.type))throw this._buildConfigError('Unknown option type: `'+a.type+'`');var n=function(e){o['set'+i]=function(t,r,a){o.setOption(e,t,r,a)},o['get'+i]=function(){return o.getOption(e)}};if(n(r,a),a.type===F.OptionType.CONFIGURABLE&&(this._options[r]=new t(void 0,a.structure||{}),this._options[r].on('update',this._onConfigurableUpdate)),!(r in e)||'undefined'==typeof e[r])if('undefined'!=typeof a.default){var l=a.default;'function'==typeof a.default&&(l=a.default()),this['set'+i](l,!1,!0)}else a.type!==F.OptionType.CONFIGURABLE&&(this._options[r]=void 0)}for(r in e){if('undefined'==typeof this.availableOptions[r])throw new Error('Invalid option: '+r);'undefined'!=typeof e[r]&&(i=r.charAt(0).toUpperCase()+r.slice(1),this['set'+i](e[r],!1,!0))}},t.prototype.set=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;for(var o in t&&this.emit('update',this,e),e)this.setOption(o,e[o],!1);this._onOptionsChange()},t.prototype.getOption=function(e){return this._options[e]},t.prototype.hasOption=function(e){return!!this.availableOptions[e]},t.prototype.getOptionDefault=function(e){var t=this.availableOptions[e];if(!t)throw new Error('Invalid option: '+e);return t.default},t.prototype.getDefaultOptions=function(){var e={};for(var t in this.availableOptions){var o=this.availableOptions[t].default;'undefined'==typeof o||(e[t]=o)}return e},t.prototype.optionsEqual=function(e){for(var t in e){var o=e[t];if(!this._optionEquals(t,o))return!1}return!0},t.prototype._optionEquals=function(e,t){var o=this.availableOptions[e];if('undefined'==typeof o)throw new Error('Invalid option: '+e);var r=this.availableOptions[e].type,a=this._options[e];return a===t||(r===F.OptionType.STRING||r===F.OptionType.NUMBER||r===F.OptionType.BOOLEAN||r===F.OptionType.OBJECT||r===F.OptionType.FUNCTION||'*'===r?a===t:r===F.OptionType.VECTOR2?a.equals(t):r===F.OptionType.COLOR||r===F.OptionType.COLOR_MATRIX?t.equals(a):r===F.OptionType.CONFIGURABLE?a.optionsEqual(t):r===F.OptionType.ARRAY?this._arrayOptionEquals(e,t):r===F.OptionType.IMAGE?a.src===t.src:void 0)},t.prototype._arrayOptionEquals=function(e,o){for(var r=this._options[e],a=!0,n=0;n<r.length;n++){var i=r[n],l=o[n];if(i instanceof t){if('undefined'==typeof l||!i.optionsEqual(l)){a=!1;break}}else if(l!==i){a=!1;break}}return a},t.prototype.serializeOptions=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(this._options),o=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r={};return t.forEach(function(t){return'undefined'==typeof e.availableOptions[t]?h.default.warn('Trying to serialize a key that does not exist: '+t):void(!1===e.availableOptions[t].serializable||(r[t]=e.serializeOption(t,o)))}),r},t.prototype.serializeOption=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=this.availableOptions[e],r=o.type,a=this._options[e];if(!a)return a;if(!1===o.serializable)throw new Error('Option `'+e+'` is not serializable.');return r===F.OptionType.STRING||r===F.OptionType.NUMBER||r===F.OptionType.BOOLEAN||r===F.OptionType.OBJECT||r===F.OptionType.FUNCTION||r===F.OptionType.ALL?a:r===F.OptionType.VECTOR2?t?a.toObject():a.clone():r===F.OptionType.COLOR||r===F.OptionType.COLOR_MATRIX?t?a.toArray():a.clone():r===F.OptionType.CONFIGURABLE?a.serializeOptions(void 0,t):r===F.OptionType.ARRAY?a.slice(0):r===F.OptionType.IMAGE?t?a.src:a:void 0},t.prototype.setOption=function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];o&&this.emit('update',this,(0,l.default)({},e,t));var a=this.availableOptions[e];if(!a)throw new Error('Invalid option: '+e);if('undefined'!=typeof a.setter&&(t=a.setter.call(this,t,r)),'undefined'!=typeof a.validation&&a.validation(t),null===t||'undefined'==typeof t){if(a.required)throw this._buildConfigError('Option `'+e+'` is required.');this._options[e]=t}else switch(a.type){case F.OptionType.STRING:if(('undefined'==typeof t?'undefined':(0,i.default)(t))!==F.OptionType.STRING)throw this._buildConfigError('Option `'+e+'` has to be a string.');var n=a.available;if('undefined'!=typeof n&&-1===n.indexOf(t))throw this._buildConfigError('Invalid value for `'+e+'` (valid values are: '+a.available.join(', ')+')');this._options[e]=t;break;case F.OptionType.NUMBER:if(('undefined'==typeof t?'undefined':(0,i.default)(t))!==F.OptionType.NUMBER)throw this._buildConfigError('Option `'+e+'` has to be a number.');this._options[e]=t;break;case F.OptionType.BOOLEAN:if(('undefined'==typeof t?'undefined':(0,i.default)(t))!==F.OptionType.BOOLEAN)throw this._buildConfigError('Option `'+e+'` has to be a boolean.');this._options[e]=t;break;case F.OptionType.VECTOR2:if(!(t instanceof v.default)&&!('object'===('undefined'==typeof t?'undefined':(0,i.default)(t))&&'x'in t&&'y'in t))throw this._buildConfigError('Option `'+e+'` has to be an instance of Vector2 or an Object holding x and y values.');this._options[e]=t instanceof v.default?t.clone():v.default.fromObject(t);break;case F.OptionType.COLOR:if(!(t instanceof C.default))throw this._buildConfigError('Option `'+e+'` has to be an instance of Color.');this._options[e]=t;break;case F.OptionType.COLOR_MATRIX:if(!(t instanceof S.default))throw this._buildConfigError('Option `'+e+'` has to be an instance of ColorMatrix.');this._options[e]=t.clone();break;case F.OptionType.FUNCTION:if('function'!=typeof t)throw this._buildConfigError('Option `'+e+'` has to be a function.');this._options[e]=t;break;case F.OptionType.OBJECT:case'*':this._options[e]=t;break;case F.OptionType.IMAGE:if('string'==typeof t){var s=new M;s.src=t,this._options[e]=s}else if(t instanceof M||'undefined'!=typeof HTMLImageElement&&t instanceof HTMLImageElement)this._options[e]=t;else throw this._buildConfigError('Option `'+e+'` has to be an Image or String.');break;case F.OptionType.CONFIGURABLE:this._options[e].set(t);break;case F.OptionType.ARRAY:if(!(t instanceof Array))throw this._buildConfigError('Option `'+e+'` has to be an Array.');this._options[e]=t.slice(0);break;default:throw this._buildConfigError('Unknown option type: `'+a.type+'`');}o&&(this._onOptionsChange(),this.emit('update',this,(0,l.default)({},e,t)))},t.prototype._onConfigurableUpdate=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];this.emit.apply(this,['update'].concat(t))},t}(x.default);t.default=k},function(e,t,o){var r=o(25),a=o(69),i=o(48),n=Object.defineProperty;t.f=o(18)?Object.defineProperty:function(e,t,o){if(r(e),t=i(t,!0),r(o),a)try{return n(e,t,o)}catch(t){}if('get'in o||'set'in o)throw TypeError('Accessors not supported!');return'value'in o&&(e[t]=o.value),e}},function(e,t,o){e.exports=!o(35)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(e){var t={}.hasOwnProperty;e.exports=function(e,o){return t.call(e,o)}},function(e,t,o){var r=o(109),a=o(46);e.exports=function(e){return r(a(e))}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),d=r(a),_=o(40),f=r(_),c=function(){function e(t,o){(0,d.default)(this,e),this.x=t,this.y=o,'undefined'==typeof this.x&&(this.x=0),'undefined'==typeof this.y&&(this.y=0)}return e.prototype.set=function(e,t){return this.x=e,this.y=t,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},e.prototype.clamp=function(t,o){var r=null!==t&&'undefined'!=typeof t,a=null!==o&&'undefined'!=typeof o;return!(t instanceof e)&&r&&(t=new e(t,t)),!(o instanceof e)&&a&&(o=new e(o,o)),r&&(this.x=u(t.x,this.x),this.y=u(t.y,this.y)),a&&(this.x=p(o.x,this.x),this.y=p(o.y,this.y)),this},e.prototype.divide=function(t,o){return t instanceof e?(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/='undefined'==typeof o?t:o),this},e.prototype.subtract=function(t,o){return t instanceof e?(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-='undefined'==typeof o?t:o),this},e.prototype.multiply=function(t,o){return t instanceof e?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*='undefined'==typeof o?t:o),this},e.prototype.add=function(t,o){return t instanceof e?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+='undefined'==typeof o?t:o),this},e.prototype.equals=function(t,o){return t instanceof e?t.x===this.x&&t.y===this.y:t===this.x&&o===this.y},e.prototype.flip=function(){var e=this.x;return this.x=this.y,this.y=e,this},e.prototype.round=function(){return this.x=s(this.x),this.y=s(this.y),this},e.prototype.ceil=function(){return this.x=l(this.x),this.y=l(this.y),this},e.prototype.floor=function(){return this.x|=0,this.y|=0,this},e.prototype.abs=function(){return this.x=i(this.x),this.y=i(this.y),this},e.prototype.len=function(){return n(this.x*this.x+this.y*this.y)},e.prototype.min=function(){return p(this.x,this.y)},e.prototype.max=function(){return u(this.x,this.y)},e.prototype.toObject=function(){return{x:this.x,y:this.y}},e.prototype.toString=function(){return'Vector2({ x: '+this.x+', y: '+this.y+' })'},e.prototype.roundDecimal=function(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this},e.fromObject=function(t){return new e(t.x,t.y)},(0,f.default)(e,null,[{key:'NULL',get:function(){return new e(0,0)}}]),e}();t.default=c},function(e,t,o){'use strict';(function(e){Object.defineProperty(t,'__esModule',{value:!0});var o='warn',r=[{type:'trace',background:'#EEEEEE',color:'#AAAAAA'},{type:'info',background:'#BDE5F8',color:'#00529B'},{type:'warn',background:'#FEEFB3',color:'#9F6000'},{type:'error',background:'#FFBABA',color:'#D8000C'},{type:'log',background:'#EEEEEE',color:'#1f4f6b'}],a=r.map(function(e){return e.type}),i={};i.setLevel=function(e){o=e},i.canLog=function(e){if(null===o)return!1;var t=a.indexOf(e),r=a.indexOf(o);return!(t<r)},i.hasColorfulOutput=function(){return(!e||e&&e.browser)&&'undefined'!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},i.printError=function(t){var e=t.stack.split('\n');e.forEach(function(e){i.error('Error',e)})},r.forEach(function(e){var t=e.type,o=e.background,r=e.color;i[t]=function(e){if('undefined'!=typeof console&&i.canLog(t)){for(var a=arguments.length,n=Array(1<a?a-1:0),l=1;l<a;l++)n[l-1]=arguments[l];var s=n.map(function(e){return'string'==typeof e?e:e.toString()}).join(' ');return i.hasColorfulOutput()?void console.log('%c  %c PhotoEditorSDK %c  %c '+e+' %c  '+s+'  %c  ','background: #2D7BFF; line-height: 20px; padding: 4px 0','background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0','background: #2D7BFF; line-height: 20px; padding: 4px 0','background: '+o+'; color: '+r+'; line-height: 20px; padding: 4px 0; font-weight: bold','background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0','background: #2D7BFF; line-height: 20px; padding: 4px 0'):console.log('PhotoEditorSDK | '+e+' | '+s)}}}),t.default=i}).call(t,o(60))},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=o(103),i=r(a),n=o(119),l=r(n),s='function'==typeof l.default&&'symbol'==typeof i.default?function(e){return typeof e}:function(e){return e&&'function'==typeof l.default&&e.constructor===l.default&&e!==l.default.prototype?'symbol':typeof e};t.default='function'==typeof l.default&&'symbol'===s(i.default)?function(e){return'undefined'==typeof e?'undefined':s(e)}:function(e){return e&&'function'==typeof l.default&&e.constructor===l.default&&e!==l.default.prototype?'symbol':'undefined'==typeof e?'undefined':s(e)}},function(e,t,o){var r=o(17),a=o(36);e.exports=o(18)?function(e,t,o){return r.f(e,t,a(1,o))}:function(e,t,o){return e[t]=o,e}},function(e,t,o){var r=o(28);e.exports=function(e){if(!r(e))throw TypeError(e+' is not an object!');return e}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var i=o(23),n=r(i),l=o(0),s=r(l),d=o(31),_=r(d),f=function(){function e(){(0,s.default)(this,e)}return e.isArray=function(e){return'[object Array]'===Object.prototype.toString.call(e)},e.isMobile=function(){if('undefined'==typeof navigator)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))},e.values=function(e){var t=[];for(var o in e)t.push(e[o]);return t},e.isDOMElement=function(e){return'object'===('undefined'==typeof HTMLElement?'undefined':(0,n.default)(HTMLElement))?e instanceof HTMLElement:e&&'object'===('undefined'==typeof e?'undefined':(0,n.default)(e))&&null!==e&&1===e.nodeType&&'string'==typeof e.nodeName},e.isTouchEvent=function(t){return-1!==t.type.indexOf('touch')},e.resizeVectorToFit=function(e,t){var o=p(t.x/e.x,t.y/e.y),r=e.clone().multiply(o);return r},e.resizeVectorToFill=function(e,t){var o=e.x/e.y,r=t.x/t.y;return o>r?t.clone().set(t.y*o,t.y):t.clone().set(t.x,t.x/o)},e.isExtendable=function(e){return'undefined'!=typeof e&&null!==e&&('object'===('undefined'==typeof e?'undefined':(0,n.default)(e))||'function'==typeof e)},e.defaults=function(e){var t={};for(var o in e)t[o]=e[o];for(var r=arguments.length,a=Array(1<r?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];for(var l=0,i;l<a.length;l++)for(var s in i=a[l],i)'undefined'==typeof t[s]&&(t[s]=i[s]);return t},e.deepDefaults=function(t){var o={};for(var r in t)o[r]=t[r];for(var a=arguments.length,n=Array(1<a?a-1:0),l=1;l<a;l++)n[l-1]=arguments[l];for(var s=0,i;s<n.length;s++)for(var d in i=n[s],i)e.isExtendable(o[d])&&e.isExtendable(i[d])?o[d]=e.deepDefaults(o[d],i[d]):'undefined'==typeof o[d]&&(o[d]=i[d]);return o},e.deepClone=function(t){var o={};for(var r in t)o[r]=e.isExtendable(t[r])?e.deepClone(t[r]):t[r];return o},e.extend=function(e){var t={};for(var o in e)t[o]=e[o];for(var r=arguments.length,a=Array(1<r?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];for(var l=0,i;l<a.length;l++)for(var s in i=a[l],i)t[s]=i[s];return t},e.clone=function(e){return this.extend({},e)},e.createBlobURIFromDataURI=function(e){if(!window.Blob||!window.URL||!ArrayBuffer||!Uint8Array)return e;for(var t=_.default.decode(e.split(',')[1]),o=e.split(',')[0].split(':')[1].split(';')[0],r=new ArrayBuffer(t.length),a=new Uint8Array(r),n=0;n<t.length;n++)a[n]=t[n];var i=new window.Blob([r],{type:o});return window.URL.createObjectURL(i)},e.requestAnimationFrame=function(e){var t=function(e){setTimeout(e,1e3/60)};return'undefined'==typeof window?t(e):(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||t)(e)},e.getUUID=function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(e){var t=0|16*Math.random(),o='x'===e?t:8|3&t;return o.toString(16)})},e.flatten=function(t){return t.reduce(function(t,o){return t.concat(Array.isArray(o)?e.flatten(o):o)},[])},e.createCanvas=function(){return document.createElement('canvas')},e.isPowerOfTwo=function(e){return 0==(e.x&e.x-1)&&0==(e.y&e.y-1)},e.nextLowestPOT=function(e){for(var t=1;32>t;t<<=1)e|=e>>t;return e-(e>>1)},e.nextHighestPOT=function(e){e--;for(var t=1;32>t;t<<=1)e|=e>>t;return e+1},e.moveArrayItem=function(e,t,o){if(o>=e.length)for(var r=o-e.length;r--+1;)e.push(void 0);e.splice(o,0,e.splice(t,1)[0])},e.ensureCanvasDimensions=function(e,t){(e.width!==t.x||e.height!==t.y)&&(e.width=t.x,e.height=t.y)},e.byteArrayToString=function(e){return e.map(function(e){return a(e)}).join('')},e.clamp=function(e,t,o){return u(t,p(e,o))},e.wildCardMatch=function(e,t){return new RegExp('^'+t.split('*').join('.*')+'$').test(e)},e.flipObject=function(e){var t={};for(var o in e)t[e[o]]=o;return t},e.cloneOptions=function(e){var t={};for(var o in e){var r=e[o];Array.isArray(r)?r=r.slice():r.clone&&(r=r.clone()),t[o]=r}return t},e.ISODateString=function(e){function t(e){return 10>e?'0'+e:e}return e.getUTCFullYear()+'-'+t(e.getUTCMonth()+1)+'-'+t(e.getUTCDate())+'T'+t(e.getUTCHours())+':'+t(e.getUTCMinutes())+':'+t(e.getUTCSeconds())+'Z'},e}();t.default=f},function(e,t,o){var r=o(15),a=o(13),i=o(68),n=o(24),l='prototype',s=function(e,t,o){var d=e&s.F,p=e&s.G,u=e&s.S,_=e&s.P,f=e&s.B,c=e&s.W,g=p?a:a[t]||(a[t]={}),y=g[l],h=p?r:u?r[t]:(r[t]||{})[l],m,x,T;for(m in p&&(o=t),o)x=!d&&h&&void 0!==h[m],x&&m in g||(T=x?h[m]:o[m],g[m]=p&&'function'!=typeof h[m]?o[m]:f&&x?i(T,r):c&&h[m]==T?function(e){var t=function(t,o,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,o);}return new e(t,o,r)}return e.apply(this,arguments)};return t[l]=e[l],t}(T):_&&'function'==typeof T?i(Function.call,T):T,_&&((g.virtual||(g.virtual={}))[m]=T,e&s.R&&y&&!y[m]&&n(y,m,T)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e){e.exports=function(e){return'object'==typeof e?null!==e:'function'==typeof e}},function(e){e.exports={}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(22),l=r(n),s=function(){function e(){(0,i.default)(this,e),this._maxListeners=12,this._events={},this._pipeDestinations=[]}return e.prototype.pipeEvents=function(e){this._pipeDestinations.push(e)},e.prototype.unpipeEvents=function(e){var t=this._pipeDestinations.indexOf(e);-1===t||this._pipeDestinations.splice(t,1)},e.prototype.on=function(e,t){if('undefined'==typeof e)throw new Error('Invalid event type: `'+e+'`');if('function'!=typeof t)throw new TypeError;var o=this._events[e]||(this._events[e]=[]);return-1===o.indexOf(t)?(o.push(t),this._maxListeners&&o.length>this._maxListeners&&(l.default.warn('EventEmitter','Possible memory leak detected, added '+o.length+' `'+e+'` listeners (current limit is '+this._maxListeners+')'),'undefined'!=typeof console&&console.trace()),this):this},e.prototype.once=function(e,t){function o(){r.off(e,o),t.apply(null,arguments)}if('undefined'==typeof e)throw new Error('Invalid event type: `'+e+'`');var r=this;return this.on(e,o)},e.prototype.off=function(e){if('undefined'==typeof e)throw new Error('Invalid event type: `'+e+'`');if(0==(1>=arguments.length?0:arguments.length-1))return this._events[e]=null,this;var t=1>=arguments.length?void 0:arguments[1];if('function'!=typeof t)throw new TypeError;var o=this._events[e];if(!o||!o.length)return this;var r=o.indexOf(t);return-1===r?this:(o.splice(r,1),this)},e.prototype.emit=function(e){for(var t=arguments.length,o=Array(1<t?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];if('undefined'==typeof e)throw new Error('Invalid event type: `'+e+'`');this._pipeDestinations.forEach(function(t){t.emit.apply(t,[e].concat(o))});var a=this._events[e];return a&&a.length&&(a.forEach(function(e){return e.apply(null,o)}),!0)},e.prototype.setMaxListeners=function(e){if(parseInt(e,10)!==e)throw new TypeError;this._maxListeners=e},e}();t.default=s},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});/*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 */var o='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';t.default={encode:function(e){var t='',r=0,a,i,n,l,s,d,p;do a=e[r++],i=e[r++],n=e[r++],l=a>>2,s=(3&a)<<4|i>>4,d=(15&i)<<2|n>>6,p=63&n,isNaN(i)?d=p=64:isNaN(n)&&(p=64),t=t+o.charAt(l)+o.charAt(s)+o.charAt(d)+o.charAt(p),a=i=n='',l=s=d=p='';while(r<e.length);return t},decode:function(e){var t=0,r=[],a=/[^A-Za-z0-9+/=]/g,i,n,l,s,d,p,u;if(a.exec(e))throw new Error('There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, \'+\', \'/\',and \'=\'\nExpect errors in decoding.');e=e.replace(/[^A-Za-z0-9+/=]/g,'');do s=o.indexOf(e.charAt(t++)),d=o.indexOf(e.charAt(t++)),p=o.indexOf(e.charAt(t++)),u=o.indexOf(e.charAt(t++)),i=s<<2|d>>4,n=(15&d)<<4|p>>2,l=(3&p)<<6|u,r.push(i),64!==p&&r.push(n),64!==u&&r.push(l),i=n=l='',s=d=p=u='';while(t<e.length);return r}}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(6),u=function(e){function t(o){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r.id=t.id++,r._onSourceLoaded=r._onSourceLoaded.bind(r),r._renderers=[],r._glTextures={},r._source=o,r._dirty=!0,r._glUnit=0,r._mipMapping=!1,r._magFilter=t.DefaultMagFilter,r._minFilter=t.DefaultMinFilter,r._repeatX=t.ClampToEdge,r._repeatY=t.ClampToEdge,r._pixelRatio=1,r._loaded=!1,r._frame=new p.Rectangle(0,0,100,100),o&&r._loadSource(),r}return(0,d.default)(t,e),t.prototype.resizeTo=function(e){this._frame.width===e.x&&this._frame.height===e.y||(this._frame.width=e.x,this._frame.height=e.y,this._dirty=!0)},t.prototype._loadSource=function(){var e=this._source,t=e.complete,o='Canvas'===e.constructor.name||e.tagName&&'CANVAS'===e.tagName.toUpperCase();return t||o?this._onSourceLoaded():void e.addEventListener('load',this._onSourceLoaded)},t.prototype._onSourceLoaded=function(){this._loaded=!0,this.emit('loaded'),this.update()},t.prototype._updateGLFilters=function(){var e=new p.Vector2(this._source.width,this._source.height);p.Utils.isPowerOfTwo(e)?(p.Log.info(this.constructor.name,'Mip-mapping enabled'),this._minFilter=t.TrilinearFilter,this._mipMapping=!0):(this._minFilter=t.LinearFilter,this._mipMapping=!1)},t.prototype.update=function(){(this._frame.width!==this._source.width||this._frame.height!==this._source.height)&&(this._frame=new p.Rectangle(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit('update')},t.prototype.getGLFilter=function(e,t){return'min'===t?this.constructor.getGLFilter(e,this._minFilter):'mag'===t?this.constructor.getGLFilter(e,this._magFilter):void 0},t.getGLFilter=function(e,o){return o===t.LinearFilter?e.LINEAR:o===t.NearestFilter?e.NEAREST:o===t.BilinearFilter?e.LINEAR_MIPMAP_NEAREST:o===t.TrilinearFilter?e.LINEAR_MIPMAP_LINEAR:void 0},t.prototype.isLoaded=function(){return this._loaded},t.prototype.setLoaded=function(e){this._loaded=e},t.prototype.getSource=function(){return this._source},t.prototype.setSource=function(e){this._source=e},t.prototype.getGLTextureForRenderer=function(e){return this._glTextures[e.id]},t.prototype.setGLTextureForRenderer=function(e,t){this._renderers[t.id]=t,this._glTextures[t.id]=e},t.prototype.getFrame=function(){return this._frame},t.prototype.setFrame=function(e){this._frame=e},t.prototype.getDimensions=function(){return new p.Vector2(this._frame.width,this._frame.height)},t.prototype.getPixelRatio=function(){return this._pixelRatio},t.prototype.setPixelRatio=function(e){this._pixelRatio=e},t.prototype.getGLUnit=function(){return this._glUnit},t.prototype.setGLUnit=function(e){this._glUnit=e},t.prototype.setMinFilter=function(e){this._minFilter=e},t.prototype.getMinFilter=function(){return this._minFilter},t.prototype.setMagFilter=function(e){this._magFilter=e},t.prototype.getMagFilter=function(){return this._magFilter},t.prototype.setRepeatX=function(e){this._repeatX=e},t.prototype.getRepeatX=function(){return this._repeatX},t.prototype.setRepeatY=function(e){this._repeatY=e},t.prototype.getRepeatY=function(){return this._repeatY},t.prototype.getGLRepeat=function(e,o){var r='x'===o?this.getRepeatX():this.getRepeatY();return r===t.ClampToEdge?e.CLAMP_TO_EDGE:r===t.Repeat?e.REPEAT:r===t.MirroredRepeat?e.MIRRORED_REPEAT:void 0},t.prototype.isDirty=function(){return this._dirty},t.prototype.setDirty=function(e){this._dirty=e},t.prototype.disposeGLTextures=function(){for(var e in this._renderers)this.disposeGLTexturesForRenderer(this._renderers[e])},t.prototype.disposeGLTexturesForRenderer=function(e){if(this._glTextures[e.id]){var t=e.getContext();t.deleteTexture(this._glTextures[e.id]),delete this._glTextures[e.id],this._renderers[e.id]||delete this._renderers[e.id]}},t.prototype.isMipMappingEnabled=function(){return this._mipMapping},t.prototype.setMipMappingEnabled=function(e){this._mipMapping=e},t.prototype.dispose=function(){0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.disposeGLTextures()},t}(p.EventEmitter);u.NearestFilter=0,u.LinearFilter=1,u.BilinearFilter=2,u.TrilinearFilter=3,u.DefaultMagFilter=u.NearestFilter,u.DefaultMinFilter=u.LinearFilter,u.ClampToEdge=0,u.Repeat=1,u.MirroredRepeat=2,u.id=0,t.default=u},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(6),u=o(16),_=r(u),f=o(63),c=r(f),g=o(62),y=r(g),h=p.Constants.OptionType,m=p.Constants.UniformType,x=p.Constants.RendererType,T=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype._initOptions=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=y.default.defaultUniforms,this._attributes=y.default.defaultAttributes,this._vertexSource=y.default.defaultVertexSource,this._fragmentSource=y.default.defaultFragmentSource,this._initUniforms(),e.prototype._initOptions.call(this,t)},t.prototype._initUniforms=function(){for(var e in this._uniforms={},this._availableUniforms){var t=this._availableUniforms[e];this._uniforms[e]={type:t.type,value:t.default||null}}for(var o in this.availableOptions){var r=this.availableOptions[o];r.uniformType?this._uniforms['u_'+o]={type:r.uniformType,value:r.default||null}:p.Log.trace(this.constructor.name,'Option `'+o+'` is missing a `uniformType`!')}},t.prototype.setOption=function(t,o){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;e.prototype.setOption.call(this,t,o,r);var a=o,i=this.availableOptions[t];if(i.uniformType){var n='u_'+t;switch(i.type){case h.COLOR:i.uniformType===m.FLOAT4?a=o.toGLColor():i.uniformType===m.FLOAT3&&(a=o.toRGBGLColor());break;case h.VECTOR2:a=[o.x,o.y];break;case h.COLOR_MATRIX:a=[o.a,o.b,o.c,o.d,o.f,o.g,o.h,o.i,o.k,o.l,o.m,o.n,o.p,o.q,o.r,o.s];var l=[o.e,o.j,o.o,o.t];this._uniforms[n+'_vec']={value:l,type:m.FLOAT4};}this.setUniform(n,a)}},t.prototype.setUniform=function(e,t){2<arguments.length&&void 0!==arguments[2]&&arguments[2];this._uniforms[e].value=t},t.prototype.setUniforms=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];for(var o in e)this._uniforms[o].value=e[o],t&&this.syncUniform(o)},t.prototype.syncUniform=function(e){this._shaders.forEach(function(t){t.syncUniform(e)})},t.prototype.syncUniforms=function(){this._shaders.forEach(function(e){e.syncUniforms()})},t.prototype.getShaderForRenderer=function(e){var t=e.getContext(),o=this._shaders[t.id];return o||(o=new c.default(e,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[t.id]=o),o},t.prototype.apply=function(e,t,o){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];e.isOfType(x.WEBGL)?this._applyWebGL(e,t,o,r):e.isOfType(x.CANVAS)&&this._applyCanvas(e,t,o,r)},t.prototype._applyWebGL=function(e,t,o){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=e.getContext(),i=this.getShaderForRenderer(e);e.setRenderTarget(o),r&&o.clear(),e.setShader(i);var n=e.getCurrentRenderTarget().getProjectionMatrix().toArray();i.setUniform('u_projMatrix',n),i.syncUniforms(),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.getTexture()),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)},t.prototype._applyCanvas=function(e,t,o){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),i=o.getContext();p.Log.warn(this.constructor.name,'`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`.'),i.clearRect(0,0,a.width,a.height),i.drawImage(a,0,0)},t.prototype.dispose=function(){this._shaders.forEach(function(e){return e.dispose()}),this._shaders=[]},t}(_.default);t.default=T},function(e){'use strict';/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.exports={stackBlurCanvasRGBA:function(e,a,n,l,s,d){if(!(isNaN(d)||1>d)){d|=0;var u=e.data,_=d+d+1,f=l-1,c=s-1,g=d+1,h=g*(g+1)/2,m=new t,T=m,v,x,y,i,p,b,C,R,O,E,S,F,M,k,P,D,B,I,w,L,A,N,U,G,z;for(y=1;y<_;y++)T=T.next=new t,y==g&&(z=T);T.next=m;var V=null,j=null;C=b=0;var W=o[d],H=r[d];for(x=0;x<s;x++){for(D=B=I=w=R=O=E=S=0,F=g*(L=u[b]),M=g*(A=u[b+1]),k=g*(N=u[b+2]),P=g*(U=u[b+3]),R+=h*L,O+=h*A,E+=h*N,S+=h*U,T=m,y=0;y<g;y++)T.r=L,T.g=A,T.b=N,T.a=U,T=T.next;for(y=1;y<g;y++)i=b+((f<y?f:y)<<2),R+=(T.r=L=u[i])*(G=g-y),O+=(T.g=A=u[i+1])*G,E+=(T.b=N=u[i+2])*G,S+=(T.a=U=u[i+3])*G,D+=L,B+=A,I+=N,w+=U,T=T.next;for(V=m,j=z,v=0;v<l;v++)u[b+3]=U=S*W>>H,0===U?u[b]=u[b+1]=u[b+2]=0:(U=255/U,u[b]=(R*W>>H)*U,u[b+1]=(O*W>>H)*U,u[b+2]=(E*W>>H)*U),R-=F,O-=M,E-=k,S-=P,F-=V.r,M-=V.g,k-=V.b,P-=V.a,i=C+((i=v+d+1)<f?i:f)<<2,D+=V.r=u[i],B+=V.g=u[i+1],I+=V.b=u[i+2],w+=V.a=u[i+3],R+=D,O+=B,E+=I,S+=w,V=V.next,F+=L=j.r,M+=A=j.g,k+=N=j.b,P+=U=j.a,D-=L,B-=A,I-=N,w-=U,j=j.next,b+=4;C+=l}for(v=0;v<l;v++){for(B=I=w=D=O=E=S=R=0,b=v<<2,F=g*(L=u[b]),M=g*(A=u[b+1]),k=g*(N=u[b+2]),P=g*(U=u[b+3]),R+=h*L,O+=h*A,E+=h*N,S+=h*U,T=m,y=0;y<g;y++)T.r=L,T.g=A,T.b=N,T.a=U,T=T.next;for(p=l,y=1;y<=d;y++)b=p+v<<2,R+=(T.r=L=u[b])*(G=g-y),O+=(T.g=A=u[b+1])*G,E+=(T.b=N=u[b+2])*G,S+=(T.a=U=u[b+3])*G,D+=L,B+=A,I+=N,w+=U,T=T.next,y<c&&(p+=l);for(b=v,V=m,j=z,x=0;x<s;x++)i=b<<2,u[i+3]=U=S*W>>H,0<U?(U=255/U,u[i]=(R*W>>H)*U,u[i+1]=(O*W>>H)*U,u[i+2]=(E*W>>H)*U):u[i]=u[i+1]=u[i+2]=0,R-=F,O-=M,E-=k,S-=P,F-=V.r,M-=V.g,k-=V.b,P-=V.a,i=v+((i=x+g)<c?i:c)*l<<2,R+=D+=V.r=u[i],O+=B+=V.g=u[i+1],E+=I+=V.b=u[i+2],S+=w+=V.a=u[i+3],V=V.next,F+=L=j.r,M+=A=j.g,k+=N=j.b,P+=U=j.a,D-=L,B-=A,I-=N,w-=U,j=j.next,b+=l}}}}},function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,o){var r=o(72),a=o(53);e.exports=Object.keys||function(e){return r(e,a)}},function(e){var t=0,o=Math.random();e.exports=function(e){return'Symbol('.concat(e===void 0?'':e,')_',(++t+o).toString(36))}},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(o){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,o){'use strict';t.__esModule=!0;var r=o(77),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var o=0,r;o<t.length;o++)r=t[o],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}()},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(6),l=o(32),s=r(l),d=function(){function e(t,o,r,a,n){(0,i.default)(this,e),this._width=t,this._height=o,this._pixelRatio=r,this._baseTexture=new s.default,this._canvas=a||this._createCanvas(),this._context=n||this._canvas.getContext('2d'),this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}return e.prototype._createCanvas=function(){return n.Utils.createCanvas()},e.prototype.clear=function(){var e=this._context;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)},e.prototype.resizeTo=function(e){this._baseTexture.resizeTo(e),this._width!==e.x&&(this._width=e.x,this._canvas.width=this._width*this._pixelRatio),this._height!==e.y&&(this._height=e.y,this._canvas.height=this._height*this._pixelRatio)},e.prototype.getCanvas=function(){return this._canvas},e.prototype.getContext=function(){return this._context},e.prototype.getFilterStack=function(){return this._filterStack},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.getPixelRatio=function(){return this._pixelRatio},e.prototype.setPixelRatio=function(e){this._pixelRatio=e},e.prototype.getDimensions=function(){return new n.Vector2(this._width,this._height)},e.prototype.getBaseTexture=function(){return this._baseTexture},e.prototype.dispose=function(){this._canvas=null,this._context=null},e}();t.default=d},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(6),l=o(32),s=r(l),d=function(){function e(t,o,r,a){var l=4<arguments.length&&void 0!==arguments[4]&&arguments[4];(0,i.default)(this,e),this._renderer=t,this._gl=t.getContext(),this._width=o,this._height=r,this._frame=null,this._pixelRatio=a,this._projectionMatrix=new n.Matrix,this._mipMapping=!1,this._baseTexture=new s.default;var d=this._baseTexture.getFrame();d.width=o,d.height=r,this._baseTexture.setPixelRatio(a),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=l,this._filterStack=[{renderTarget:this,filter:[]}],l||this._initFrameBuffer()}return e.prototype.resizeTo=function(e){this._width=0|e.x,this._height=0|e.y,this._baseTexture.resizeTo(e),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()},e.prototype._getMinFilter=function(){var e=s.default.DefaultMinFilter;return this._mipMapping&&(e=s.default.TrilinearFilter),e},e.prototype._getMagFilter=function(){return s.default.DefaultMagFilter},e.prototype._resizeTexture=function(){var e=this._gl;e.bindTexture(e.TEXTURE_2D,this._texture);var t=this._width*this._pixelRatio,o=this._height*this._pixelRatio;e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,o,0,e.RGBA,e.UNSIGNED_BYTE,null);var r=new n.Vector2(this._width,this._height);n.Utils.isPowerOfTwo(r)?(n.Log.info('WebGLRenderTarget','Mip-mapping enabled'),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)},e.prototype.activate=function(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),e.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),e.disable(e.STENCIL_TEST)},e.prototype.clear=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n.Color.TRANSPARENT,t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),n.GLUtils.checkFramebufferStatus('WebGLRenderTarget#clear',t),t.clearColor.apply(t,e.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)},e.prototype._calculateProjectionMatrix=function(){var e=this._projectionMatrix;e.reset();var t=this._frame||new n.Rectangle(0,0,this._width,this._height),o=t.x,r=t.y;this._isRoot?(e.a=2*(1/this._width),e.d=2*(-1/this._height),e.tx=-1-o*e.a,e.ty=1-r*e.d):(e.a=2*(1/this._width),e.d=2*(1/this._height),e.tx=-1-o*e.a,e.ty=-1-r*e.d)},e.prototype._initFrameBuffer=function(){var e=this._gl;this._framebuffer=e.createFramebuffer(),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new n.Vector2(this._width,this._height)),n.GLUtils.checkFramebufferStatus('WebGLRenderTarget#_initFramebuffer',e)},e.prototype.getProjectionMatrix=function(){return this._projectionMatrix},e.prototype.getTexture=function(){return this._texture},e.prototype.getFrame=function(){return this._frame},e.prototype.setFrame=function(e){this._frame=e},e.prototype.getFilterStack=function(){return this._filterStack},e.prototype.getPixelRatio=function(){return this._pixelRatio},e.prototype.setPixelRatio=function(e){this._pixelRatio=e,this._isRoot||this._resizeTexture()},e.prototype.getBaseTexture=function(){return this._baseTexture},e.prototype.dispose=function(){var e=this._gl;this._baseTexture.disposeGLTexturesForRenderer(this._renderer),e.deleteTexture(this._texture),e.deleteFramebuffer(this._framebuffer)},e}();t.default=d},function(e,a,i){'use strict';function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,'__esModule',{value:!0});var l=i(0),s=n(l),d=i(1),p=n(d),u=i(2),_=n(u),f=i(3),c=f.Constants.RendererType,g=function(e){function a(t,o){(0,s.default)(this,a);var r=(0,p.default)(this,e.call(this,o));return r._operation=t,r._dirtiness={},r.id=f.Utils.getUUID(),r._renderTextures={},r._identitySprite=new f.Engine.Sprite,r._sprite=new f.Engine.Sprite,r._dummyImage={addEventListener:function(){},removeEventListener:function(){}},r._hitTestSprite=new f.Engine.Sprite,r._renderers=[],r}return(0,_.default)(a,e),a.prototype.applyScale=function(){},a.prototype.applyRotation=function(e){var a=this._operation.getInputDimensions(),i=180*this.getRotation()/r;i+=e,this.setRotation(i*r/180);var n=(e+360)%360*r/180,l=o(n),s=t(n),d=this._options.position.clone().subtract(0.5).multiply(a),p=new f.Vector2(d.x*l-d.y*s,d.x*s+d.y*l).divide(a.clone().flip());this.setPosition(new f.Vector2(0.5,0.5).add(p))},a.prototype.applyFlip=function(e){var t=this.getPosition().clone();'horizontal'===e?t.x=1-this._options.position.x:'vertical'===e?t.y=1-this._options.position.y:void 0,this.setPosition(t)},a.prototype.applyTransform=function(e){var t={};t.rotation=e.applyToRotation(this.getRotation()),t.position=e.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(t.dimensions=e.applyToDimensions(this.getDimensions())),this.set(t,!1)},a.prototype.getDisplayObject=function(){return this._sprite},a.prototype.getHitTestDisplayObject=function(){return this._sprite},a.prototype._getTexture=function(){throw new Error('Sprite#_getTexture is abstract and not implemented in child class.')},a.prototype._prepareRenderTexture=function(e){if(!this._renderTexture){var t=this._getTexture();this._renderTextureContainer=new f.Engine.Container,this._renderTextureSprite=new f.Engine.Sprite(t),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(e.getRenderer(),t.getDimensions())}else this._renderTexture.clear()},a.prototype._rendersToRenderTexture=function(e){return e.getOptions().smoothDownscaling&&e.getRenderer().isOfType(c.WEBGL)},a.prototype._optionEquals=function(t,o){return'type'===t||e.prototype._optionEquals.call(this,t,o)},a.prototype.update=function(e,t){this._rendersToRenderTexture(e)&&(this._prepareRenderTexture(e),this._renderToRenderTexture(e)),this._updateSprite(t)},a.prototype._updateSprite=function(e){var t=this,o=[this._sprite,this._hitTestSprite];o.forEach(function(o){if(o.getTexture()){o.setAnchor(t._options.anchor),o.setPosition(t._options.position.clone().multiply(e)),'undefined'!=typeof t._options.alpha&&o.setAlpha(t._options.alpha);var r=t._options.dimensions;r&&(r=r.clone().multiply(t._operation.getSDK().getTextureScale()),o.setWidth(r.x),o.setHeight(r.y)),o.updateTransform();var a=o.getTexture().getFrame(),i=new f.Vector2(a.width,a.height);o.setPivot(t._options.pivot.clone().multiply(i)),o.setRotation(t._options.rotation),o.updateTransform()}})},a.prototype._renderToRenderTexture=function(e){var t=this._getTexture().getDimensions(),o=this._getRenderTexture(e.getRenderer(),t),r=t.clone();if(this._options.smoothDownscaling&&(r.x=f.Utils.nextHighestPOT(r.x),r.y=f.Utils.nextHighestPOT(r.y)),this._renderTexture.resizeTo(r),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var a=r.clone().subtract(t.x,t.y).divide(r),i=o.getUVs().getUVs();i[0].x=i[3].x=0,i[1].x=i[2].x=1-a.x,i[0].y=i[1].y=0,i[2].y=i[3].y=1-a.y}this._sprite.setTexture(o)},a.prototype.isDirtyForRenderer=function(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]},a.prototype.setDirtyForRenderer=function(e,t){this._renderers[t.id]=t,this._dirtiness[t.id]=e},a.prototype.setDirty=function(e){for(var t in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[t])},a.prototype._getRenderTexture=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new f.Vector2(100,100);return this._renderTextures[e.id]||(this._renderTextures[e.id]=new f.Engine.RenderTexture(e,t.x,t.y,1)),this._renderTextures[e.id]},a.prototype.dispose=function(){for(var e in this._renderTextures)this._renderTextures[e].dispose()},a}(f.Configurable);a.default=g},function(e,t,o){'use strict';var r=o(105)(!0);o(67)(String,'String',function(e){this._t=e+'',this._i=0},function(){var e=this._t,t=this._i,o;return t>=e.length?{value:void 0,done:!0}:(o=r(e,t),this._i+=o.length,{value:o,done:!1})})},function(e){e.exports=function(e){return isNaN(e=+e)?0:(0<e?d:l)(e)}},function(e){e.exports=function(e){if(e==void 0)throw TypeError('Can\'t call method on  '+e);return e}},function(e){e.exports=!0},function(e,t,o){var r=o(28);e.exports=function(e,t){if(!r(e))return e;var o,a;if(t&&'function'==typeof(o=e.toString)&&!r(a=o.call(e)))return a;if('function'==typeof(o=e.valueOf)&&!r(a=o.call(e)))return a;if(!t&&'function'==typeof(o=e.toString)&&!r(a=o.call(e)))return a;throw TypeError('Can\'t convert object to primitive value')}},function(e,t,o){var r=o(25),a=o(108),n=o(53),i=o(51)('IE_PROTO'),l=function(){},s='prototype',d=function(){var e=o(70)('iframe'),t=n.length,r='<',a='>',i;for(e.style.display='none',o(113).appendChild(e),e.src='javascript:',i=e.contentWindow.document,i.open(),i.write(r+'script'+a+'document.F=Object'+r+'/script'+a),i.close(),d=i.F;t--;)delete d[s][n[t]];return d()};e.exports=Object.create||function(e,t){var o;return null===e?o=d():(l[s]=r(e),o=new l,l[s]=null,o[i]=e),void 0===t?o:a(o,t)}},function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,t,o){var r=o(52)('keys'),a=o(38);e.exports=function(e){return r[e]||(r[e]=a(e))}},function(e,t,o){var r=o(15),a='__core-js_shared__',i=r[a]||(r[a]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e){e.exports=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf']},function(e,t,o){var r=o(17).f,a=o(19),i=o(14)('toStringTag');e.exports=function(e,t,o){e&&!a(e=o?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,o){o(116);for(var r=o(15),a=o(24),n=o(29),l=o(14)('toStringTag'),s=['NodeList','DOMTokenList','MediaList','StyleSheetList','CSSRuleList'],d=0;5>d;d++){var i=s[d],p=r[i],u=p&&p.prototype;u&&!u[l]&&a(u,l,i),n[i]=n.Array}},function(e,t,o){t.f=o(14)},function(e,t,o){var r=o(15),a=o(13),i=o(47),n=o(56),l=o(17).f;e.exports=function(e){var t=a.Symbol||(a.Symbol=i?{}:r.Symbol||{});'_'==e.charAt(0)||e in t||l(t,e,{value:n.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(t,o,r){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,'__esModule',{value:!0});var i=r(0),u=a(i),n=r(40),l=a(n),s=r(12),d=a(s),p=function(){function _(){var y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,x=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,d=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,e=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,f=6<arguments.length&&void 0!==arguments[6]?arguments[6]:1,g=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,i=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,T=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,v=11<arguments.length&&void 0!==arguments[11]?arguments[11]:0,l=12<arguments.length&&void 0!==arguments[12]?arguments[12]:1,m=13<arguments.length&&void 0!==arguments[13]?arguments[13]:0,n=14<arguments.length&&void 0!==arguments[14]?arguments[14]:0,o=15<arguments.length&&void 0!==arguments[15]?arguments[15]:0,p=16<arguments.length&&void 0!==arguments[16]?arguments[16]:0,b=17<arguments.length&&void 0!==arguments[17]?arguments[17]:0,r=18<arguments.length&&void 0!==arguments[18]?arguments[18]:1,s=19<arguments.length&&void 0!==arguments[19]?arguments[19]:0;(0,u.default)(this,_),this.set(y,a,x,c,d,e,f,g,h,i,T,v,l,m,n,o,p,b,r,s)}return _.prototype.set=function(u,a,_,c,d,e,f,g,y,i,h,x,l,m,n,o,p,T,r,s){this.a=u,this.b=a,this.c=_,this.d=c,this.e=d,this.f=e,this.g=f,this.h=g,this.i=y,this.j=i,this.k=h,this.l=x,this.m=l,this.n=m,this.o=n,this.p=o,this.q=p,this.r=T,this.s=r,this.t=s},_.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0},_.prototype.apply=function(e){var t=this.a*e.r+this.b*e.g+this.c*e.b+this.d*e.a+this.e,o=this.f*e.r+this.g*e.g+this.h*e.b+this.i*e.a+this.j,r=this.k*e.r+this.l*e.g+this.m*e.b+this.n*e.a+this.o,i=this.p*e.r+this.q*e.g+this.r*e.b+this.s*e.a+this.t;return new d.default(t,o,r,i)},_.prototype.multiply=function(u){var _=u,y=this,x,a,T,c,d,e,f,g,h,i,v,b,l,m,n,o,p,C,r,s;return x=_.a*y.a+_.b*y.f+_.c*y.k+_.d*y.p,a=_.a*y.b+_.b*y.g+_.c*y.l+_.d*y.q,T=_.a*y.c+_.b*y.h+_.c*y.m+_.d*y.r,c=_.a*y.d+_.b*y.i+_.c*y.n+_.d*y.s,e=_.f*y.a+_.g*y.f+_.h*y.k+_.i*y.p,f=_.f*y.b+_.g*y.g+_.h*y.l+_.i*y.q,g=_.f*y.c+_.g*y.h+_.h*y.m+_.i*y.r,h=_.f*y.d+_.g*y.i+_.h*y.n+_.i*y.s,v=_.k*y.a+_.l*y.f+_.m*y.k+_.n*y.p,b=_.k*y.b+_.l*y.g+_.m*y.l+_.n*y.q,l=_.k*y.c+_.l*y.h+_.m*y.m+_.n*y.r,m=_.k*y.d+_.l*y.i+_.m*y.n+_.n*y.s,o=_.p*y.a+_.q*y.f+_.r*y.k+_.s*y.p,p=_.p*y.b+_.q*y.g+_.r*y.l+_.s*y.q,C=_.p*y.c+_.q*y.h+_.r*y.m+_.s*y.r,r=_.p*y.d+_.q*y.i+_.r*y.n+_.s*y.s,d=_.a*y.e+_.b*y.j+_.c*y.o+_.d*y.t+_.e,i=_.f*y.e+_.g*y.j+_.h*y.o+_.i*y.t+_.j,n=_.k*y.e+_.l*y.j+_.m*y.o+_.n*y.t+_.o,s=_.p*y.e+_.q*y.j+_.r*y.o+_.s*y.t+_.t,this.a=x,this.b=a,this.c=T,this.d=c,this.e=d,this.f=e,this.g=f,this.h=g,this.i=h,this.j=i,this.k=v,this.l=b,this.m=l,this.n=m,this.o=n,this.p=o,this.q=p,this.r=C,this.s=r,this.t=s,this},_.prototype.clone=function(){var e=new _;return e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),e},_.prototype.equals=function(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f&&this.g===e.g&&this.h===e.h&&this.i===e.i&&this.j===e.j&&this.k===e.k&&this.l===e.l&&this.m===e.m&&this.n===e.n&&this.o===e.o&&this.p===e.p&&this.q===e.q&&this.r===e.r&&this.s===e.s&&this.t===e.t},_.prototype.getOffsets=function(){return[this.e,this.j,this.o,this.t]},_.prototype.toString=function(){return'ColorMatrix( '+this.a+', '+this.b+', '+this.c+', '+this.d+', '+this.e+',\n      '+this.f+', '+this.g+', '+this.h+', '+this.i+', '+this.j+',\n      '+this.k+', '+this.l+', '+this.m+', '+this.n+', '+this.o+',\n      '+this.p+', '+this.q+', '+this.r+', '+this.s+', '+this.t+' )'},_.prototype.toArray=function(){var e=this;return['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t'].map(function(t){return e[t]})},_.createBrightnessMatrix=function(e){var t=new _;return t.e=e,t.j=e,t.o=e,t},_.createContrastMatrix=function(e){var t=new _;return t.a=t.g=t.m=e,t.e=t.j=t.o=(1-e)/2,t},_.createSaturationMatrix=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=new _,o=1-e,a=0.213*o,r=0.715*o,i=0.072*o;return t.a=a+e,t.b=r,t.c=i,t.f=a,t.g=r+e,t.h=i,t.k=a,t.l=r,t.m=i+e,t},_.createExposureMatrix=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,o=e(2,t);return new _(o,0,0,0,0,0,o,0,0,0,0,0,o,0,0,0,0,0,1,0)},_.createLinearMatrix=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=new _;return o.a=o.g=o.m=e,o.e=o.j=o.o=t,o},(0,l.default)(_,null,[{key:'IDENTITY',get:function(){return new _}}]),_}();o.default=p},function(e){function t(){throw new Error('setTimeout has not been defined')}function o(){throw new Error('clearTimeout has not been defined')}function r(e){if(p===setTimeout)return setTimeout(e,0);if((p===t||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function a(e){if(u===clearTimeout)return clearTimeout(e);if((u===o||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function i(){f&&g&&(f=!1,g.length?_=g.concat(_):c=-1,_.length&&n())}function n(){if(!f){var e=r(i);f=!0;for(var t=_.length;t;){for(g=_,_=[];++c<t;)g&&g[c].run();c=-1,t=_.length}g=null,f=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function s(){}var d=e.exports={},p,u;(function(){try{p='function'==typeof setTimeout?setTimeout:t}catch(o){p=t}try{u='function'==typeof clearTimeout?clearTimeout:o}catch(t){u=o}})();var _=[],f=!1,c=-1,g;d.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];_.push(new l(e,t)),1!==_.length||f||r(n)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title='browser',d.browser=!0,d.env={},d.argv=[],d.version='',d.versions={},d.on=s,d.addListener=s,d.once=s,d.off=s,d.removeListener=s,d.removeAllListeners=s,d.emit=s,d.prependListener=s,d.prependOnceListener=s,d.listeners=function(){return[]},d.binding=function(){throw new Error('process.binding is not supported')},d.cwd=function(){return'/'},d.chdir=function(){throw new Error('process.chdir is not supported')},d.umask=function(){return 0}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(6),l=o(41),s=r(l),d=function(){function e(t){(0,i.default)(this,e),this._renderer=t,this._filterStack=[{renderTarget:t.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new n.Rectangle(0,0,t.getWidth(),t.getHeight())}return e.prototype.resizeTo=function(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._textures.forEach(function(t){return t.resizeTo(e)})},e.prototype.pushFilters=function(e,t){var o=e.getBounds();this._currentFrame=o;var r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r),this._filterStack.push({renderTarget:r,filters:t}),r.clear()},e.prototype.popFilters=function(){var e=this._filterStack.pop(),t=e.filters,o=e.renderTarget,r=this._filterStack[this._filterStack.length-1],a=o,i=r.renderTarget;return 1===t.length?(t[0].apply(this._renderer,a,i),this._textures.push(a)):this._applyFilters(t,a,i),t},e.prototype._applyFilters=function(e,t,o){var r=this,a=t,i=this._getOrCreateRenderTarget(!0),n=e[e.length-1];e.forEach(function(e){if(!(e===n)){e.apply(r._renderer,a,i);var t=a;a=i,i=t}else e.apply(r._renderer,a,o)}),this._textures.push(a),this._textures.push(i)},e.prototype._getOrCreateRenderTarget=function(e){var t=this._textures.pop();return t||(t=new s.default(this._textureFrame.width,this._textureFrame.height,1)),e&&t.clear(),t},e.prototype.setFilterStack=function(e){this._filterStack=e},e.prototype.dispose=function(){},e}();t.default=d},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(6),u=o(63),_=r(u),f=p.Constants.UniformType,c=function(e){function t(o,r,a){return(0,i.default)(this,t),r=r||t.defaultVertexSource,a=a||t.defaultFragmentSource,(0,l.default)(this,e.call(this,o,r,a,t.defaultUniforms,t.defaultAttributes))}return(0,d.default)(t,e),t}(_.default);c.defaultVertexSource=o(152),c.defaultFragmentSource=o(153);var g=new p.Matrix;c.defaultUniforms={u_image:{type:f.SAMPLER2D,value:0},u_projMatrix:{type:f.MAT3,value:g.toArray()}},c.defaultAttributes=['a_position','a_texCoord','a_color'],t.default=c},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),i=o(6),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(i),l=o(10),s=n.Log,d=n.Utils,p=function(){function e(t,o,r,i,n){(0,a.default)(this,e),this._renderer=t,this._vertexSource=o,this._fragmentSource=r,this._uniforms=i||{},this._uniformLocations={},this._attributes=n||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on('context',this._onContextChange),this._init()}return e.prototype._init=function(){this._compile();var e=this._renderer.getContext();e.useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()},e.prototype._onContextChange=function(){this._init()},e.prototype.setupBuffers=function(e,t){var o=this._renderer.getContext();o.bindBuffer(o.ARRAY_BUFFER,e),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t),o.vertexAttribPointer(this._attributeLocations.a_position,2,o.FLOAT,!1,n.VERTEX_BYTE_SIZE,0),o.vertexAttribPointer(this._attributeLocations.a_texCoord,2,o.FLOAT,!1,n.VERTEX_BYTE_SIZE,8),o.vertexAttribPointer(this._attributeLocations.a_color,4,o.UNSIGNED_BYTE,!0,n.VERTEX_BYTE_SIZE,16)},e.prototype.syncUniforms=function(){var e=this;Object.keys(this._uniforms).forEach(function(t){e.syncUniform(t)})},e.prototype.syncUniform=function(e){var t=this._renderer.getContext(),o=this._uniforms[e],r=this._uniformLocations[e];switch(o.type){case l.UniformType.SAMPLER2D:t.uniform1i(r,o.value);break;case l.UniformType.INT:case l.UniformType.INT1:t.uniform1i(r,o.value);break;case l.UniformType.FLOAT:case l.UniformType.FLOAT1:t.uniform1f(r,o.value);break;case l.UniformType.FLOAT2:t.uniform2f(r,o.value[0],o.value[1]);break;case l.UniformType.FLOAT3:t.uniform3f(r,o.value[0],o.value[1],o.value[2]);break;case l.UniformType.FLOAT4:t.uniform4f(r,o.value[0],o.value[1],o.value[2],o.value[3]);break;case l.UniformType.FLOAT_VECTOR2:t.uniform2fv(r,o.value);break;case l.UniformType.MAT3:case l.UniformType.MAT3FV:t.uniformMatrix3fv(r,!1,o.value);break;case l.UniformType.MAT4:t.uniformMatrix4fv(r,!1,o.value);break;default:s.warn(this.constructor.name,'Unknown uniform type: '+o.type);}},e.prototype._cacheAttributeLocations=function(){var e=this,t=this._renderer.getContext();this._attributes.forEach(function(o){e._attributeLocations[o]=t.getAttribLocation(e._program,o)})},e.prototype._cacheUniformLocations=function(){var e=this,t=this._renderer.getContext(),o=Object.keys(this._uniforms);o.forEach(function(o){e._uniformLocations[o]=t.getUniformLocation(e._program,o)})},e.prototype._addPrecisionToSource=function(e){var t=this._renderer.getMaxFloatPrecision(),o='mediump';return d.isMobile()&&'highp'===t&&(o='highp'),'precision '+o+' float;\n'+e},e.prototype._compile=function(){var e=this._renderer.getContext(),t=this._compileShader(e.VERTEX_SHADER,this._vertexSource);this._vertexShader=t;var o=this._addPrecisionToSource(this._fragmentSource),r=this._compileShader(e.FRAGMENT_SHADER,o);this._fragmentShader=r;var a=e.createProgram();e.attachShader(a,t),e.attachShader(a,r),e.linkProgram(a);var i=e.getProgramParameter(a,e.LINK_STATUS);if(!i){var n=e.getProgramInfoLog(a);e.isContextLost()&&(n='WebGL context lost'),e.deleteProgram(a),s.error(this.constructor.name,'WebGL program linking error: '+n)}this._program=a},e.prototype._compileShader=function(e,t){var o=this._renderer.getContext(),r=o.createShader(e);o.shaderSource(r,t),o.compileShader(r);var a=o.getShaderParameter(r,o.COMPILE_STATUS);if(!a){var i=o.getShaderInfoLog(r);o.isContextLost()&&(i='WebGL context lost'),o.deleteShader(r),s.error(this.constructor.name,'WebGL shader compilation error: '+i)}return r},e.prototype.setUniform=function(e,t){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this._uniforms[e].value=t,o&&this.syncUniform(e)},e.prototype.setUniforms=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];for(var o in e)this._uniforms[o].value=e[o],t&&this.syncUniform(o)},e.prototype.getUniforms=function(){return this._uniforms},e.prototype.getAttributes=function(){return this._attributes},e.prototype.getAttributeLocations=function(){return this._attributeLocations},e.prototype.getProgram=function(){return this._program},e.prototype.dispose=function(){var e=this._renderer.getContext();e.deleteProgram(this._program),e.deleteShader(this._vertexShader),e.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off('context',this._onContextChange)},e}();t.default=p},function(e,r,a){'use strict';Object.defineProperty(r,'__esModule',{value:!0});var i=a(0),n=function(e){return e&&e.__esModule?e:{default:e}}(i),l=a(6),s=function(){function e(){(0,n.default)(this,e),this._position=new l.Vector2(0,0),this._scale=new l.Vector2(1,1),this._pivot=new l.Vector2(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new l.Matrix,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new l.Rectangle(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new l.Rectangle(0,0,1,1),this._tint=16777215,this._filterRectangle=new l.Rectangle(0,0,0,0)}return e.prototype.renderWebGL=function(){l.Log.warn(this.constructor.name,'`renderWebGL` is abstract and not implemented in inherited class')},e.prototype.renderCanvas=function(){l.Log.warn(this.constructor.name,'`renderCanvas` is abstract and not implemented in inherited class')},e.prototype.updateTransform=function(){var e=this._parent?this._parent.getWorldTransform():l.Matrix.IDENTITY,r=this._worldTransform,a=this._rotation!==this._lastRotation;a&&(this._sinRotation=t(this._rotation),this._cosRotation=o(this._rotation),this._lastRotation=this._rotation),r.a=this._cosRotation*this._scale.x,r.b=this._sinRotation*this._scale.x,r.c=-this._sinRotation*this._scale.y,r.d=this._cosRotation*this._scale.y,r.tx=this._position.x,r.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(r.tx-=this._pivot.x*r.a+this._pivot.y*r.c,r.ty-=this._pivot.x*r.b+this._pivot.y*r.d),r.tx|=0,r.ty|=0,r.multiply(e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.addShader=function(e){this._shaders.push(e)},e.prototype.removeShader=function(e){var t=this._shaders.indexOf(e);return-1!==t&&(this._shaders.splice(t,1),!0)},e.prototype.removeShaderAt=function(e){return!!this._shaders[e]&&(this._shaders.splice(e,1),!0)},e.prototype.getBounds=function(){return this._bounds.clone()},e.prototype.getPosition=function(){return this._position},e.prototype.setPosition=function(e,t){e instanceof l.Vector2?this._position.copy(e):this._position.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.getScale=function(){return this._scale},e.prototype.setScale=function(e,t){e instanceof l.Vector2?this._scale.copy(e):this._scale.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.getPivot=function(){return this._pivot},e.prototype.setPivot=function(e,t){e instanceof l.Vector2?this._pivot.copy(e):this._pivot.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.getRotation=function(){return this._rotation},e.prototype.setRotation=function(e){this._rotation=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.getAlpha=function(){return this._alpha},e.prototype.setAlpha=function(e){this._alpha=e},e.prototype.getWorldAlpha=function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha},e.prototype.getWorldTransform=function(){return this._worldTransform},e.prototype.getParent=function(){return this._parent},e.prototype.setParent=function(e){this._parent=e},e.prototype.getFilterRectangle=function(){return this._filterRectangle},e.prototype.setFilterRectangle=function(e){this._filterRectangle.copy(e)},e.prototype.getTint=function(){return this._tint},e.prototype.setTint=function(e){this._tint=e},e.prototype.isVisible=function(){return this._visible},e.prototype.setVisible=function(e){this._visible=e},e}();r.default=s},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(6),l=o(42),s=r(l),d=o(154),p=r(d),u=n.Constants.RendererType,_=function(){function e(t){(0,i.default)(this,e),this._renderer=t,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new n.Rectangle(0,0,t.getWidth(),t.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on('context',this._onContextChange),this._onContextChange()}return e.prototype.resizeTo=function(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._renderTargets.forEach(function(t){return t.resizeTo(e)})},e.prototype.getFilterStack=function(){return this._filterStack},e.prototype.setFilterStack=function(e){this._filterStack=e},e.prototype._getOrCreateRenderTarget=function(e){var t=this._renderTargets.pop();return t||(t=new s.default(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),t.setFrame(this._currentFrame),e&&t.clear(),t},e.prototype.pushFilters=function(e,t){var o=e.getBounds();this._currentFrame=o;var r=e.getFilterRectangle();0<r.width&&0<r.height&&(this._currentFrame=r);var a=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(a),a.clear(),this._filterStack.push({renderTarget:a,filters:t})},e.prototype.popFilters=function(){var e=this._filterStack.pop(),t=e.filters,o=e.renderTarget,r=this._filterStack[this._filterStack.length-1],a=o,i=r.renderTarget;this._quad.map(this._textureFrame,a.getFrame());var n=t[0].getShaderForRenderer(this._renderer),l=this._quad.getVertexBuffer(),s=this._quad.getIndexBuffer(),d=this._renderer.getContext();d.bindBuffer(d.ARRAY_BUFFER,l),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s);var p=n.getAttributeLocations();return d.vertexAttribPointer(p.a_position,2,d.FLOAT,!1,0,0),d.vertexAttribPointer(p.a_texCoord,2,d.FLOAT,!1,0,32),d.vertexAttribPointer(p.a_color,4,d.FLOAT,!1,0,64),this._renderer.updateTexture(a.getBaseTexture(),!1),1===t.length?(t[0].apply(this._renderer,a,i),this._renderTargets.push(a)):this._applyFilters(t,a,i),t},e.prototype._applyFilters=function(e,t,o){var r=this,a=t,i=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(i.getBaseTexture(),!1);var n=e[e.length-1];e.forEach(function(e){if(!(e===n)){e.apply(r._renderer,a,i);var t=a;a=i,i=t}else e.apply(r._renderer,a,o)}),this._renderTargets.push(a),this._renderTargets.push(i)},e.prototype._onContextChange=function(){this._renderTargets.length=0,this._renderer.isOfType(u.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new p.default(this._renderer))},e.prototype.dispose=function(){this._renderer.off('context',this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(function(e){e.dispose()})},e}();t.default=_},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(31),l=r(n),s=o(219),d=r(s),p={256:'ImageWidth',257:'ImageHeight',258:'BitsPerSample',259:'Compression',262:'PhotometricInterpretation',270:'ImageDescription',271:'Make',272:'Model',273:'StripOffsets',274:'Orientation',277:'SamplesPerPixel',278:'RowsPerStrip',279:'StripByteCounts',282:'XResolution',283:'YResolution',284:'PlanarConfiguration',296:'ResolutionUnit',301:'TransferFunction',305:'Software',306:'DateTime',315:'Artist',318:'WhitePoint',319:'PrimaryChromaticities',513:'JPEGInterchangeFormat',514:'JPEGInterchangeFormatLength',529:'YCbCrCoefficients',530:'YCbCrSubSampling',531:'YCbCrPositioning',532:'ReferenceBlackWhite',33432:'Copyright',34665:'ExifIFDPointer',34853:'GPSInfoIFDPointer',40965:'InteroperabilityIFDPointer'},u='data:image/jpeg;base64,',_=/^data:image\/jpeg;base64,/i,f=function(){function e(t){(0,i.default)(this,e),this._buf=t,this._stream=new d.default(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifBuffer=this._getExifBuffer(),this._exifStream=new d.default(this._exifBuffer),this._parseExif()}return e.prototype.restoreExifTags=function(e){var t=e.replace(u,''),o=l.default.decode(t),r=this._sliceIntoSegments(o),a=r[1][0],i=o.slice(0,a),n=o.slice(a),s=i.concat(this._exifBuffer);return s=s.concat(n),u+l.default.encode(s)},e.prototype.setOrientation=function(e){if(this._tagData.Orientation){var t=this._tagData.Orientation.entryOffset;this._exifStream.setHead(t+8),this._exifStream.writeInt16(e)}},e.isJPEG=function(e){return _.test(e)},e.fromBase64String=function(t){var o=t.replace(u,''),r=l.default.decode(o);return new e(r)},e.prototype._parseExif=function(){this._exifStream.setHead(0),this._exifStream.readInt16(),this._exifStream.readInt16();var e=this._exifStream.readString(4);if('Exif'===e){this._exifStream.readInt16();var t=this._exifStream.getHead(),o=!1,r=this._exifStream.readInt16();if(18761===r)o=!1;else if(19789===r)o=!0;else throw new Error('Invalid TIFF data: No endian type found');if(42!==this._exifStream.readInt16(!o))throw new Error('Invalid TIFF data: No 0x002A');var a=this._exifStream.readInt32(!o);if(8>a)throw new Error('Invalid TIFF data: First IFD offset < 8');var i=this._readTags(this._exifStream,t,t+a,o);this._tags=i.tags,this._tagData=i.tagData}},e.prototype._readTags=function(e,t,o,r){e.setHead(o);for(var a=e.readInt16(!r),n={},l=[],s=0,i;s<a;s++){i=o+12*s+2,e.setHead(i);var d=e.readInt16(!r),u=void 0,_=void 0,f=void 0;if(p[d]){d=p[d],u=e.readInt16(!r),_=e.readInt32(!r),f=e.readInt32(!r)+t;var c=null;switch(u){case 1:case 7:if(1===_)c=e.readInt8(!r);else{c=[];for(var g=0;g<_;g++)c.push(e.readInt8(!r))}break;case 2:e.setHead(4<_?f:i+8),c=e.readString(_);break;case 3:if(e.setHead(2<_?f:i+8),1===_)c=e.readInt16(!r);else{c=[];for(var y=0;y<_;y++)c.push(e.readInt16(!r))}break;case 4:case 9:if(e.setHead(1<_?f:i+8),1===_)c=e.readInt32(!r);else{c=[];for(var h=0;h<_;h++)c.push(e.readInt32(!r))}break;case 5:case 10:if(e.setHead(f),1===_){var m=e.readInt32(!r),x=e.readInt32(!r);c=m/x}else{c=[];for(var T=0;T<_;T++){var v=e.readInt32(!r),b=e.readInt32(!r);c.push(v/b)}}}n[d]=c,l[d]={value:c,numValues:_,entryOffset:i,valueOffset:f,type:u}}}return{tags:n,tagData:l}},e.prototype._getExifBuffer=function(){for(var e=this._segments,t=0;t<e.length;t++){var o=e[t][0],r=e[t][1];this._stream.setHead(o);var a=this._stream.peekInt16();if(65505===a)return this._buf.slice(o,r)}return!1},e.prototype._sliceIntoSegments=function(e){for(var t=new d.default(e),o=[],r;t.getHead()<e.length;)if(r=t.readInt16(),65496!==r){if(65498===r)break;if(65280<=r&&65535>=r){var a=t.readInt16(),i=t.getHead()+a-2;o.push([t.getHead()-4,i]),t.setHead(i)}else throw new Error('Invalid marker: 0x'+r.toString(16))}return this._stream.setHead(0),o},e.prototype.getTags=function(){return this._tags},e.prototype.getTagData=function(){return this._tagData},e.prototype.dispose=function(){this._buf=[],this._exifBuffer=[],this._segments=[]},e}();/*
    * Based on https://github.com/exif-js/exif-js by Jacob Seidelin
    * Licensed under MIT
    * @license
    */t.default=f},function(e,t,o){'use strict';var r=o(47),a=o(27),i=o(71),n=o(24),l=o(19),s=o(29),d=o(107),p=o(54),u=o(114),_=o(14)('iterator'),f=!([].keys&&'next'in[].keys()),c='keys',g='values',y=function(){return this};e.exports=function(e,t,o,h,m,x,T){d(o,t,h);var v=function(e){return!f&&e in O?O[e]:e===c?function(){return new o(this,e)}:e===g?function(){return new o(this,e)}:function(){return new o(this,e)}},b=t+' Iterator',C=m==g,R=!1,O=e.prototype,E=O[_]||O['@@iterator']||m&&O[m],S=E||v(m),F=m?C?v('entries'):S:void 0,M='Array'==t?O.entries||E:E,k,P,D;if(M&&(D=u(M.call(new e)),D!==Object.prototype&&(p(D,b,!0),!r&&!l(D,_)&&n(D,_,y))),C&&E&&E.name!==g&&(R=!0,S=function(){return E.call(this)}),(!r||T)&&(f||R||!O[_])&&n(O,_,S),s[t]=S,s[b]=y,m)if(k={values:C?S:v(g),keys:x?S:v(c),entries:F},T)for(P in k)P in O||i(O,P,k[P]);else a(a.P+a.F*(f||R),t,k);return k}},function(e,t,o){var r=o(106);e.exports=function(e,t,o){return(r(e),void 0===t)?e:1===o?function(o){return e.call(t,o)}:2===o?function(o,r){return e.call(t,o,r)}:3===o?function(o,r,a){return e.call(t,o,r,a)}:function(){return e.apply(t,arguments)}}},function(e,t,o){e.exports=!o(18)&&!o(35)(function(){return 7!=Object.defineProperty(o(70)('div'),'a',{get:function(){return 7}}).a})},function(e,t,o){var r=o(28),a=o(15).document,i=r(a)&&r(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},function(e,t,o){e.exports=o(24)},function(e,t,o){var r=o(19),a=o(20),n=o(110)(!1),i=o(51)('IE_PROTO');e.exports=function(e,t){var o=a(e),l=0,s=[],d;for(d in o)d!=i&&r(o,d)&&s.push(d);for(;t.length>l;)r(o,d=t[l++])&&(~n(s,d)||s.push(d));return s}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,o){var r=o(72),a=o(53).concat('length','prototype');t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},function(e,t,o){var r=o(58),a=o(36),i=o(20),n=o(48),l=o(19),s=o(69),d=Object.getOwnPropertyDescriptor;t.f=o(18)?d:function(e,t){if(e=i(e),t=n(t,!0),s)try{return d(e,t)}catch(t){}return l(e,t)?a(!r.f.call(e,t),e[t]):void 0}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.ColorMatrix=t.Matrix=t.Rectangle=t.Vector2=void 0;var a=o(21),i=r(a),n=o(78),l=r(n),s=o(79),d=r(s),p=o(59),u=r(p);t.Vector2=i.default,t.Rectangle=l.default,t.Matrix=d.default,t.ColorMatrix=u.default},function(e,t,o){e.exports={default:o(138),__esModule:!0}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(21),l=r(n),d=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;(0,i.default)(this,e),this.x=t,this.y=o,this.width=r,this.height=a}return e.prototype.set=function(e,t,o,r){return this.x=e,this.y=t,this.width=o,this.height=r,this},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.equals=function(t,o,r,a){if(t instanceof e)return t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height;return t===this.x&&o===this.y&&r===this.width&&a===this.height},e.prototype.round=function(){return this.x=s(this.x),this.y=s(this.y),this.width=s(this.width),this.height=s(this.height),this},e.prototype.getPosition=function(){return new l.default(this.x,this.y)},e.prototype.getSize=function(){return new l.default(this.width,this.height)},e.prototype.toString=function(){return'Rectangle({ x: '+this.x+', y: '+this.y+', width: '+this.width+', height: '+this.height+' })'},e}();t.default=d},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(40),l=r(n),s=o(21),d=r(s),p=function(){function e(){(0,i.default)(this,e),this.reset()}return e.prototype.multiply=function(e){var t,o,r,a,i,n;return t=this.a*e.a+this.b*e.c,o=this.a*e.b+this.b*e.d,r=this.c*e.a+this.d*e.c,a=this.c*e.b+this.d*e.d,i=this.tx*e.a+this.ty*e.c+e.tx,n=this.tx*e.b+this.ty*e.d+e.ty,this.a=t,this.b=o,this.c=r,this.d=a,this.tx=i,this.ty=n,this},e.prototype.applyToVector=function(e){var t=e,o=t.x,r=t.y;return e=e.clone(),e.x=this.a*o+this.c*r+this.tx,e.y=this.b*o+this.d*r+this.tx,e},e.prototype.applyInverseToVector=function(e){var t=1/(this.a*this.d+this.c*-this.b),o=e,r=o.x,a=o.y;return e=e.clone(),e.x=this.d*t*r+-this.c*t*a+(this.ty*this.c-this.tx*this.d)*t,e.y=this.a*t*a+-this.b*t*r+(-this.ty*this.a+this.tx*this.b)*t,e},e.prototype.rectangleToCoordinates=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new d.default(0,0),o=e.width*(1-t.x),r=e.width*-t.x,a=e.height*(1-t.y),i=e.height*-t.y,n=[];return n.push(new d.default(this.a*r+this.c*i+this.tx,this.d*i+this.b*r+this.ty)),n.push(new d.default(this.a*o+this.c*i+this.tx,this.d*i+this.b*o+this.ty)),n.push(new d.default(this.a*o+this.c*a+this.tx,this.d*a+this.b*o+this.ty)),n.push(new d.default(this.a*r+this.c*a+this.tx,this.d*a+this.b*r+this.ty)),n},e.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},e.prototype.toArray=function(){var e=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return'undefined'==typeof Float32Array?e:new Float32Array(e)},e.prototype.toString=function(){return'Matrix({ a: '+this.a+', b: '+this.b+', c: '+this.c+', d: '+this.d+', tx: '+this.tx+', ty: '+this.ty+' })'},(0,l.default)(e,null,[{key:'IDENTITY',get:function(){return new e}}]),e}();t.default=p},function(e,t,o){var r=o(50),a=o(14)('toStringTag'),i='Arguments'==r(function(){return arguments}()),n=function(e,t){try{return e[t]}catch(t){}};e.exports=function(e){var t,o,l;return e===void 0?'Undefined':null===e?'Null':'string'==typeof(o=n(t=Object(e),a))?o:i?r(t):'Object'==(l=r(t))&&'function'==typeof t.callee?'Arguments':l}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(82),i=r(a),n=o(22),l=r(n);t.default={checkFramebufferStatus:function(e,t){var o=t.checkFramebufferStatus(t.FRAMEBUFFER),r=(a={},(0,i.default)(a,t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,'Incomplete attachment'),(0,i.default)(a,t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,'Missing attachment'),(0,i.default)(a,t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,'Incomplete dimensions'),(0,i.default)(a,t.FRAMEBUFFER_UNSUPPORTED,'Framebuffer unsupported'),a),a;o!==t.FRAMEBUFFER_COMPLETE&&l.default.warn(e,'Framebuffer incomplete: '+r[o])}}},function(e,t,o){'use strict';t.__esModule=!0;var r=o(77),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t,o){return t in e?(0,a.default)(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),i=o(6),n='undefined'!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):o(84),l=function(){function e(t){var o=this;(0,a.default)(this,e),this._context=t,this._tracking=!1;var r=this,i=function(e){var a=t[e];'function'==typeof a?o[e]=function(){for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];var l=t[e];if(!r._tracking)return l.apply(t,a);var s=n(),d=l.apply(t,a),p=n()-s;return r._trackedCalls.push({functionName:e,arguments:a,duration:p}),d}:o._makePropertyWrapper(e)};for(var l in t)i(l)}return e.prototype._makePropertyWrapper=function(e){if(-1===['_context','_trackedCalls','_tracking'].indexOf(e)){var t=this._context;this.__defineGetter__(e,function(){return t[e]}),this.__defineSetter__(e,function(o){t[e]=o})}},e.prototype.startFrame=function(){this._tracking=!0,this._trackedCalls=[]},e.prototype.endFrame=function(){var e='Rendering';i.Log.log(e,'Frame rendering results:'),i.Log.log(e,'Context calls: '+this._trackedCalls.length);var t={};this._trackedCalls.forEach(function(e){var o=e.functionName,r=e.duration;t[o]=t[o]||{totalDuration:0,calls:0},t[o].totalDuration+=r,t[o].calls++});var o=[];for(var r in t){var a=t[r];a.averageDuration=a.totalDuration/a.calls,o.push({functionName:r,data:a})}o.sort(function(e,t){return t.data.totalDuration-e.data.totalDuration}),o=o.slice(0,3),o.forEach(function(t){i.Log.log(e,t.functionName+': '+t.data.calls+' calls, '+t.data.totalDuration.toFixed(2)+'ms')})},e}();t.default=l},function(e,t,o){(function(t){(function(){var o,r,a;'undefined'!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:'undefined'!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(o()-a)/1e6},r=t.hrtime,o=function(){var e;return e=r(),1e9*e[0]+e[1]},a=o()):Date.now?(e.exports=function(){return Date.now()-a},a=Date.now()):(e.exports=function(){return new Date().getTime()-a},a=new Date().getTime())}).call(this)}).call(t,o(60))},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(6),u=o(149),_=r(u),f=function(e){function t(o,r){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};(0,i.default)(this,t);var n=(0,l.default)(this,e.call(this));return n._options=_.default.defaults(a,{pixelRatio:1,transparent:!1,clearColor:p.Color.BLACK,debug:!1}),n.setMaxListeners(0),n._width=o||800,n._height=r||600,n._dimensions=new p.Vector2(n._width,n._height),n._maxTextureSize=null,n._pixelRatio=n._options.pixelRatio,n._clearColor=n._options.transparent?p.Color.TRANSPARENT:n._options.clearColor||p.Color.BLACK,n}return(0,d.default)(t,e),t.prototype.setCanvas=function(e){var t=this._canvas;this._canvas=e,t!==e&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new p.Vector2(this._width,this._height))},t.prototype.getCanvas=function(){return this._canvas},t.prototype._onBeforeContext=function(){},t.prototype.resizeTo=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;this._width=e.x*this._pixelRatio,this._height=e.y*this._pixelRatio,t&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width=this._width/this._pixelRatio+'px',this._canvas.style.height=this._height/this._pixelRatio+'px')),this._dimensions=e.clone()},t.prototype._createContext=function(){p.Log.warn(this.constructor.name,'`_createContext` is abstract and not implemented in inherited class')},t.prototype._setupContext=function(){p.Log.warn(this.constructor.name,'`_setupContext` is abstract and not implemented in inherited class')},t.prototype.render=function(){p.Log.warn(this.constructor.name,'`render` is abstract and not implemented in inherited class')},t.prototype.getMaxDimensions=function(){return null},t.prototype.getContext=function(){return this._context},t.prototype.getWidth=function(){return this._dimensions.x},t.prototype.getHeight=function(){return this._dimensions.y},t.prototype.getDimensions=function(){return this._dimensions},t.prototype.getPixelRatio=function(){return this._pixelRatio},t.prototype.setPixelRatio=function(e){this._pixelRatio=e,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(e)},t.prototype.getMaxTextureSize=function(){return this._maxTextureSize},t.prototype.getFilterManager=function(){return this._filterManager},t.prototype.setFilterManager=function(e){this._filterManager=e},t.isSupported=function(){return!0},t.prototype.isOfType=function(e){return this._type===e},t.prototype.dispose=function(){p.Log.warn(this.constructor.name,'`dispose` is abstract and not implemented in inherited class')},t}(p.EventEmitter);t.default=f},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(t){(0,a.default)(this,e),this._renderer=t,this._onContextChange=this._onContextChange.bind(this),this._renderer.on('context',this._onContextChange)}return e.prototype._onContextChange=function(){},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.dispose=function(){this._renderer.off('context',this._onContextChange),this._renderer=null},e}();t.default=i},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(t,o,r){(0,a.default)(this,e),this.width=t,this.height=o,this.data=r}return e.fromNodeCanvasImage=function(t){var o=new Canvas(t.width,t.height),r=o.getContext('2d');r.drawImage(t,0,0);var a=r.getImageData(0,0,t.width,t.height);return new e(t.width,t.height,a.data)},e}();t.default=i},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(6),u=o(64),_=r(u),f=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._children=[],n._filters=[],n}return(0,d.default)(t,e),t.prototype.addFilter=function(e){this._filters.push(e)},t.prototype.removeFilter=function(e){var t=this._filters.indexOf(e);return-1!==t&&(this._filters.splice(t,1),!0)},t.prototype.setFilters=function(e){this._filters=e},t.prototype.addChild=function(e){var t=e.getParent();null!==t&&t.removeChild(e),e.setParent(this),this._children.push(e)},t.prototype.prependChild=function(e){var t=e.getParent();null!==t&&t.removeChild(e),e.setParent(this),this._children.unshift(e)},t.prototype.hasChild=function(e){var t=this._children.indexOf(e);return-1!==t},t.prototype.removeChild=function(e){var t=this._children.indexOf(e);-1===t?p.Log.info(this.constructor.name,'Tried to remove a child that does not exist'):(this._children.splice(t,1),e.setParent(null))},t.prototype.clearChildren=function(){this._children=[]},t.prototype.renderWebGL=function(e){if(this._visible){var t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),e.getCurrentObjectRenderer().start(),this._renderWebGL(e),this._children.forEach(function(t){t.renderWebGL(e)}),e.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&t.popFilters(),e.getCurrentObjectRenderer().start()}},t.prototype._renderWebGL=function(){},t.prototype.renderCanvas=function(e){if(this._visible){var t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),this._renderCanvas(e),this._children.forEach(function(t){t.renderCanvas(e)}),this._filters&&this._filters.length&&t.popFilters()}},t.prototype._renderCanvas=function(){},t.prototype.updateTransform=function(){e.prototype.updateTransform.call(this),this._children.forEach(function(e){e.updateTransform()})},t.prototype.getLocalBounds=function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()},t.prototype.getBounds=function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()},t.prototype.getChildren=function(){return this._children},t.prototype.getFilters=function(){return this._filters},t.prototype.dispose=function(){},t}(_.default);t.default=f},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(6),u=o(32),_=r(u),f=o(155),c=r(f),g=function(e){function t(o,r){(0,i.default)(this,t);var a=(0,l.default)(this,e.call(this));if(!(o instanceof _.default))throw new Error('`baseTexture` should be an instance of BaseTexture');return a._uvs=new c.default,a._frame=r?r.clone():null,a._frameLocked=!!r,a._onBaseTextureLoaded=a._onBaseTextureLoaded.bind(a),a._onBaseTextureUpdated=a._onBaseTextureUpdated.bind(a),a._frame||(a._frame=new p.Rectangle(0,0,1,1)),a.setBaseTexture(o),a}return(0,d.default)(t,e),t.fromImage=function(e){var o=new _.default(e);return new t(o)},t.fromCanvas=function(e){var o=new _.default(e);return new t(o)},t.prototype._onBaseTextureLoaded=function(){if(!this._frameLocked){var e=this._baseTexture.getFrame().clone();this.setFrame(e)}this._baseTexture.on('update',this._onBaseTextureUpdated)},t.prototype._onBaseTextureUpdated=function(){var e=this._baseTexture.getFrame(),t=e.width,o=e.height;this._frame.width=t,this._frame.height=o,this.emit('update')},t.prototype._updateUVs=function(){this._uvs.update(this._frame,this._baseTexture.getFrame())},t.prototype.getBaseTexture=function(){return this._baseTexture},t.prototype.setBaseTexture=function(e){if(this._baseTexture=e,!this._baseTexture.isLoaded())this._baseTexture.once('loaded',this._onBaseTextureLoaded);else{var t=e.getFrame(),o=t.width,r=t.height;this._frameLocked||(this._frame=new p.Rectangle(0,0,o,r)),this._onBaseTextureLoaded()}},t.prototype.getFrame=function(){return this._frame},t.prototype.setFrame=function(e){this._frame=e,this._updateUVs()},t.prototype.getWidth=function(){return this._frame.width},t.prototype.getHeight=function(){return this._frame.height},t.prototype.getUVs=function(){return this._uvs},t.prototype.getDimensions=function(){return new p.Vector2(this._frame.width,this._frame.height)},t.prototype.dispose=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;e&&this._baseTexture.dispose()},t}(p.EventEmitter);t.default=g},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(182);Object.defineProperty(t,'FilterOperation',{enumerable:!0,get:function(){return r(a).default}});var i=o(185);Object.defineProperty(t,'TransformOperation',{enumerable:!0,get:function(){return r(i).default}});var n=o(187);Object.defineProperty(t,'OrientationOperation',{enumerable:!0,get:function(){return r(n).default}});var l=o(188);Object.defineProperty(t,'AdjustmentsOperation',{enumerable:!0,get:function(){return r(l).default}});var s=o(192);Object.defineProperty(t,'MirroredFocusOperation',{enumerable:!0,get:function(){return r(s).default}});var d=o(195);Object.defineProperty(t,'RadialFocusOperation',{enumerable:!0,get:function(){return r(d).default}});var p=o(198);Object.defineProperty(t,'LinearFocusOperation',{enumerable:!0,get:function(){return r(p).default}});var u=o(201);Object.defineProperty(t,'FrameOperation',{enumerable:!0,get:function(){return r(u).default}});var _=o(202);Object.defineProperty(t,'SpriteOperation',{enumerable:!0,get:function(){return r(_).default}});var f=o(210);Object.defineProperty(t,'WatermarkOperation',{enumerable:!0,get:function(){return r(f).default}});var c=o(211);Object.defineProperty(t,'ExifOrientationOperation',{enumerable:!0,get:function(){return r(c).default}});var g=o(212);Object.defineProperty(t,'SelectiveBlurOperation',{enumerable:!0,get:function(){return r(g).default}});var y=o(216);Object.defineProperty(t,'BlurOperation',{enumerable:!0,get:function(){return r(y).default}});var h=o(217);Object.defineProperty(t,'OverlayOperation',{enumerable:!0,get:function(){return r(h).default}})},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),i=o(3),n='undefined'!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):o(84),l=function(){function e(t,o){(0,a.default)(this,e),this._tag=t,this._name=o,this._start=n()}return e.prototype.stop=function(){var e=n(),t=e-this._start,o=s(1e3/t);i.Log.info(this._tag,this._name+' took '+t.toFixed(2)+'ms ('+o+' FPS)')},e}();t.default=l},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(4),_=r(u),f=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(e,t,o){return p.Promise.resolve(o)},t}(_.default);f.isIdentity=!0,f.identifier='identity',t.default=f},function(t,o,r){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,'__esModule',{value:!0});var i=r(0),n=a(i),l=r(1),s=a(l),d=r(2),p=a(d),_=r(3),f=_.Constants.UniformType,c=_.Constants.OptionType,g=1e-7,y=function(t){function o(){(0,n.default)(this,o);var e=(0,s.default)(this,t.call(this));return e._fragmentSource=r(189),e}return(0,p.default)(o,t),o.prototype._applyCanvas=function(t,o,r){for(var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n=o.getCanvas(),l=o.getContext(),s=r.getContext(),d=l.getImageData(0,0,n.width,n.height),p=this._options,f=p.colorMatrix,c=p.gamma,y=p.shadows,h=p.highlights,m=new _.Color(0,0,0,0),x=0,i;x<n.width*n.height;x++){if(i=4*x,m.r=d.data[i]/255,m.g=d.data[i+1]/255,m.b=d.data[i+2]/255,1!==c&&(m.r=e(m.r,1/u(c,g)),m.g=e(m.g,1/u(c,g)),m.b=e(m.b,1/u(c,g))),0!==y||0!==h){var T=0.2125*m.r+0.7154*m.g+0.0721*m.b,v=0<=y?_.Utils.clamp(e(T,1/(y+1))+-0.76*e(T,2/(y+1))-T,0,u(y,1)):-_.Utils.clamp(e(T,1/(-y+1))+-0.76*e(T,2/(-y+1))-T,0,u(-y,1)),b=0>h?_.Utils.clamp(1-e(1-T,1/(1-h))- -0.8*e(1-T,2/(1-h))-T,-1,0):-_.Utils.clamp(1-e(1-T,1/(1+h))- -0.8*e(1-T,2/(1+h))-T,-1,0),C=v*T*T,R=v-C,O=T+C+b;m.r=_.Utils.clamp(O*((m.r+R)/u(T,g)),0,1),m.g=_.Utils.clamp(O*((m.g+R)/u(T,g)),0,1),m.b=_.Utils.clamp(O*((m.b+R)/u(T,g)),0,1)}m=f.apply(m),d.data[i]=255*m.r,d.data[i+1]=255*m.g,d.data[i+2]=255*m.b}s.putImageData(d,0,0)},o}(_.Engine.Filter);y.prototype.availableOptions={gamma:{type:c.NUMBER,default:1,uniformType:f.FLOAT},shadows:{type:c.NUMBER,default:0,uniformType:f.FLOAT},highlights:{type:c.NUMBER,default:1,uniformType:f.FLOAT},colorMatrix:{type:c.COLOR_MATRIX,default:new _.ColorMatrix,uniformType:f.MAT4},colorOffset:{type:c.ARRAY,default:[],uniformType:f.FLOAT4}},o.default=y},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(207),_=r(u),f=o(43),c=r(f),g=o(95),y=r(g),h=o(209),m=r(h),x=p.Constants.OptionType,T=p.Constants.RendererType,v=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._persistedPaths=[],n._outputCanvasDirty=!0,n._outputCanvas=p.Utils.createCanvas(),n._outputContext=n._outputCanvas.getContext('2d'),n._persistCanvas=p.Utils.createCanvas(),n._persistContext=n._persistCanvas.getContext('2d'),n._nextCanvas=p.Utils.createCanvas(),n._texture=p.Engine.Texture.fromCanvas(n._outputCanvas),n._sprite.setTexture(n._texture),n._onPathUpdate=n._onPathUpdate.bind(n),n}return(0,d.default)(t,e),t.prototype.applyFlip=function(e){this._options.paths.forEach(function(t){t.forEachControlPoint(function(t){var o=t.getPosition().clone();'horizontal'===e?o.x=1-o.x:'vertical'===e?o.y=1-o.y:void 0,t.setPosition(o)}),t.setDirty(!0)}),this._reset()},t.prototype.applyRotation=function(e){this._options.paths.forEach(function(t){t.forEachControlPoint(function(t){var o=t.getPosition().clone();90===e?(o.flip(),o.x=1-o.x):-90===e&&(o.flip(),o.y=1-o.y),t.setPosition(o)}),t.setDirty(!0)}),this._reset()},t.prototype.applyTransform=function(e){var t=null;this._options.paths.forEach(function(o){o.forEachControlPoint(function(t){t.setPosition(e.applyToRelativePoint(t.getPosition()))});var r=o.getBrush();r!==t&&(r.setSize(e.applyToRelativeSize(r.getSize())),t=r),o.setDirty(!0)}),this._reset()},t.prototype.clearCanvas=function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var e=this._outputCanvas,t=e.width,o=e.height;this._outputContext.clearRect(0,0,t,o)}},t.prototype.clearPersistCanvas=function(){if(this._persistCanvas){var e=this._persistCanvas,t=e.width,o=e.height;this._persistContext.clearRect(0,0,t,o)}},t.prototype.serializeOptions=function(t){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=e.prototype.serializeOptions.call(this,t,o);return t||(r.type='brush'),r},t.prototype.serializeOption=function(t){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return'paths'===t?this._options.paths.map(function(e){return e.serializeOptions(void 0,o)}):e.prototype.serializeOption.call(this,t,o)},t.prototype.createPath=function(e){var t=new _.default(this._operation,{brush:e},this._nextCanvas);return t.on('update',this._onPathUpdate),this._options.paths.push(t),this.setDirty(!0),t},t.prototype._onPathUpdate=function(){this._operation.setDirty(!0),this.setDirty(!0)},t.prototype._onPathPersist=function(e){e.renderToCanvas(this._persistCanvas),this._nextCanvas=e.getCanvas();var t=this._nextCanvas.getContext('2d');t.clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(e)},t.prototype._getTexture=function(){return this._texture},t.prototype.setDirtyForRenderer=function(t,o){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];e.prototype.setDirtyForRenderer.call(this,t,o,r),t&&r&&(this._persistedPaths=[],this._options.paths.forEach(function(e){e.setDirty(!0)}))},t.prototype.setDirty=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];for(var o in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[o],t)},t.prototype.render=function(e){var t=this,o=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(o)&&(p.Utils.ensureCanvasDimensions(this._outputCanvas,e),p.Utils.ensureCanvasDimensions(this._persistCanvas,e),this._options.paths.forEach(function(o){o.render(e),o.getClosed()&&-1===t._persistedPaths.indexOf(o)&&t._onPathPersist(o)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(function(e){e.getClosed()||e.renderToCanvas(t._outputCanvas)}),this.setDirtyForRenderer(!1,o))},t.prototype.update=function(t,o){o&&(p.Utils.ensureCanvasDimensions(this._outputCanvas,o),p.Utils.ensureCanvasDimensions(this._persistCanvas,o),this._texture.getBaseTexture().update()),this.render(o);var r=t.getRenderer();r.isOfType(T.WEBGL)&&r.updateTexture(this._texture.getBaseTexture()),e.prototype.update.call(this,t,o)},t.prototype._reset=function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()},t.prototype.getCanvas=function(){return this._outputCanvas},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._texture.getBaseTexture().dispose()},t}(c.default);v.prototype.availableOptions={id:{type:x.STRING,default:function(){return p.Utils.getUUID()}},position:{type:x.VECTOR2,default:new p.Vector2(0,0)},scale:{type:x.VECTOR2,default:new p.Vector2(1,1)},anchor:{type:x.VECTOR2,default:new p.Vector2(0,0)},pivot:{type:x.VECTOR2,default:new p.Vector2(0,0)},rotation:{type:x.NUMBER,default:0},paths:{type:x.ARRAY,default:[],setter:function(e){var t=this;return e=e.map(function(e){if(e instanceof _.default)return e;var o=e.brush,r=e.closed,a=new _.default(t._operation,{brush:o,closed:r},t._nextCanvas);return e.controlPoints.forEach(function(e){a.addControlPoint(e)}),a}),this._reset(),e}}},v.type='brush',v.Brush=y.default,v.Path=_.default,v.Brushes={RadialBrush:m.default},t.default=v},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),s=r(n),d=o(2),p=r(d),u=o(3),_=o(16),f=r(_),c=u.Constants.OptionType,g=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,s.default)(this,e.call.apply(e,[this].concat(r)));return n._lastOptions={},n._lastInputDimensions=new u.Vector2(0,0),n._brush=null,n}return(0,p.default)(t,e),t.prototype.getBrushImage=function(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;var t=this._options,o=t.image,r=t.size;o.width=o.height=l(r*e.min());var a=u.Utils.createCanvas();a.width=o.width,a.height=o.height;var i=a.getContext('2d');i.drawImage(o,0,0,a.width,a.height);var n=this._tintImageData(i.getImageData(0,0,a.width,a.height),a.width,a.height);return i.putImageData(n,0,0),this._lastOptions=this.serializeOptions(['size','color']),this._brush=a,this._lastInputDimensions=e.clone(),a},t.prototype._tintImageData=function(e){for(var t=this._options.color,o=0;o<e.data.length;o+=4)e.data[o]+=(255*t.r-e.data[o])*t.a,e.data[o+1]+=(255*t.g-e.data[o+1])*t.a,e.data[o+2]+=(255*t.b-e.data[o+2])*t.a;return e},t.prototype.clone=function(){var e=this.constructor;return new e(this._options)},t}(f.default);t.default=g,g.prototype.availableOptions={identifier:{type:c.STRING},image:{type:c.IMAGE},size:{type:c.NUMBER,default:0.05},color:{type:c.COLOR,default:u.Color.RED}}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(34),_=r(u),f=p.Constants.OptionType,c=p.Constants.UniformType,g=function(e){function t(){(0,i.default)(this,t);for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];var s=(0,l.default)(this,e.call.apply(e,[this].concat(a)));return s._fragmentSource=o(213),s._lastBlurRadius=null,s._lastDimensions=new p.Vector2(0,0),s._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),s}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getDimensions(),i=!this._lastDimensions.equals(a);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),o.setPixelRatio(t.getPixelRatio()),o.resizeTo(t.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius);var n=o.getContext();n.drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(a)},t.prototype._blurImage=function(e){var t=e.getCanvas(),o=e.getContext(),r=new p.Vector2(t.width,t.height),a=o.getImageData(0,0,t.width,t.height);_.default.stackBlurCanvasRGBA(a,0,0,t.width,t.height,this._options.blurRadius*r.min());var i=this._blurredRenderTarget.getContext();i.putImageData(a,0,0)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._blurredRenderTarget.dispose()},t}(p.Engine.Filter);g.prototype.availableOptions={blurRadius:{type:f.NUMBER,default:30,uniformType:c.FLOAT},delta:{type:f.VECTOR2,default:new p.Vector2(1,1),uniformType:c.FLOAT2},texSize:{type:f.VECTOR2,default:new p.Vector2(100,100),uniformType:c.FLOAT2}},t.default=g},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(7),_=r(u),f=o(30),c=r(f),g=function(e){function t(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._onOperationUpdate=r._onOperationUpdate.bind(r),r._cacheEnabled=!0,r._stack=o,r._stack.forEach(function(e){e.on('update',r._onOperationUpdate)}),r}return(0,d.default)(t,e),t.prototype.clear=function(){var e=this;this.forEach(function(t){return e.remove(t)}),this._stack=[]},t.prototype._onOperationUpdate=function(e,t){this.emit(p.Constants.Events.OPERATION_UPDATED,e,t)},t.prototype.enableCache=function(){this._cacheEnabled=!0},t.prototype.disableCache=function(){this._cacheEnabled=!1},t.prototype.forEach=function(e){return this._stack.filter(function(e){return!!e}).forEach(e)},t.prototype.render=function(e,t){var o=this,r=this._stack.filter(function(e){return!!e}).filter(function(e){return e.getEnabled()});r.reverse();var a=r.filter(function(t){return!t.isDirtyForRenderer(e.getRenderer())})[0],i=r.indexOf(a);r.reverse();var n=0;-1!==i&&(n=r.length-i-1);for(var l=0;l<n;l++)p.Log.info(this.constructor.name,'Skipping '+r[l].constructor.name);for(var s=_.default.resolve(t),d=function(e){var t=r[e],a,i;s=s.then(function(e){return t.render(e).then(function(e){return a&&e!==a&&!o._cacheEnabled&&i.disposeRenderTextures(),a=e,i=t,e})})},u=n;u<r.length;u++)d(u);return s},t.prototype.validateSettings=function(){return _.default.all(this._stack.filter(function(e){return!!e}).map(function(e){return e.validateSettings()}))},t.prototype.setAllToDirty=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.forEach(function(t){return t.setDirty(!0,e)})},t.prototype.updateDirtinessForRenderer=function(e){for(var t=!1,o=0,r;o<this._stack.length;o++)r=this._stack[o],r&&(r.isDirtyForRenderer(e)&&(t=!0),t&&r.setDirtyForRenderer(!0,e))},t.prototype.push=function(e){this._stack.push(e),e.on('update',this._onOperationUpdate)},t.prototype.unshift=function(e){this._stack.unshift(e),e.on('update',this._onOperationUpdate)},t.prototype.clone=function(){return new t(this._stack.slice(0))},t.prototype.get=function(e){return this._stack[e]},t.prototype.set=function(e,t){this._stack[e]&&(this._stack[e].off('update',this._onOperationUpdate),this._stack[e].dispose()),this._stack[e]=t,t.on('update',this._onOperationUpdate)},t.prototype.remove=function(e){var t=this._stack.indexOf(e);-1===t||(this._stack[t]&&(this._stack[t].off('update',this._onOperationUpdate),this._stack[t].dispose()),this._stack.splice(t,1))},t.prototype.removeAt=function(e){this._stack[e]&&(this._stack[e].off('update',this._onOperationUpdate),this._stack[e].dispose()),delete this._stack[e]},t.prototype.getStack=function(){return this._stack},t.prototype.dispose=function(){this.forEach(function(e){e.dispose()})},t}(c.default);t.default=g},function(e){e.exports={name:'photoeditorsdk',version:'4.1.2',description:'The most comprehensive photo editor SDK for HTML5',repository:'http://github.com/imgly/pesdk-html5',author:'PhotoEditor SDK <contact@photoeditorsdk.com>',license:'SEE LICENSE IN LICENSE.md',scripts:{"render-filter-previews":'node scripts/run render-filter-previews',"prerender-desktop-css":'node scripts/run render-desktop-ui-css',"release:public":'cross-env ENV=production PESDK_LINT=true PESDK_PUBLIC=true npm run release && rm -rf build/examples/shared',"release:private":'cross-env ENV=production PESDK_LINT=true npm run release && rm -rf build/examples/shared',"release:test":'cross-env ENV=test PESDK_CLEAN=true PESDK_FULL_BUILD=true webpack && npm run prerender-desktop-css',"release:dev":'cross-env ENV=development npm run release',build:'cross-env PESDK_CLEAN=true PESDK_FULL_BUILD=true webpack',watch:'cross-env PESDK_CLEAN=true PESDK_FULL_BUILD=true PESDK_SERVE=true webpack --watch',rebuild:'cross-env PESDK_COPY_PUBLIC=true webpack',release:'cross-env PESDK_CLEAN=true PESDK_FULL_BUILD=true PESDK_RELEASE=true webpack && cross-env PESDK_MINIFY=true PESDK_RELEASE=true webpack && npm run prerender-desktop-css && rimraf build/examples/qa-* && rimraf build/examples/ci-* && rimraf build/**/dev.*',test:'cross-env ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk test/ui',"test:react-ui":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/react-ui/support/helpers test/shared/run-server.js "test/react-ui/*.test.js" "test/react-ui/**/*.test.js"',"test:desktop-ui":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/desktop-ui/support/helpers test/shared/run-server.js "test/desktop-ui/*.test.js" "test/desktop-ui/**/*.test.js"',"test:webgl":'cross-env RENDERER=webgl ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk',jsdoc:'jsdoc -c config/jsdoc.json -r'},devDependencies:{ajv:'^5.0.0',"babel-core":'^6.23.1',"babel-loader":'^7.1.2',"babel-minify-webpack-plugin":'^0.2.0',"babel-plugin-external-helpers":'^6.22.0',"babel-plugin-transform-adonis-hash":'^0.4.0',"babel-plugin-transform-class-properties":'^6.19.0',"babel-plugin-transform-es2015-classes":'^6.6.4',"babel-plugin-transform-object-rest-spread":'^6.20.2',"babel-plugin-transform-proto-to-assign":'^6.23.0',"babel-plugin-transform-runtime":'^6.6.0',"babel-preset-es2015":'^6.6.0',"babel-preset-minify":'^0.2.0',"babel-preset-react":'^6.5.0',"babel-register":'^6.6.0',"babel-runtime":'^6.6.1',chai:'^3.4.0',"chai-as-promised":'^5.1.0',chromedriver:'^2.23.1',classnames:'^2.1.3',"clean-webpack-plugin":'^0.1.16',"compass-mixins":'^0.12.8',"copy-webpack-plugin":'^4.0.1',"cross-env":'^5.0.5',"css-loader":'^0.28.7',del:'^2.0.0',djv:'^1.1.0',"extract-text-webpack-plugin":'^3.0.0',inquirer:'^0.11.4',"inquirer-path":'^1.0.0-alpha5',"jaguarjs-jsdoc":'git://github.com/imgly/jaguarjs-jsdoc.git#master',jsdoc:'^3.5.3',"json-loader":'^0.5.2',mocha:'^3.2.0',nightwatch:'git://github.com/saschagehlich/nightwatch.git#feature/file-upload-and-multiple-selectors',"node-static":'^0.7.10',"performance-now":'^0.2.0',"preprocess-loader":'^0.2.2',"pretty-error":'^2.0.0',prompt:'^1.0.0',"prop-types":'^15.4.2',"raw-loader":'^0.5.1',react:'^15.4.2',"react-dom":'^15.4.2',rembrandt:'^0.1.0',rimraf:'^2.6.2',"sass-loader":'^6.0.6',"selenium-server-standalone-jar":'3.4.0',should:'^4.3.0',sinon:'^1.17.3',"sinon-chai":'^2.8.0',"standard-loader":'^6.0.1',"stats.js":'^0.16.0',"style-loader":'^0.13.1',"term-img2":'^2.0.1',"transform-loader":'^0.2.2',"uglifyjs-webpack-plugin":'^0.4.6',"vinyl-source-stream":'0.1.1',webpack:'^3.5.6',"webpack-notifier":'^1.2.1'},standard:{globals:['describe','context','before','beforeEach','after','afterEach','it','expect'],parser:'babel-eslint'},dependencies:{adonis:'git://github.com/imgly/adonis.git#feature/v1.0',"babel-eslint":'^7.1.1',"babel-plugin-external-helpers":'^6.22.0',canvas:'^2.0.0-alpha.5',gl:'^4.0.3',"node-sass":'^4.5.3',request:'^2.79.0'}}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(11),u=r(p),_=o(9),f=r(_),c=o(10),g=function(e){function t(){(0,i.default)(this,t);for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];var s=(0,l.default)(this,e.call.apply(e,[this].concat(a)));return s._fragmentSource=o(239),s}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){for(var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n=t.getCanvas(),l=t.getContext(),s=o.getContext(),d=l.getImageData(0,0,n.width,n.height),p=this._options.lookupTableData,u=0;u<n.width*n.height;u++){var i=4*u,_=d.data[i];d.data[i]=p[4*_];var r=d.data[i+1];d.data[i+1]=p[1+4*r];var f=d.data[i+2];d.data[i+2]=p[2+4*f]}s.putImageData(d,0,0)},t}(u.default.Filter);g.prototype.availableOptions={lookupTable:{type:c.OptionType.NUMBER,default:1,uniformType:c.UniformType.INT},lookupTableData:{type:c.OptionType.ARRAY,default:[]}};var y=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new g({lookupTable:n._options.textureGLUnit}),n._textures={},n._renderers={},n}return(0,d.default)(t,e),t.prototype.update=function(e){var t=e.getRenderer();t.isOfType(c.RendererType.WEBGL)?this._updateWebGLTexture(e):t.isOfType(c.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)},t.prototype._updateWebGLTexture=function(e){if('undefined'==typeof this._options.data)throw new Error('LookupTable: No data specified.');var t=new Uint8Array(this._options.data),o=e.getRenderer(),r=o.id;this._renderers[r]=o,this._textures[r]||(this._textures[r]=new u.default.BaseTexture);var a=this._textures[r],i=new u.default.PixelArrayImage(256,1,t);a.setSource(i),a.setGLUnit(this._options.textureGLUnit),o.isOfType(c.RendererType.WEBGL)&&o.updateTexture(a)},t.prototype.dispose=function(){for(var t in e.prototype.dispose.call(this),this._textures)this._textures[t].dispose(),delete this._textures[t];delete this._options.data},t}(f.default);t.default=y},function(e,t,o){'use strict';e.exports=o(101).default},function(e,t,o){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var i=o(102),n=a(i),l=o(76),s=r(l),d=o(90),p=r(d),u=o(221),_=r(u),f=o(5),c=r(f),g=o(11),y=a(g),h=o(12),m=a(h),x=o(4),T=a(x),v=o(8),b=a(v),C=o(30),R=a(C),O=o(26),E=a(O),S=o(97),F=a(S),M=o(66),k=a(M),P=o(7),D=a(P),B=o(16),I=a(B),w=o(22),L=a(w),A=o(10),N=o(31),U=a(N);n.default.version=o(98).version,n.default.Math=s,n.default.Operations=p,n.default.Filters=_,n.default.FilterPrimitives=c,n.default.Engine=y.default,n.default.Color=m.default,n.default.Filter=T.default,n.default.Operation=b.default,n.default.EventEmitter=R.default,n.default.Utils=E.default,n.default.OperationsStack=F.default,n.default.EXIF=k.default,n.default.Promise=D.default,n.default.Configurable=I.default,n.default.Log=L.default,n.default.RenderType=A.RenderType,n.default.ImageFormat=A.ImageFormat,n.default.OptionType=A.OptionType,n.default.RendererType=A.RendererType,n.default.Base64=U.default,t.default=n.default},function(e,t,o){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var i=o(0),n=a(i),l=o(1),s=a(l),d=o(2),u=a(d),_=o(3),f=r(_),c=o(90),g=r(c),y=o(97),h=a(y),m=o(218),x=a(m),T=o(66),v=a(T),b=o(220),C=a(b),R=o(91),O=a(R),E=f.Rectangle,S=f.Constants,F=f.Engine,M=f.Utils,k=f.EventEmitter,P=f.Vector2,D=f.Log,B=f.Base64,I=function(e){return M.byteArrayToString(B.decode(e))},w=S.RenderType,L=S.ImageFormat,A=S.Events,N=S.RendererType,U=function(e){function t(r){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,n.default)(this,t);var i=(0,s.default)(this,e.call(this));i._onOperationUpdate=i._onOperationUpdate.bind(i),i._onContextRestored=i._onContextRestored.bind(i);var l=o(98),d=l.version;if(i.version=d,i[I('VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=')]=!0,i._preferredRenderer=r,i._options=M.defaults(a,{extensions:{},renderMode:'dynamic',versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,logLevel:'warn',pixelRatio:'undefined'!=typeof window&&window.devicePixelRatio||1}),i._options.smoothUpscaling&&(F.BaseTexture.DefaultMagFilter=F.BaseTexture.LinearFilter),i._options.extensions=M.defaults(i._options.extensions,{operations:[],controls:[],languages:[]}),D.setLevel(i._options.logLevel),!i._v())return(0,s.default)(i);var p=f[I('TGljZW5zZUNoZWNrZXI=')];i._l=new p(i[I('X29wdGlvbnM=')][I('bGljZW5zZQ==')]),i._ct(),i._cv(!0),i._defaultRenderMode=i._options.renderMode,i._renderMode=i._options.renderMode,i._textureQuality=i._options.textureQuality,i._offset=new P,i._zoom=i._options.zoom,i._spriteScale=i._options.spriteScale,i._rotation=i._options.rotation,i._operations={},i._operationsStack=null,i.setOperationsStack(new h.default),i._container=new F.Container,i._sprite=new F.Sprite,i._container.addChild(i._sprite),i._inputBaseTexture=null,i._inputTexture=i._options.inputTexture,i._currentInputTexture=null,i._currentTexture=null,i._resizedTexture=null,i._resizedContainer=new F.Container,i._resizedSprite=new F.Sprite,i._resizedContainer.addChild(i._resizedSprite),i.setSmoothDownscaling(i._options.smoothDownscaling),i._checkForUpdates(),i._registerOperations(),i._initRenderer();var u=i._renderer.constructor.type;return i._options.displayWelcomeMessage&&D.log('Version:',i.version+' ('+u+') - https://www.photoeditorsdk.com'),i._options.image&&i.setImage(i._options.image),i}return(0,u.default)(t,e),t.prototype._v=function(){return!!this[I('X29wdGlvbnM=')][I('bGljZW5zZQ==')]||(D.error(I('TGljZW5zaW5n'),I('Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=')),D.error(I('TGljZW5zaW5n'),I('SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==')),!1)},t.prototype._ct=function(){if(this._l.exp()){var e=this._l.isExp();e?D.error(I('TGljZW5zaW5n'),I('WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=')):D.warn(I('TGljZW5zaW5n'),I('WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu').replace('%d',this._l.dl()))}},t.prototype._cv=function(){var t=this,o=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._l.c().catch(function(r){throw t[I('VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=')]=!1,o&&('ELICEXP'===r.code?D.error(I('TGljZW5zaW5n'),I('WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=')):'ELICINVHOST'===r.code?D.error(I('TGljZW5zaW5n'),I('VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGhvc3RuYW1lIA==')+window.location.hostname+'.'):(D.error(I('TGljZW5zaW5n'),I('SW52YWxpZCBsaWNlbnNlLg==')),D.error(I('TGljZW5zaW5n'),I('SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==')))),new Error(I('SW52YWxpZCBsaWNlbnNlLg=='))})},t.prototype._t=function(){this._l.t()},t.prototype._onOperationUpdate=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];this.emit.apply(this,[A.OPERATION_UPDATED].concat(t))},t.prototype._onContextRestored=function(){D.warn(this.constructor.name,'Trying to re-render after WebGL context has been restored.'),this.setAllOperationsToDirty(),this._operationsStack.forEach(function(e){e.disposeRenderTextures()}),this.render()},t.prototype.export=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:w.DATAURL,t=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:L.PNG,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0.8;return this._cv().then(function(){t._t();var a=new C.default(t,{renderType:e,imageFormat:o,quality:r});return a.export()})},t.prototype.render=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;if(!this._inputTexture)throw new Error('You need to set an image before calling PhotoEditorSDK#render.');var o=this._renderer.getContext();o.startFrame&&o.startFrame();var r;D.canLog('info')&&(r=new O.default('\u26A1\u26A1\u26A1','Frame rendering')),D.info('\u26A1\u26A1\u26A1','Rendering starts');var a=this._operationsStack;return a.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(function(t){'export'===e._renderMode&&(t=e._inputTexture),e._currentTexture=t,e._sprite.setTexture(t),e._container.updateTransform()}).then(function(){return a.validateSettings()}).then(function(){return a.render(e,e._currentTexture)}).then(function(o){switch(e._currentTexture=o,e._sprite.setTexture(e._currentTexture),e._renderMode){case'dynamic':var r=e._renderer.getDimensions().clone().divide(2).add(e._offset);e._container.setScale(e._zoom/e.getTextureScale(),e._zoom/e.getTextureScale()),e._container.setPosition(r),e._sprite.setAnchor(0.5,0.5),e._sprite.setScale(e._spriteScale,e._spriteScale),e._sprite.setRotation(e._rotation);break;case'export':e._container.setScale(1,1),e._container.setPosition(0,0),e._sprite.setAnchor(0,0),e._sprite.setPosition(0,0),e._sprite.setScale(e._spriteScale,e._spriteScale),e._sprite.setRotation(0);}return t&&e._renderer.render(e._container),o}).then(function(e){return r&&r.stop(),o.endFrame&&o.endFrame(),e})},t.prototype.getTextureScale=function(){return p(1,this._textureQuality*this._options.pixelRatio)},t.prototype._prepareTexture=function(){var e=this;return new Promise(function(t){var o=e.getTextureScale();if(1===e._textureQuality)return t(e._inputTexture);var r=e.getInputDimensions().multiply(o).floor(),a;e._resizedTexture?!e._resizedTexture.getDimensions().equals(r)&&(e._resizedTexture.resizeTo(r),a=!0):(e._resizedTexture=new F.RenderTexture(e._renderer,r.x,r.y),a=!0),a&&(e._resizedSprite.setScale(o,o),e._resizedSprite.setTexture(e._inputTexture),e._resizedTexture.render(e._resizedContainer)),t(e._resizedTexture)})},t.prototype._registerOperations=function(){for(var e in this._operations={},g){var t=g[e];this._operations[t.identifier]=t}this._operations=M.extend(this._operations,this._options.extensions.operations)},t.prototype.setAllOperationsToDirty=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(e)},t.prototype.createOperation=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,r=this._operations[e];if(!r)throw new Error('No operation with identifier `'+e+'` found.');var a=new r(this,t);return o&&this.addOperation(a),a},t.prototype.addOperation=function(e){this._operationsStack.push(e)},t.prototype.removeOperation=function(e){this._operationsStack.remove(e)},t.prototype.getInputDimensions=function(){var e=this._inputTexture.getFrame();return new P(e.width,e.height)},t.prototype.getFinalDimensions=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.getInputDimensions(),o=this._operationsStack;return o.forEach(function(e){e.getEnabled()&&(t=e.getNewDimensions(t))}),e&&t.multiply(this._spriteScale),t.floor()},t.prototype.getOutputDimensions=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(e).clone().multiply(this._zoom).floor()},t.prototype.getOutputTextureDimensions=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.getTextureScale(),o=this.getInputDimensions().multiply(t).floor();return this._operationsStack.forEach(function(e){o=e.getNewDimensions(o)}),o},t.prototype._checkForUpdates=function(){this._l.isENT()||(this._versionChecker=new x.default(this.version))},t.prototype._initRenderer=function(){var e={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent},t,o;if('dynamic'===this._renderMode&&this._options.canvas){var r=this._options.canvas;t=r.width,o=r.height}else if(this._inputTexture){var a=this.getFinalDimensions();t=a.x,o=a.y}else t=1,o=1;switch(this._preferredRenderer){case N.WEBGL:this._renderer=F.autoDetectRenderer(t,o,e),this._renderer.on('context-restored',this._onContextRestored);break;case N.CANVAS:this._renderer=new F.CanvasRenderer(t,o,e),this._renderer.on('context-restored',this._onContextRestored);break;default:D.warn('PhotoEditorSDK','PhotoEditorSDK Error: Renderer `'+this._preferredRenderer+'` not supported. Falling back to automatically detected renderer.'),this._renderer=F.autoDetectRenderer(t,o,e);}},t.prototype.resizeTo=function(e){this._renderer.resizeTo(e,!0)},t.prototype.reset=function(){this._operationsStack.clear()},t.prototype.parseExif=function(e){if(e){var t=e.src;if(v.default.isJPEG(t)){var o=null;try{o=v.default.fromBase64String(t)}catch(t){}return o?o:void 0}}},t.prototype._handleExifOrientation=function(){var e=this._exif.getTags();if(e&&e.Orientation){var t=1!==e.Orientation&&2!==e.Orientation,o=-1!==[2,4,5,7].indexOf(e.Orientation);(t||o)&&(!this._exifOperation&&(this._exifOperation=this.createOperation('exif-orientation')),this._exifOperation.setTags(e),this._exif.setOrientation(1))}},t.prototype.hasImage=function(){return null!==this._image&&'undefined'!=typeof this._image},t.prototype.getImage=function(){return this._image},t.prototype.setImage=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=e,this._image=e,this._exif=t||this.parseExif(e),this._exif&&this._handleExifOrientation();var r=new F.BaseTexture(this._image),a=new E(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);o&&(a.width=o.x,a.height=o.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this._inputTexture.getBaseTexture().dispose(),this._inputTexture=new F.Texture(r,a),this._currentTexture=this._inputTexture,this._sprite.setTexture(this._inputTexture),this.setAllOperationsToDirty(!0)},t.prototype.setInputTexture=function(e){this._inputTexture=e},t.prototype.getCanvas=function(){return this._renderer.getCanvas()},t.prototype.setCanvas=function(e){this._renderer.setCanvas(e)},t.prototype.getSprite=function(){return this._sprite},t.prototype.getContainer=function(){return this._container},t.prototype.getOperationsStack=function(){return this._operationsStack},t.prototype.setOperationsStack=function(e){this._operationsStack&&this._operationsStack.off(A.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=e,this._operationsStack.on(A.OPERATION_UPDATED,this._onOperationUpdate)},t.prototype.getOperations=function(){return this._operations},t.prototype.getRenderer=function(){return this._renderer},t.prototype.getOffset=function(){return this._offset},t.prototype.setOffset=function(e,t){e instanceof P?this._offset.copy(e):this._offset.set(e,t)},t.prototype.getRenderMode=function(){return this._renderMode},t.prototype.setRenderMode=function(e){this._renderMode=e},t.prototype.getZoom=function(){return this._zoom},t.prototype.setZoom=function(e){this._zoom=e,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()},t.prototype.getTextureQuality=function(){return'export'===this._renderMode?1:this._textureQuality},t.prototype.setTextureQuality=function(e){e!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=p(1,e),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)},t.prototype.getSpriteScale=function(){return this._spriteScale},t.prototype.setSpriteScale=function(e){this._spriteScale=e,this._sprite.setScale(e,e),this._sprite.updateTransform()},t.prototype.getPixelRatio=function(){return this._options.pixelRatio},t.prototype.getExif=function(){return this._exif},t.prototype.getOptions=function(){return this._options},t.prototype.getInputTexture=function(){return this._inputTexture},t.prototype.setSmoothDownscaling=function(e){this._options.smoothDownscaling=e,this._sprite.setSmoothDownscaling(e),this._resizedSprite.setSmoothDownscaling(e)},t.prototype.setRotation=function(e){this._rotation=e},t.prototype.getRotation=function(){return this._rotation},t.prototype.dispose=function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()},t}(k);/*
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 * @license
 */t.default=U},function(e,t,o){e.exports={default:o(104),__esModule:!0}},function(e,t,o){o(44),o(55),e.exports=o(56).f('iterator')},function(e,t,o){var r=o(45),n=o(46);e.exports=function(e){return function(t,o){var d=n(t)+'',s=r(o),i=d.length,l,a;return 0>s||s>=i?e?'':void 0:(l=d.charCodeAt(s),55296>l||56319<l||s+1===i||56320>(a=d.charCodeAt(s+1))||57343<a?e?d.charAt(s):l:e?d.slice(s,s+2):(l-55296<<10)+(a-56320)+65536)}}},function(e){e.exports=function(e){if('function'!=typeof e)throw TypeError(e+' is not a function!');return e}},function(e,t,o){'use strict';var r=o(49),a=o(36),i=o(54),n={};o(24)(n,o(14)('iterator'),function(){return this}),e.exports=function(e,t,o){e.prototype=r(n,{next:a(1,o)}),i(e,t+' Iterator')}},function(e,t,o){var r=o(17),a=o(25),n=o(37);e.exports=o(18)?Object.defineProperties:function(e,t){a(e);for(var o=n(t),l=o.length,s=0,i;l>s;)r.f(e,i=o[s++],t[i]);return e}},function(e,t,o){var r=o(50);e.exports=Object('z').propertyIsEnumerable(0)?Object:function(e){return'String'==r(e)?e.split(''):Object(e)}},function(e,t,o){var r=o(20),a=o(111),i=o(112);e.exports=function(e){return function(t,o,n){var l=r(t),s=a(l.length),d=i(n,s),p;if(e&&o!=o){for(;s>d;)if(p=l[d++],p!=p)return!0;}else for(;s>d;d++)if((e||d in l)&&l[d]===o)return e||d||0;return!e&&-1}}},function(e,t,o){var r=o(45);e.exports=function(e){return 0<e?p(r(e),9007199254740991):0}},function(e,t,o){var r=o(45);e.exports=function(e,t){return e=r(e),0>e?u(e+t,0):p(e,t)}},function(e,t,o){e.exports=o(15).document&&document.documentElement},function(e,t,o){var r=o(19),a=o(115),i=o(51)('IE_PROTO'),n=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),r(e,i)?e[i]:'function'==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?n:null}},function(e,t,o){var r=o(46);e.exports=function(e){return Object(r(e))}},function(e,t,o){'use strict';var r=o(117),a=o(118),i=o(29),n=o(20);e.exports=o(67)(Array,'Array',function(e,t){this._t=n(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,o=this._i++;return!e||o>=e.length?(this._t=void 0,a(1)):'keys'==t?a(0,o):'values'==t?a(0,e[o]):a(0,[o,e[o]])},'values'),i.Arguments=i.Array,r('keys'),r('values'),r('entries')},function(e){e.exports=function(){}},function(e){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,o){e.exports={default:o(120),__esModule:!0}},function(e,t,o){o(121),o(127),o(128),o(129),e.exports=o(13).Symbol},function(e,t,o){'use strict';var r=o(15),a=o(19),n=o(18),l=o(27),s=o(71),d=o(122).KEY,p=o(35),u=o(52),_=o(54),f=o(38),c=o(14),g=o(56),y=o(57),h=o(123),m=o(124),x=o(125),T=o(25),v=o(20),b=o(48),C=o(36),R=o(49),O=o(126),E=o(75),S=o(17),F=o(37),M=E.f,k=S.f,P=O.f,D=r.Symbol,B=r.JSON,I=B&&B.stringify,w='prototype',L=c('_hidden'),A=c('toPrimitive'),N={}.propertyIsEnumerable,U=u('symbol-registry'),G=u('symbols'),z=u('op-symbols'),V=Object[w],j='function'==typeof D,W=r.QObject,H=!W||!W[w]||!W[w].findChild,q=n&&p(function(){return 7!=R(k({},'a',{get:function(){return k(this,'a',{value:7}).a}})).a})?function(e,t,o){var r=M(V,t);r&&delete V[t],k(e,t,o),r&&e!==V&&k(V,t,r)}:k,Y=function(e){var t=G[e]=R(D[w]);return t._k=e,t},X=j&&'symbol'==typeof D.iterator?function(e){return'symbol'==typeof e}:function(e){return e instanceof D},Z=function(e,t,o){return e===V&&Z(z,t,o),T(e),t=b(t,!0),T(o),a(G,t)?(o.enumerable?(a(e,L)&&e[L][t]&&(e[L][t]=!1),o=R(o,{enumerable:C(0,!1)})):(!a(e,L)&&k(e,L,C(1,{})),e[L][t]=!0),q(e,t,o)):k(e,t,o)},J=function(e,t){T(e);for(var o=m(t=v(t)),r=0,a=o.length,i;a>r;)Z(e,i=o[r++],t[i]);return e},K=function(e){var t=N.call(this,e=b(e,!0));return this===V&&a(G,e)&&!a(z,e)?!1:t||!a(this,e)||!a(G,e)||a(this,L)&&this[L][e]?t:!0},Q=function(e,t){if(e=v(e),t=b(t,!0),e!==V||!a(G,t)||a(z,t)){var o=M(e,t);return o&&a(G,t)&&!(a(e,L)&&e[L][t])&&(o.enumerable=!0),o}},$=function(e){for(var t=P(v(e)),o=[],r=0,i;t.length>r;)a(G,i=t[r++])||i==L||i==d||o.push(i);return o},ee=function(e){for(var t=e===V,o=P(t?z:v(e)),r=[],n=0,i;o.length>n;)a(G,i=o[n++])&&(!t||a(V,i))&&r.push(G[i]);return r};j||(D=function(){if(this instanceof D)throw TypeError('Symbol is not a constructor!');var e=f(0<arguments.length?arguments[0]:void 0),t=function(o){this===V&&t.call(z,o),a(this,L)&&a(this[L],e)&&(this[L][e]=!1),q(this,e,C(1,o))};return n&&H&&q(V,e,{configurable:!0,set:t}),Y(e)},s(D[w],'toString',function(){return this._k}),E.f=Q,S.f=Z,o(74).f=O.f=$,o(58).f=K,o(73).f=ee,n&&!o(47)&&s(V,'propertyIsEnumerable',K,!0),g.f=function(e){return Y(c(e))}),l(l.G+l.W+l.F*!j,{Symbol:D});for(var te=['hasInstance','isConcatSpreadable','iterator','match','replace','search','species','split','toPrimitive','toStringTag','unscopables'],oe=0;te.length>oe;)c(te[oe++]);for(var te=F(c.store),oe=0;te.length>oe;)y(te[oe++]);l(l.S+l.F*!j,'Symbol',{for:function(e){return a(U,e+='')?U[e]:U[e]=D(e)},keyFor:function(e){if(X(e))return h(U,e);throw TypeError(e+' is not a symbol!')},useSetter:function(){H=!0},useSimple:function(){H=!1}}),l(l.S+l.F*!j,'Object',{create:function(e,t){return t===void 0?R(e):J(R(e),t)},defineProperty:Z,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:ee}),B&&l(l.S+l.F*(!j||p(function(){var e=D();return'[null]'!=I([e])||'{}'!=I({a:e})||'{}'!=I(Object(e))})),'JSON',{stringify:function(e){if(!(void 0===e||X(e))){for(var t=[e],o=1,r,a;arguments.length>o;)t.push(arguments[o++]);return r=t[1],'function'==typeof r&&(a=r),(a||!x(r))&&(r=function(e,t){if(a&&(t=a.call(this,e,t)),!X(t))return t}),t[1]=r,I.apply(B,t)}}}),D[w][A]||o(24)(D[w],A,D[w].valueOf),_(D,'Symbol'),_(Math,'Math',!0),_(r.JSON,'JSON',!0)},function(e,t,o){var r=o(38)('meta'),a=o(28),i=o(19),n=o(17).f,l=0,s=Object.isExtensible||function(){return!0},d=!o(35)(function(){return s(Object.preventExtensions({}))}),p=function(e){n(e,r,{value:{i:'O'+ ++l,w:{}}})},u=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!a(e))return'symbol'==typeof e?e:('string'==typeof e?'S':'P')+e;if(!i(e,r)){if(!s(e))return'F';if(!t)return'E';p(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!s(e))return!0;if(!t)return!1;p(e)}return e[r].w},onFreeze:function(e){return d&&u.NEED&&s(e)&&!i(e,r)&&p(e),e}}},function(e,t,o){var r=o(37),a=o(20);e.exports=function(e,t){for(var o=a(e),i=r(o),n=i.length,l=0,s;n>l;)if(o[s=i[l++]]===t)return s}},function(e,t,o){var r=o(37),a=o(73),n=o(58);e.exports=function(e){var t=r(e),o=a.f;if(o)for(var l=o(e),s=n.f,d=0,i;l.length>d;)s.call(e,i=l[d++])&&t.push(i);return t}},function(e,t,o){var r=o(50);e.exports=Array.isArray||function(e){return'Array'==r(e)}},function(e,t,o){var r=o(20),a=o(74).f,i={}.toString,n='object'==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return a(e)}catch(t){return n.slice()}};e.exports.f=function(e){return n&&'[object Window]'==i.call(e)?l(e):a(r(e))}},function(){},function(e,t,o){o(57)('asyncIterator')},function(e,t,o){o(57)('observable')},function(e,t,o){e.exports={default:o(131),__esModule:!0}},function(e,t,o){o(132),e.exports=o(13).Object.setPrototypeOf},function(e,t,o){var r=o(27);r(r.S,'Object',{setPrototypeOf:o(133).set})},function(e,t,o){var r=o(28),a=o(25),i=function(e,t){if(a(e),!r(t)&&null!==t)throw TypeError(t+': can\'t set as prototype!')};e.exports={set:Object.setPrototypeOf||('__proto__'in{}?function(e,t,r){try{r=o(68)(Function.call,o(75).f(Object.prototype,'__proto__').set,2),r(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,o){return i(e,o),t?e.__proto__=o:r(e,o),e}}({},!1):void 0),check:i}},function(e,t,o){e.exports={default:o(135),__esModule:!0}},function(e,t,o){o(136);var r=o(13).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,o){var r=o(27);r(r.S,'Object',{create:o(49)})},function(e,t,o){'use strict';(function(e){Object.defineProperty(t,'__esModule',{value:!0});/*
 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
 * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
 * requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel
 * MIT license
 * @license
 */for(var o='undefined'==typeof window?e:window,r=o.requestAnimationFrame,a=o.cancelAnimationFrame,i=0,n=['ms','moz','webkit','o'],l=0;l<n.length&&!r;++l)t.requestAnimationFrame=r=o[n[l]+'RequestAnimationFrame'],t.cancelAnimationFrame=a=o[n[l]+'CancelAnimationFrame']||o[n[l]+'CancelRequestAnimationFrame'];r||(t.requestAnimationFrame=r=function(e){var t=new Date().getTime(),o=u(0,16-(t-i)),r=setTimeout(function(){e(t+o)},o);return i=t+o,r}),a||(t.cancelAnimationFrame=a=function(e){clearTimeout(e)}),t.requestAnimationFrame=r,t.cancelAnimationFrame=a}).call(t,o(39))},function(e,t,o){o(139);var r=o(13).Object;e.exports=function(e,t,o){return r.defineProperty(e,t,o)}},function(e,t,o){var r=o(27);r(r.S+r.F*!o(18),'Object',{defineProperty:o(17).f})},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=o(141),n=r(a),i=o(144),l=r(i);t.default=function(){function e(e,t){var o=[],r=!0,a=!1,i;try{for(var n=(0,l.default)(e),s;!(r=(s=n.next()).done)&&(o.push(s.value),!(t&&o.length===t));r=!0);}catch(e){a=!0,i=e}finally{try{!r&&n['return']&&n['return']()}finally{if(a)throw i}}return o}return function(t,o){if(Array.isArray(t))return t;if((0,n.default)(Object(t)))return e(t,o);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}()},function(e,t,o){e.exports={default:o(142),__esModule:!0}},function(e,t,o){o(55),o(44),e.exports=o(143)},function(e,t,o){var r=o(80),a=o(14)('iterator'),i=o(29);e.exports=o(13).isIterable=function(e){var t=Object(e);return t[a]!==void 0||'@@iterator'in t||i.hasOwnProperty(r(t))}},function(e,t,o){e.exports={default:o(145),__esModule:!0}},function(e,t,o){o(55),o(44),e.exports=o(146)},function(e,t,o){var r=o(25),a=o(147);e.exports=o(13).getIterator=function(e){var t=a(e);if('function'!=typeof t)throw TypeError(e+' is not iterable!');return r(t.call(e))}},function(e,t,o){var r=o(80),a=o(14)('iterator'),i=o(29);e.exports=o(13).getIteratorMethod=function(e){if(e!=void 0)return e[a]||e['@@iterator']||i[r(e)]}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(6),u=o(83),_=r(u),f=o(85),c=r(f),g=o(41),y=r(g),h=o(61),m=r(h),x=p.Constants.RendererType,T=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._type=x.CANVAS,n.setCanvas(n._options.canvas||n._createCanvas()),n}return(0,d.default)(t,e),t.prototype._createCanvas=function(){return p.Utils.createCanvas()},t.prototype._createContext=function(){var e=this._canvas,o=e.getContext('2d');return this._options.debug&&(o=new _.default(o)),this.id=o.id=t.contextId++,this._context=o,o.renderer=this,this.emit('context',o),o},t.prototype._setupContext=function(){var e=this._context;'imageSmoothingEnabled'in e?e.imageSmoothingEnabled=!0:['moz','webkit','ms'].forEach(function(t){e[t]&&(e[t]=!0)}),this._defaultRenderTarget=new y.default(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new m.default(this)},t.prototype.render=function(e){var t=this._renderTarget.getContext(),o=e.getParent();e.setParent(this._fakeObject),e.updateTransform(),e.setParent(o),t.setTransform(1,0,0,1,0,0),t.globalAlpha=1;var r=this._canvas,a=r.width,i=r.height;t.clearRect(0,0,a,i),0!==this._clearColor.a&&(t.save(),t.fillStyle=this._clearColor.toRGBA(),t.fillRect(0,0,a,i),t.restore()),this.renderDisplayObject(e,this._renderTarget)},t.prototype.renderDisplayObject=function(e,t){var o=this._renderTarget;this._filterManager.setFilterStack(t.getFilterStack()),this.setRenderTarget(t),e.renderCanvas(this),this.setRenderTarget(o)},t.prototype.getCurrentRenderTarget=function(){return this._renderTarget},t.prototype.setRenderTarget=function(e){this._renderTarget=e},t.prototype.getContext=function(){return this._renderTarget.getContext()},t.prototype.dispose=function(){this._filterManager.dispose()},t}(c.default);T.contextId=0,T.type='Canvas2D',t.default=T},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});t.default={defaults:function(e){for(var t=arguments.length,o=Array(1<t?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];var a={};for(var n in e)a[n]=e[n];for(var l=0,i;l<o.length;l++)for(var s in i=o[l],i)'undefined'==typeof a[s]&&(a[s]=i[s]);return a},extend:function(e){for(var t=arguments.length,o=Array(1<t?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];var a={};for(var n in e)a[n]=e[n];for(var l=0,i;l<o.length;l++)for(var s in i=o[l],i)a[s]=i[s];return a}}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(6),u=o(85),_=r(u),f=o(42),c=r(f),g=o(86),y=r(g),h=o(151),m=r(h),x=o(62),T=r(x),v=o(64),b=r(v),C=o(65),R=r(C),O=o(83),E=r(O),S=o(87),F=r(S),M=p.Constants.RendererType,k=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._type=M.WEBGL,n._textures=[],n._fakeObject=new b.default,n._onContextLost=n._onContextLost.bind(n),n._onContextRestored=n._onContextRestored.bind(n),n.setCanvas(n._options.canvas||p.Utils.createCanvas()),n.shaders=n._initShaders(),n.renderers=n._initRenderers(),n}return(0,d.default)(t,e),t.prototype._onContextLost=function(t){t.preventDefault(),p.Log.warn(this.constructor.name,'WebGL context has been lost - trying to restore.')},t.prototype._onContextCreationError=function(t){t.preventDefault(),p.Log.warn(this.constructor.name,'Failed to create WebGL context: '+(t.statusMessage||'Unknown error'))},t.prototype._onContextRestored=function(){var e=this;p.Log.warn(this.constructor.name,'WebGL context has been restored. Clearing all textures.'),this._textures.forEach(function(t){t.disposeGLTexturesForRenderer(e)}),this._createContext(),this._setupContext(),this.emit('context-restored')},t.prototype._onBeforeContext=function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new R.default(this),this._currentObjectRenderer=new y.default(this)},t.prototype.setShader=function(e){this._currentShader=e,this._context.useProgram(e.getProgram()),this._setAttributesForShader(e)},t.prototype.setCanvas=function(t){this._canvas&&this._removeContextEventListeners(),e.prototype.setCanvas.call(this,t),this._canvas.addEventListener&&this._addContextEventListeners()},t.prototype._addContextEventListeners=function(){this._canvas.addEventListener('webglcontextlost',this._onContextLost),this._canvas.addEventListener('webglcontextrestored',this._onContextRestored),this._canvas.addEventListener('webglcontextcreationerror',this._onContextCreationError)},t.prototype._removeContextEventListeners=function(){this._canvas.removeEventListener('webglcontextlost',this._onContextLost),this._canvas.removeEventListener('webglcontextrestored',this._onContextRestored),this._canvas.removeEventListener('webglcontextcreationerror',this._onContextCreationError)},t.prototype._setAttributesForShader=function(e){var t=this._context,o=e.getAttributes(),r=e.getAttributeLocations();o.forEach(function(e){var o=r[e];t.enableVertexAttribArray(o)})},t.prototype._initShaders=function(){return{default:new T.default(this)}},t.prototype._initRenderers=function(){return{sprite:new m.default(this)}},t.prototype._createContext=function(){var e=this._canvas,o=null,r={preserveDrawingBuffer:!0};if(o=e.getContext('webgl',r)||e.getContext('experimental-webgl',r),'undefined'!=typeof window&&window.WebGLDebugUtils&&this._options.debug){var a=function(e,t){console.error('gl.'+e+'('+window.WebGLDebugUtils.glFunctionArgsToString(e,t)+')')};o=window.WebGLDebugUtils.makeDebugContext(o,null,a)}return this._options.debug&&(o=new E.default(o)),this.id=o.id=t.contextId++,this._context=o,o.renderer=this,this._maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.emit('context',o),o},t.prototype._setupContext=function(){var e=this._context;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new c.default(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()},t.prototype._getMaxPrecision=function(){var e=this._context,t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);this._maxFloatPrecision=0===t.precision?'mediump':'highp';var o=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT);this._maxIntPrecision=0===o.rangeMax?'lowp':'highp'},t.prototype.resizeTo=function(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;e.prototype.resizeTo.call(this,t,o),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(t)},t.prototype.setRenderTarget=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=e,this._currentRenderTarget.activate()},t.prototype.setObjectRenderer=function(e){this._currentObjectRenderer.stop(),this._currentObjectRenderer=e,this._currentObjectRenderer.start()},t.prototype.render=function(e){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var t=e.getParent();e.setParent(this._fakeObject),e.updateTransform(),e.setParent(t),this.renderDisplayObject(e,this._defaultRenderTarget)},t.prototype.renderDisplayObject=function(e,t){this.setRenderTarget(t),this._filterManager.setFilterStack(t.getFilterStack()),e.renderWebGL(this),this._currentObjectRenderer.flush()},t.prototype.clear=function(){var e=this._context;e.clearColor.apply(e,this._clearColor.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)},t.prototype.save=function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}},t.prototype.restore=function(e){this.setRenderTarget(e.renderTarget),this._filterManager.setFilterStack(e.filterStack),this._currentObjectRenderer=e.objectRenderer},t.prototype.getOrCreateGLTexture=function(e){var t=this._context,o=e.getGLTextureForRenderer(this);return o||(o=t.createTexture(),e.setGLTextureForRenderer(o,this),this._textures.push(e)),o},t.prototype.updateTexture=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,o=e.getSource(),r=this._context,a=e.getGLUnit(),i=this.getOrCreateGLTexture(e);r.activeTexture(r.TEXTURE0+a),r.bindTexture(r.TEXTURE_2D,i),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t&&!!o&&(o instanceof F.default?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,o.width,o.height,0,r.RGBA,r.UNSIGNED_BYTE,o.data):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,o)),e.isMipMappingEnabled()?r.generateMipmap(r.TEXTURE_2D):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e.getGLRepeat(r,'x')),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e.getGLRepeat(r,'y'))),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,e.getGLFilter(r,'min')),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e.getGLFilter(r,'mag')),r.activeTexture(r.TEXTURE0)},t.prototype.getMaxDimensions=function(){var e=p.Utils.createCanvas(),t=e.getContext('webgl')||e.getContext('experimental-webgl');if(!t)return null;var o=t.getParameter(t.MAX_TEXTURE_SIZE),r=t.getExtension('WEBGL_lose_context');return r&&r.loseContext(),o},t.prototype.getCurrentRenderTarget=function(){return this._currentRenderTarget},t.prototype.getCurrentObjectRenderer=function(){return this._currentObjectRenderer},t.isSupported=function(){var e=p.Utils.createCanvas();e.addEventListener('webglcontextcreationerror',this.prototype._onContextCreationError);var t=e.getContext('webgl')||e.getContext('experimental-webgl');return e.removeEventListener('webglcontextcreationerror',this.prototype._onContextCreationError),!!t},t.prototype.getMaxFloatPrecision=function(){return this._maxFloatPrecision},t.prototype.getMaxIntPrecision=function(){return this._maxIntPrecision},t.prototype.dispose=function(){var e=this;for(var t in this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this._textures.forEach(function(t){t.disposeGLTexturesForRenderer(e)}),this.shaders)this.shaders[t].dispose(),delete this.shaders[t];this._removeContextEventListeners();var o=this._context,r=o.getExtension('WEBGL_lose_context');r&&r.loseContext()},t}(_.default);k.contextId=0,k.type='WebGL',t.default=k},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),n=r(a),i=o(1),l=r(i),s=o(2),d=r(s),p=o(6),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(p),_=o(86),f=r(_),c=function(e){function t(){(0,n.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var s=(0,l.default)(this,e.call.apply(e,[this].concat(r)));s._maxBatchSize=u.BATCH_SIZE,s._vertices=new ArrayBuffer(4*u.BATCH_SIZE*u.VERTEX_BYTE_SIZE),s._positions=new Float32Array(s._vertices),s._colors=new Uint32Array(s._vertices),s._indices=new Uint16Array(6*u.BATCH_SIZE);for(var d=0,i=0;d<6*u.BATCH_SIZE;d+=6,i+=4)s._indices[d+0]=i+0,s._indices[d+1]=i+1,s._indices[d+2]=i+2,s._indices[d+3]=i+0,s._indices[d+4]=i+2,s._indices[d+5]=i+3;return s._shaders=[],s._sprites=[],s._currentBatchSize=0,s._currentBaseTexture=null,s._onContextChange(),s}return(0,d.default)(t,e),t.prototype.render=function(e){var t=e.getTexture(),o=t.getFrame(),r=t.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&(this.flush(),this._currentBaseTexture=r);var a=t.getUVs();if(a){var i=this._currentBatchSize*u.VERTEX_BYTE_SIZE;this._addVertexCoordinates(e,i,o),this._addTextureUVs(e,i,a),this._addColors(e,i),this._sprites[this._currentBatchSize]=e,this._currentBatchSize++}},t.prototype._addColors=function(e,t){var o=this._colors,r=e.getTint(),a=(r>>16)+(65280&r)+((255&r)<<16)+(255*e.getWorldAlpha()<<24);o[t+4]=o[t+9]=o[t+14]=o[t+19]=a},t.prototype._addTextureUVs=function(e,t,o){var r=this._positions,a=o.getUVsAt(0);r[t+2]=a.x,r[t+3]=a.y,a=o.getUVsAt(1),r[t+7]=a.x,r[t+8]=a.y,a=o.getUVsAt(2),r[t+12]=a.x,r[t+13]=a.y,a=o.getUVsAt(3),r[t+17]=a.x,r[t+18]=a.y},t.prototype._addVertexCoordinates=function(e,t,o){for(var r=this._positions,a=e.getWorldTransform(),n=e.getAnchor(),l=a.rectangleToCoordinates(o,n),s=5,d=0;4>d;d++)r[t+d*s]=l[d].x,r[t+d*s+1]=l[d].y},t.prototype._onContextChange=function(){var e=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this._vertices,e.DYNAMIC_DRAW)},t.prototype.start=function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)},t.prototype.flush=function(){var e=this._renderer,t=e.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>0.5*u.BATCH_SIZE)t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices);else{var o=this._positions.subarray(0,this._currentBatchSize*u.VERTEX_BYTE_SIZE);t.bufferSubData(t.ARRAY_BUFFER,0,o)}for(var r=0,a=null,n=null,l=null,s=null,d=!1,p=!1,_=null,f=0,c=0,i=this._currentBatchSize;c<i;c++){if(_=this._sprites[c],n=_.getTexture().getBaseTexture(),s=_.getShader()||this._shader,d=l!==s,p=a!==n,(p||d)&&(this._renderBatch(a,r,f),f=c,r=0,a=n,d)){l=s,e.setShader(l);var g=e.getCurrentRenderTarget(),y=g.getProjectionMatrix().toArray();l.setUniform('u_projMatrix',y),l.syncUniforms(),t.activeTexture(t.TEXTURE0)}r++}this._renderBatch(a,r,f),this._currentBatchSize=0,this._sprites=[]}},t.prototype._renderBatch=function(e,t,o){if(0!==t){var r=this._renderer,a=r.getContext(),i=e.getGLTextureForRenderer(r);i||(i=r.getOrCreateGLTexture(e)),e.isDirty()&&(r.updateTexture(e),e.setDirty(!1)),a.activeTexture(a.TEXTURE0+e.getGLUnit()),a.bindTexture(a.TEXTURE_2D,i);a.drawElements(a.TRIANGLES,6*t,a.UNSIGNED_SHORT,2*(6*o))}},t.prototype.dispose=function(){var t=this._renderer,o=t.getContext();o.deleteBuffer(this._vertexBuffer),o.deleteBuffer(this._indexBuffer),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,e.prototype.dispose.call(this)},t}(f.default);t.default=c},function(e){e.exports='attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n'},function(e){e.exports='uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n'},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(t){(0,a.default)(this,e),this._renderer=t,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}return e.prototype.map=function(e,t){var o=t.x,r=t.y;this._uvs[2]=t.width/e.width,this._uvs[4]=this._uvs[2],this._uvs[5]=t.height/e.height,this._uvs[7]=this._uvs[5],this._vertices[0]=o,this._vertices[1]=r,this._vertices[2]=o+t.width,this._vertices[3]=r,this._vertices[4]=this._vertices[2],this._vertices[5]=r+t.height,this._vertices[6]=o,this._vertices[7]=this._vertices[5],this._uploadBuffers()},e.prototype._initBuffers=function(){var e=this._context;this._vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,128,e.DYNAMIC_DRAW),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW)},e.prototype._uploadBuffers=function(){var e=this._context;e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices),e.bufferSubData(e.ARRAY_BUFFER,32,this._uvs),e.bufferSubData(e.ARRAY_BUFFER,64,this._colors)},e.prototype.getVertexBuffer=function(){return this._vertexBuffer},e.prototype.getIndexBuffer=function(){return this._indexBuffer},e.prototype.dispose=function(){var e=this._context;e.deleteBuffer(this._vertexBuffer),e.deleteBuffer(this._indexBuffer)},e}();t.default=i},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),i=o(6),n=function(){function e(){(0,a.default)(this,e),this._uvs=[new i.Vector2(0,0),new i.Vector2(1,0),new i.Vector2(1,1),new i.Vector2(0,1)]}return e.prototype.update=function(e,t){var o=this._uvs[0];o.x=e.x/t.width,o.y=e.y/t.height,o=this._uvs[1],o.x=(e.x+e.width)/t.width,o.y=e.y/t.height,o=this._uvs[2],o.x=(e.x+e.width)/t.width,o.y=(e.y+e.height)/t.height,o=this._uvs[3],o.x=e.x/t.width,o.y=(e.y+e.height)/t.height},e.prototype.getUVsAt=function(e){return this._uvs[e]},e.prototype.getUVs=function(){return this._uvs},e}();t.default=n},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(6),u=o(89),_=r(u),f=o(32),c=r(f),g=o(42),y=r(g),h=o(41),m=r(h),x=o(65),T=r(x),v=o(61),b=r(v),C=p.Constants.RendererType,R=function(e){function t(o){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;(0,i.default)(this,t);var s=(0,l.default)(this,e.call(this,new c.default,new p.Rectangle(0,0,r,a)));return s._loaded=!0,s._width=r,s._height=a,s._pixelRatio=n,s._renderer=o,s._setupFilterManager(),s._setupBuffer(),s.setBaseTexture(s._renderTarget.getBaseTexture()),s._updateUVs(),s}return(0,d.default)(t,e),t.prototype._setupFilterManager=function(){this._renderer.isOfType(C.WEBGL)?this._filterManager=new T.default(this._renderer):this._renderer.isOfType(C.CANVAS)&&(this._filterManager=new b.default(this._renderer)),this._filterManager.resizeTo(new p.Vector2(this._width,this._height))},t.prototype._setupBuffer=function(){this._renderer.isOfType(C.WEBGL)?this._setupWebGLRenderTarget():this._renderer.isOfType(C.CANVAS)&&this._setupCanvasRenderTarget()},t.prototype._setupWebGLRenderTarget=function(){this._renderTarget=new y.default(this._renderer,this._width,this._height,this._pixelRatio)},t.prototype._setupCanvasRenderTarget=function(){this._renderTarget=new m.default(this._width,this._height,this._pixelRatio)},t.prototype.clear=function(e){this._renderTarget.clear(e)},t.prototype.resizeTo=function(e){this._width===e.x&&this._height===e.y||(this._width=e.x,this._height=e.y,this._frame.width=e.x,this._frame.height=e.y,this._renderTarget.resizeTo(e),this._filterManager.resizeTo(e))},t.prototype.render=function(e){if(this._renderer.isOfType(C.WEBGL))this._renderWebGL(e);else if(this._renderer.isOfType(C.CANVAS))this._renderCanvas(e);else throw new Error('RenderTexture does not support rendering via '+this._renderer.constructor.name)},t.prototype._renderWebGL=function(e){this._renderTarget.activate(),e.getWorldTransform().reset(),e.getChildren().forEach(function(e){e.updateTransform()});var t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)},t.prototype._renderCanvas=function(e){e.getWorldTransform().reset(),e.getChildren().forEach(function(e){e.updateTransform()});var t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)},t.prototype.getRenderTarget=function(){return this._renderTarget},t.prototype.dispose=function(){this._renderTarget.dispose(),this._filterManager.dispose()},t}(_.default);t.default=R},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),n=r(a),l=o(1),s=r(l),d=o(2),_=r(d),f=o(6),c=o(88),g=r(c),y=o(158),h=r(y),m=function(e){function t(o){(0,n.default)(this,t);var r=(0,s.default)(this,e.call(this));return r._onTextureUpdate=r._onTextureUpdate.bind(r),r._texture=o,r._shader=null,r._width=0,r._height=0,r._anchor=new f.Vector2(0,0),r.setTexture(o),r}return(0,_.default)(t,e),t.prototype._onTextureUpdate=function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype._renderWebGL=function(e){var t=e.save();this._smoothDownscaling&&(!this._potRenderer&&(this._potRenderer=new h.default),this._potRenderer.render(e,this,this._texture)),e.restore(t),e.setObjectRenderer(e.renderers.sprite),e.renderers.sprite.render(this)},t.prototype._renderCanvas=function(e){var t=this._worldTransform,o=this._texture.getFrame(),r=o.width,a=o.height,i=e.getCurrentRenderTarget().getPixelRatio(),n=0|this._anchor.x*-r,l=0|this._anchor.y*-a,s=e.getContext();s.setTransform(t.a,t.b,t.c,t.d,t.tx*i,t.ty*i),s.globalAlpha=this.getWorldAlpha();var d=this._texture.getBaseTexture(),p=d.getPixelRatio(),u=d.getSource();s.drawImage(this._texture.getBaseTexture().getSource(),0,0,(u.naturalWidth||r)*p,(u.naturalHeight||a)*p,n*i,l*i,r*i,a*i)},t.prototype.isAtPosition=function(e){var t=this._worldTransform.applyInverseToVector(e),o=this._texture.getFrame(),r=o.width,a=o.height,i=new f.Vector2(-r,-a);i.multiply(this._anchor);var n=i.clone().add(r,a);return t.x<i.x||t.x>n.x||t.y<i.y||t.y>n.y?!1:!0},t.prototype.getLocalBounds=function(){if(this._localBoundsNeedUpdate){var e=this._localBounds,t=this._texture.getFrame();e.x=-t.width*this._anchor.x,e.y=-t.height*this._anchor.y,e.width=t.width,e.height=t.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()},t.prototype.getBounds=function(){if(this._boundsNeedUpdate){var e=this._bounds,t=this._texture.getFrame(),o=this._worldTransform,r=this._anchor,a=o.rectangleToCoordinates(t,r),n=a[0].x,l=a[0].y,s=n,d=l;a.forEach(function(e){var t=e.x,o=e.y;n=p(n,t),l=p(l,o),s=u(s,t),d=u(d,o)}),e.x=n,e.width=i(s-n),e.y=l,e.height=i(d-l),this._boundsNeedUpdate=!1}return this._bounds.clone()},t.prototype.getTexture=function(){return this._texture},t.prototype.setTexture=function(e){e&&(this._texture&&this._texture.off('update',this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=e,e.getBaseTexture().isLoaded()&&this._onTextureUpdate(),e.on('update',this._onTextureUpdate))},t.prototype.getShader=function(){return this._shader},t.prototype.setShader=function(e){this._shader=e},t.prototype.getWidth=function(){return this._width},t.prototype.setWidth=function(e){this._scale.x=e/this._texture.getFrame().width,this._width=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getHeight=function(){return this._height},t.prototype.setHeight=function(e){this._scale.y=e/this._texture.getFrame().height,this._height=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getDimensions=function(){return new f.Vector2(this._width,this._height)},t.prototype.getAnchor=function(){return this._anchor},t.prototype.setAnchor=function(e,t){e instanceof f.Vector2?this._anchor.copy(e):this._anchor.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.isSmoothDownscaling=function(){return this._smoothDownscaling},t.prototype.setSmoothDownscaling=function(e){this._smoothDownscaling=e},t.prototype.dispose=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this._texture&&this._texture.off('update',this._onTextureUpdate),(e||t)&&this._texture.dispose(t),this._potRenderer&&this._potRenderer.dispose()},t}(g.default);t.default=m},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),i=o(3),n=function(){function e(){(0,a.default)(this,e),this._container=new i.Engine.Container,this._sprite=new i.Engine.Sprite,this._container.addChild(this._sprite)}return e.prototype.render=function(e,t,o){var r=o.getDimensions(),a=this._getNextHighestPOT(r);this._renderTexture?this._renderTexture.resizeTo(a):this._renderTexture=new i.Engine.RenderTexture(e,a.x,a.y);var n=this._renderTexture.getDimensions();this._sprite.setTexture(o),this._sprite.updateTransform(),this._renderTexture.render(this._container),this._updateSprite(e,t,r,n)},e.prototype._updateSprite=function(e,t,o){t.setTexture(this._renderTexture),this._renderTexture.setFrame(new i.Rectangle(0,0,o.x,o.y))},e.prototype._getNextHighestPOT=function(e){return new i.Vector2(i.Utils.nextHighestPOT(e.x),i.Utils.nextHighestPOT(e.y))},e.prototype.getRenderTexture=function(){return this._renderTexture},e.prototype.dispose=function(){this._renderTexture.dispose(),this._renderTexture=null},e}();t.default=n},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(62),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={TextureShader:a.default}},function(e,t,o){function r(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},o(161),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,o){(function(e,t){(function(e){'use strict';function o(e){'function'!=typeof e&&(e=new Function(''+e));for(var t=Array(arguments.length-1),o=0;o<t.length;o++)t[o]=arguments[o+1];var r={callback:e,args:t};return f[_]=r,h(_),_++}function r(e){delete f[e]}function a(e){var t=e.callback,o=e.args;switch(o.length){case 0:t();break;case 1:t(o[0]);break;case 2:t(o[0],o[1]);break;case 3:t(o[0],o[1],o[2]);break;default:t.apply(void 0,o);}}function i(e){if(c)setTimeout(i,0,e);else{var t=f[e];if(t){c=!0;try{a(t)}finally{r(e),c=!1}}}}function n(){h=function(e){t.nextTick(function(){i(e)})}}function l(){if(e.postMessage&&!e.importScripts){var t=!0,o=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage('','*'),e.onmessage=o,t}}function s(){var t='setImmediate$'+Math.random()+'$',o=function(o){o.source===e&&'string'==typeof o.data&&0===o.data.indexOf(t)&&i(+o.data.slice(t.length))};e.addEventListener?e.addEventListener('message',o,!1):e.attachEvent('onmessage',o),h=function(o){e.postMessage(t+o,'*')}}function d(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;i(t)},h=function(t){e.port2.postMessage(t)}}function p(){var e=g.documentElement;h=function(t){var o=g.createElement('script');o.onreadystatechange=function(){i(t),o.onreadystatechange=null,e.removeChild(o),o=null},e.appendChild(o)}}function u(){h=function(e){setTimeout(i,0,e)}}if(!e.setImmediate){var _=1,f={},c=!1,g=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e),h;y=y&&y.setTimeout?y:e,'[object process]'==={}.toString.call(e.process)?n():l()?s():e.MessageChannel?d():g&&'onreadystatechange'in g.createElement('script')?p():u(),y.setImmediate=o,y.clearImmediate=r}})('undefined'==typeof self?'undefined'==typeof e?this:e:self)}).call(t,o(39),o(60))},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(163);Object.defineProperty(t,'UnpremultiplyFilter',{enumerable:!0,get:function(){return r(a).default}});var i=o(165);Object.defineProperty(t,'ColorOverlayFilter',{enumerable:!0,get:function(){return r(i).default}});var n=o(167);Object.defineProperty(t,'TintFilter',{enumerable:!0,get:function(){return r(n).default}});var l=o(169);Object.defineProperty(t,'OverlayFilter',{enumerable:!0,get:function(){return r(l).default}})},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(33),u=r(p),_=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(164),r}return(0,d.default)(t,e),t}(u.default);t.default=_},function(e){e.exports='uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(6),u=o(33),_=r(u),f=p.Constants.OptionType,c=p.Constants.UniformType,g=function(e){function t(){(0,i.default)(this,t);for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];var s=(0,l.default)(this,e.call.apply(e,[this].concat(a)));return s._fragmentSource=o(166),s}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){for(var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),n=t.getContext(),l=o.getContext(),s=this._options.color,d=n.getImageData(0,0,a.width,a.height),u=l.getImageData(0,0,a.width,a.height),_=a.width*a.height,f=new p.Color,c=new p.Color,g=0;g<4*_;g+=4){f.set(d.data[g]/255,d.data[g+1]/255,d.data[g+2]/255,d.data[g+3]/255),c.set(u.data[g]/255,u.data[g+1]/255,u.data[g+2]/255,u.data[g+3]/255);var i=c.r+f.a*(f.r-c.r);u.data[g]=255*(i+f.a*(s.r-i));var y=c.g+f.a*(f.g-c.g);u.data[g+1]=255*(y+f.a*(s.g-y));var h=c.b+f.a*(f.b-c.b);u.data[g+2]=255*(h+f.a*(s.b-h))}l.putImageData(u,0,0)},t}(_.default);g.prototype.availableOptions={color:{type:f.COLOR,default:p.Color.WHITE,uniformType:c.FLOAT4}},t.default=g},function(e){e.exports='uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(6),u=o(33),_=r(u),f=p.Constants.OptionType,c=p.Constants.UniformType,g=function(e){function t(){(0,i.default)(this,t);for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];var s=(0,l.default)(this,e.call.apply(e,[this].concat(a)));return s._fragmentSource=o(168),s}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,o,n){var l=3<arguments.length&&void 0!==arguments[3]&&arguments[3],s=o.getCanvas(),d=o.getContext(),u=n.getContext(),_=d.getImageData(0,0,s.width,s.height),f=this._options,c=f.mode,y=f.color,h=y.r,r=y.g,g=y.b,m=y.a,a=[0.2125,0.7154,0.0721];switch(c){case t.MODES.SOLID:for(var x=0,i;x<s.width*s.height;x++)i=4*x,_.data[i]+=(255*h-_.data[i])*m,_.data[i+1]+=(255*r-_.data[i+1])*m,_.data[i+2]+=(255*g-_.data[i+2])*m;break;case t.MODES.COLORIZED:for(var T=0;T<s.width*s.height;T++){var v=4*T,b=_.data[v]/255*a[0]+_.data[v+1]/255*a[1]+_.data[v+2]/255*a[2],C=new p.Color(b*h,b*r,b*g);_.data[v]+=(255*C.r-_.data[v])*m,_.data[v+1]+=(255*C.g-_.data[v+1])*m,_.data[v+2]+=(255*C.b-_.data[v+2])*m}}u.putImageData(_,0,0)},t}(_.default);g.MODES={NONE:0,SOLID:1,COLORIZED:2},g.prototype.availableOptions={color:{type:f.COLOR,default:p.Color.WHITE,uniformType:c.FLOAT4},mode:{type:f.NUMBER,default:g.MODES.NONE,uniformType:c.INT}},t.default=g},function(e){e.exports='uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\n\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  if (u_mode == 0) {\n    gl_FragColor = color * color.a;\n  } else if (u_mode == 1) {\n    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n  } else if (u_mode == 2) {\n    float luminance = dot(color.rgb, W);\n    vec3 colorized = vec3(luminance) * u_color.rgb;\n    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;\n  }\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),l=o(1),s=r(l),d=o(2),_=r(d),f=o(6),c=o(33),g=r(c),y=f.Constants.OptionType,h=f.Constants.UniformType,m=1e-6,x=function(e){function t(){(0,i.default)(this,t);for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];var l=(0,s.default)(this,e.call.apply(e,[this].concat(a)));return l._fragmentSource=o(170),l._lastImage=null,l}return(0,_.default)(t,e),t.prototype._applyCanvas=function(e,o,r){for(var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],l=this._options.overlayTexture.getRenderTarget().getContext(),s=o.getCanvas(),d=o.getContext(),_=r.getContext(),c=d.getImageData(0,0,s.width,s.height),g=l.getImageData(0,0,s.width,s.height),y=this._options,h=y.blendMode,x=y.alpha,T=new f.Color,v=new f.Color,b=new f.Color,C=0;C<4*(s.width*s.height);C+=4){T.set(c.data[C]/255,c.data[C+1]/255,c.data[C+2]/255,c.data[C+3]/255),v.set(g.data[C]/255,g.data[C+1]/255,g.data[C+2]/255,g.data[C+3]/255);var i=void 0,R=void 0,O=void 0,E=void 0,S=void 0,F=void 0,M=void 0,k=void 0,P=void 0;h===t.BLEND_MODES.NORMAL?b.set(T.r+v.a*x*(v.r-T.r),T.g+v.a*x*(v.g-T.g),T.b+v.a*x*(v.b-T.b),T.a):h===t.BLEND_MODES.OVERLAY?(i=1-2*(1-T.r)*(1-v.r),R=2*T.r*v.r,O=i+(0.5>T.r?1:0)*(R-i),E=1-2*(1-T.g)*(1-v.g),S=2*T.g*v.g,F=E+(0.5>T.g?1:0)*(S-E),M=1-2*(1-T.b)*(1-v.b),k=2*T.b*v.b,P=M+(0.5>T.b?1:0)*(k-M),b.set(T.r+v.a*x*(O-T.r),T.g+v.a*x*(F-T.g),T.b+v.a*x*(P-T.b),T.a)):h===t.BLEND_MODES.HARD_LIGHT?(i=1-2*(1-v.r)*(1-T.r),R=2*v.r*T.r,O=i+(0.5>v.r?1:0)*(R-i),E=1-2*(1-v.g)*(1-T.g),S=2*v.g*T.g,F=E+(0.5>v.g?1:0)*(S-E),M=1-2*(1-v.b)*(1-T.b),k=2*v.b*T.b,P=M+(0.5>v.b?1:0)*(k-M),b.set(T.r+v.a*x*(O-T.r),T.g+v.a*x*(F-T.g),T.b+v.a*x*(P-T.b),T.a)):h===t.BLEND_MODES.SOFT_LIGHT?(i=2*T.r*(1-v.r)+(2*v.r-1)*n(T.r),R=2*T.r*v.r+T.r*T.r*(1-2*v.r),O=i+(0.5>v.r?1:0)*(R-i),E=2*T.g*(1-v.g)+(2*v.g-1)*n(T.g),S=2*T.g*v.g+T.g*T.g*(1-2*v.g),F=E+(0.5>v.g?1:0)*(S-E),M=2*T.b*(1-v.b)+(2*v.b-1)*n(T.b),k=2*T.b*v.b+T.b*T.b*(1-2*v.b),P=M+(0.5>v.b?1:0)*(k-M),b.set(T.r+v.a*x*(O-T.r),T.g+v.a*x*(F-T.g),T.b+v.a*x*(P-T.b),T.a)):h===t.BLEND_MODES.MULTIPLY?(O=T.r*v.r,F=T.g*v.g,P=T.b*v.b,b.set(T.r+v.a*x*(O-T.r),T.g+v.a*x*(F-T.g),T.b+v.a*x*(P-T.b),T.a)):h===t.BLEND_MODES.DARKEN?(O=p(T.r,v.r),F=p(T.g,v.g),P=p(T.b,v.b),b.set(T.r+v.a*x*(O-T.r),T.g+v.a*x*(F-T.g),T.b+v.a*x*(P-T.b),T.a)):h===t.BLEND_MODES.LIGHTEN?(O=u(T.r,v.r),F=u(T.g,v.g),P=u(T.b,v.b),b.set(T.r+v.a*x*(O-T.r),T.g+v.a*x*(F-T.g),T.b+v.a*x*(P-T.b),T.a)):h===t.BLEND_MODES.SCREEN?(O=1-(1-T.r)*(1-v.r),F=1-(1-T.g)*(1-v.g),P=1-(1-T.b)*(1-v.b),b.set(T.r+v.a*x*(O-T.r),T.g+v.a*x*(F-T.g),T.b+v.a*x*(P-T.b),T.a)):h===t.BLEND_MODES.COLOR_BURN?(O=u(0,p(1,1-(1-T.r)/u(v.r,m))),F=u(0,p(1,1-(1-T.g)/u(v.g,m))),P=u(0,p(1,1-(1-T.b)/u(v.b,m))),b.set(T.r+v.a*x*(O-T.r),T.g+v.a*x*(F-T.g),T.b+v.a*x*(P-T.b),T.a)):void 0,c.data[C]=255*b.r,c.data[C+1]=255*b.g,c.data[C+2]=255*b.b,c.data[C+3]=255*b.a}_.putImageData(c,0,0)},t}(g.default);x.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},x.prototype.availableOptions={blendMode:{type:y.NUMBER,default:x.BLEND_MODES.NORMAL,uniformType:h.INT},overlayImage:{type:y.NUMBER,required:!0,uniformType:h.SAMPLER2D},overlayTexture:{type:y.OBJECT,required:!0},alpha:{type:y.NUMBER,default:1,uniformType:h.FLOAT}},t.default=x},function(e){e.exports='uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), 1.0);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.map(function(e){return('0'+(255&e).toString(16)).slice(-2)}).join('')}Object.defineProperty(t,'__esModule',{value:!0});var i=o(0),n=r(i),s=o(26),d=r(s),p=o(172),u=r(p),_=o(31),f=r(_),c=o(173),g=r(c),y=o(181),h=function(e){return d.default.byteArrayToString(f.default.decode(e))},m='YXBwX2lkZW50aWZpZXJz',x='ZXhwaXJlc19hdA==',T='c2lnbmF0dXJl',v=function(){function e(t){(0,n.default)(this,e),this._version='2.0',this._l=t,this._e=this._parseBigInt('65537',10),this._n=this._parseBigInt('681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631',10),this._parseLicense()}return e.prototype.v=function(){return this._sigValid()&&!this.isExp()},e.prototype._hostnameValid=function(){if('undefined'==typeof window)return!0;if(!this._decLic[h(m)].length)return!0;var e=window.location.hostname,t=!1;return this._decLic[h(m)].forEach(function(o){d.default.wildCardMatch(e,o)&&(t=!0)}),t},e.prototype.c=function(){var e=this;return new Promise(function(t,o){if(!e._sigValid()){var r=new Error;return r.code='ELICINV',o(r)}if(!e._hostnameValid()){var a=new Error;return a.code='ELICINVHOST',o(a)}if(e.isExp()){var i=new Error;return i.code='ELICEXP',o(i)}t()})},e.prototype.isToolAllowed=function(e){return-1!==this._decLic[h('ZmVhdHVyZXM=')].indexOf(e)},e.prototype.t=function(){if(this._decLic.enterprise_license)return Promise.resolve();var e=this._decLic[h('ZG9tYWlucw==')][0]+h(h('TDNSeVlXTnJQMkZ3YVV0bGVUMD0='))+this._decLic[h('YXBpX3Rva2Vu')],t=new g.default(e);return t.load()},e.prototype.isENT=function(){return this._decLic[h('ZW50ZXJwcmlzZV9saWNlbnNl')]},e.prototype._sigValid=function(){return this._verify(this._message,this._sig)},e.prototype.exp=function(){return!!this._decLic[h(x)]},e.prototype.dl=function(){return l((this._expAt()-Date.now())/86400000)},e.prototype.isExp=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Date.now();return null!==this._decLic[h(x)]&&e>this._expAt()},e.prototype._expAt=function(){return 1e3*this._decLic[h(x)]},e.prototype._verify=function(e,t){var o,r;r=this._encodeMessage(e),o=this._decodeSignature(t),o=o.substr(-64);var a=r===o;return a},e.prototype._encodeMessage=function(e){var t=(0,y.sha256)(e);return t},e.prototype._decodeSignature=function(e){var t;return e=f.default.decode(e),e=a(e),e=this._parseBigInt(e,16),t=e.modPowInt(this._e,this._n),t=t.toString(16),t},e.prototype._parseBigInt=function(e,t){return new u.default(e,t)},e.prototype._parseLicense=function(){this._decLic=JSON.parse(this._l),this._sig=this._decLic[h(T)],delete this._decLic[h(T)],this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,''),this._message=this._l.replace(new RegExp(',"'+h(T)+'":"([^"]*)"'),'')},e}();t.default=v},function(t,o){'use strict';function l(e,t,o){null!=e&&('number'==typeof e?this.fromNumber(e,t,o):null==t&&'string'!=typeof e?this.fromString(e,256):this.fromString(e,t))}function s(){return new l(null)}function a(e){return E.charAt(e)}function r(e,t){var o=S[e.charCodeAt(t)];return null==o?-1:o}function _(e){var t=s();return t.fromInt(e),t}function f(e){var o=1,r;return 0!=(r=e>>>16)&&(e=r,o+=16),0!=(r=e>>8)&&(e=r,o+=8),0!=(r=e>>4)&&(e=r,o+=4),0!=(r=e>>2)&&(e=r,o+=2),0!=(r=e>>1)&&(e=r,o+=1),o}function c(e){this.m=e}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function i(e,t){return e&t}function g(e,t){return e|t}function h(e,t){return e^t}function m(e,t){return e&~t}function n(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function T(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function x(){}function v(e){return e}function b(e){this.r2=s(),this.q3=s(),l.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}Object.defineProperty(o,'__esModule',{value:!0});/*!
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */var C=C||{},R;'Microsoft Internet Explorer'==C.appName?(l.prototype.am=function(e,t,o,r,a,i){for(var n=32767&t,s=t>>15;0<=--i;){var d=32767&this[e],l=this[e++]>>15,p=s*d+l*n;d=n*d+((32767&p)<<15)+o[r]+(1073741823&a),a=(d>>>30)+(p>>>15)+s*l+(a>>>30),o[r++]=1073741823&d}return a},R=30):'Netscape'!=C.appName?(l.prototype.am=function(e,t,o,r,a,i){for(;0<=--i;){var n=t*this[e++]+o[r]+a;a=d(n/67108864),o[r++]=67108863&n}return a},R=26):(l.prototype.am=function(e,t,o,r,a,i){for(var n=16383&t,s=t>>14;0<=--i;){var d=16383&this[e],l=this[e++]>>14,p=s*d+l*n;d=n*d+((16383&p)<<14)+o[r]+a,a=(d>>28)+(p>>14)+s*l,o[r++]=268435455&d}return a},R=28),l.prototype.DB=R,l.prototype.DM=(1<<R)-1,l.prototype.DV=1<<R;var O=52;l.prototype.FV=4503599627370496,l.prototype.F1=O-R,l.prototype.F2=2*R-O;var E='0123456789abcdefghijklmnopqrstuvwxyz',S=[],F,M;for(F=48,M=0;9>=M;++M)S[F++]=M;for(F=97,M=10;36>M;++M)S[F++]=M;for(F=65,M=10;36>M;++M)S[F++]=M;c.prototype.convert=function(e){return 0>e.s||0<=e.compareTo(this.m)?e.mod(this.m):e},c.prototype.revert=function(e){return e},c.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},c.prototype.mulTo=function(e,t,o){e.multiplyTo(t,o),this.reduce(o)},c.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},y.prototype.convert=function(e){var t=s();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),0>e.s&&0<t.compareTo(l.ZERO)&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=s();return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var o=32767&e[t],r=o*this.mpl+((o*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(o=t+this.m.t,e[o]+=this.m.am(0,r,e,t,0,this.m.t);e[o]>=e.DV;)e[o]-=e.DV,e[++o]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,o){e.multiplyTo(t,o),this.reduce(o)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},l.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},l.prototype.fromInt=function(e){this.t=1,this.s=0>e?-1:0,0<e?this[0]=e:-1>e?this[0]=e+this.DV:this.t=0},l.prototype.fromString=function(e,t){var o;if(16==t)o=4;else if(8==t)o=3;else if(256==t)o=8;else if(2==t)o=1;else if(32==t)o=5;else if(4==t)o=2;else return void this.fromRadix(e,t);this.t=0,this.s=0;for(var a=e.length,i=!1,n=0;0<=--a;){var s=8==o?255&e[a]:r(e,a);if(0>s){'-'==e.charAt(a)&&(i=!0);continue}i=!1,0==n?this[this.t++]=s:n+o>this.DB?(this[this.t-1]|=(s&(1<<this.DB-n)-1)<<n,this[this.t++]=s>>this.DB-n):this[this.t-1]|=s<<n,n+=o,n>=this.DB&&(n-=this.DB)}8==o&&0!=(128&e[0])&&(this.s=-1,0<n&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),i&&l.ZERO.subTo(this,this)},l.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},l.prototype.dlShiftTo=function(e,t){var o;for(o=this.t-1;0<=o;--o)t[o+e]=this[o];for(o=e-1;0<=o;--o)t[o]=0;t.t=this.t+e,t.s=this.s},l.prototype.drShiftTo=function(e,t){for(var o=e;o<this.t;++o)t[o-e]=this[o];t.t=u(this.t-e,0),t.s=this.s},l.prototype.lShiftTo=function(e,t){var o=e%this.DB,r=this.DB-o,a=d(e/this.DB),n=this.s<<o&this.DM,l;for(l=this.t-1;0<=l;--l)t[l+a+1]=this[l]>>r|n,n=(this[l]&(1<<r)-1)<<o;for(l=a-1;0<=l;--l)t[l]=0;t[a]=n,t.t=this.t+a+1,t.s=this.s,t.clamp()},l.prototype.rShiftTo=function(e,t){t.s=this.s;var o=d(e/this.DB);if(o>=this.t)return void(t.t=0);var r=e%this.DB,a=this.DB-r,n=(1<<r)-1;t[0]=this[o]>>r;for(var l=o+1;l<this.t;++l)t[l-o-1]|=(this[l]&n)<<a,t[l-o]=this[l]>>r;0<r&&(t[this.t-o-1]|=(this.s&n)<<a),t.t=this.t-o,t.clamp()},l.prototype.subTo=function(e,t){for(var o=0,r=0,a=p(e.t,this.t);o<a;)r+=this[o]-e[o],t[o++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;o<this.t;)r+=this[o],t[o++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;o<e.t;)r-=e[o],t[o++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=0>r?-1:0,-1>r?t[o++]=this.DV+r:0<r&&(t[o++]=r),t.t=o,t.clamp()},l.prototype.multiplyTo=function(e,t){var o=this.abs(),r=e.abs(),a=o.t;for(t.t=a+r.t;0<=--a;)t[a]=0;for(a=0;a<r.t;++a)t[a+o.t]=o.am(0,r[a],t,a,0,o.t);t.s=0,t.clamp(),this.s!=e.s&&l.ZERO.subTo(t,t)},l.prototype.squareTo=function(e){for(var t=this.abs(),o=e.t=2*t.t;0<=--o;)e[o]=0;for(o=0;o<t.t-1;++o){var r=t.am(o,t[o],e,2*o,0,1);(e[o+t.t]+=t.am(o+1,2*t[o],e,2*o+1,r,t.t-o-1))>=t.DV&&(e[o+t.t]-=t.DV,e[o+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(o,t[o],e,2*o,0,1)),e.s=0,e.clamp()},l.prototype.divRemTo=function(o,a,n){var r=o.abs();if(!(0>=r.t)){var p=this.abs();if(p.t<r.t)return null!=a&&a.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=s());var u=s(),_=this.s,c=o.s,g=this.DB-f(r[r.t-1]);0<g?(r.lShiftTo(g,u),p.lShiftTo(g,n)):(r.copyTo(u),p.copyTo(n));var y=u.t,h=u[y-1];if(0!=h){var m=h*(1<<this.F1)+(1<y?u[y-2]>>this.F2:0),x=this.FV/m,T=(1<<this.F1)/m,v=1<<this.F2,e=n.t,i=e-y,b=null==a?s():a;for(u.dlShiftTo(i,b),0<=n.compareTo(b)&&(n[n.t++]=1,n.subTo(b,n)),l.ONE.dlShiftTo(y,b),b.subTo(u,u);u.t<y;)u[u.t++]=0;for(;0<=--i;){var t=n[--e]==h?this.DM:d(n[e]*x+(n[e-1]+v)*T);if((n[e]+=u.am(0,t,n,i,0,y))<t)for(u.dlShiftTo(i,b),n.subTo(b,n);n[e]<--t;)n.subTo(b,n)}null!=a&&(n.drShiftTo(y,a),_!=c&&l.ZERO.subTo(a,a)),n.t=y,n.clamp(),0<g&&n.rShiftTo(g,n),0>_&&l.ZERO.subTo(n,n)}}},l.prototype.invDigit=function(){if(1>this.t)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=15&t*(2-(15&e)*t),t=255&t*(2-(255&e)*t),t=65535&t*(2-(65535&(65535&e)*t)),t=t*(2-e*t%this.DV)%this.DV,0<t?this.DV-t:-t},l.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},l.prototype.exp=function(o,e){if(4294967295<o||1>o)return l.ONE;var a=s(),r=s(),n=e.convert(this),d=f(o)-1;for(n.copyTo(a);0<=--d;)if(e.sqrTo(a,r),0<(o&1<<d))e.mulTo(r,n,a);else{var i=a;a=r,r=i}return e.revert(a)},l.prototype.toString=function(e){if(0>this.s)return'-'+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else if(4==e)t=2;else return this.toRadix(e);var o=(1<<t)-1,n=!1,l='',r=this.t,i=this.DB-r*this.DB%t,s;if(0<r--)for(i<this.DB&&0<(s=this[r]>>i)&&(n=!0,l=a(s));0<=r;)i<t?(s=(this[r]&(1<<i)-1)<<t-i,s|=this[--r]>>(i+=this.DB-t)):(s=this[r]>>(i-=t)&o,0>=i&&(i+=this.DB,--r)),0<s&&(n=!0),n&&(l+=a(s));return n?l:'0'},l.prototype.negate=function(){var e=s();return l.ZERO.subTo(this,e),e},l.prototype.abs=function(){return 0>this.s?this.negate():this},l.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var o=this.t;if(t=o-e.t,0!=t)return 0>this.s?-t:t;for(;0<=--o;)if(0!=(t=this[o]-e[o]))return t;return 0},l.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+f(this[this.t-1]^this.s&this.DM)},l.prototype.mod=function(e){var t=s();return this.abs().divRemTo(e,null,t),0>this.s&&0<t.compareTo(l.ZERO)&&e.subTo(t,t),t},l.prototype.modPowInt=function(t,e){var o;return o=256>t||e.isEven()?new c(e):new y(e),this.exp(t,o)},l.ZERO=_(0),l.ONE=_(1),x.prototype.convert=v,x.prototype.revert=v,x.prototype.mulTo=function(e,t,o){e.multiplyTo(t,o)},x.prototype.sqrTo=function(e,t){e.squareTo(t)},b.prototype.convert=function(e){if(0>e.s||e.t>2*this.m.t)return e.mod(this.m);if(0>e.compareTo(this.m))return e;var t=s();return e.copyTo(t),this.reduce(t),t},b.prototype.revert=function(e){return e},b.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>e.compareTo(this.r2);)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)},b.prototype.mulTo=function(e,t,o){e.multiplyTo(t,o),this.reduce(o)},b.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var P=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],k=67108864/P[P.length-1];l.prototype.chunkSize=function(e){return d(Math.LN2*this.DB/Math.log(e))},l.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||2>t||36<t)return'0';var o=this.chunkSize(t),i=e(t,o),a=_(i),n=s(),l=s(),d='';for(this.divRemTo(a,n,l);0<n.signum();)d=(i+l.intValue()).toString(t).substr(1)+d,n.divRemTo(a,n,l);return l.intValue().toString(t)+d},l.prototype.fromRadix=function(t,o){this.fromInt(0),null==o&&(o=10);for(var a=this.chunkSize(o),n=e(o,a),s=!1,d=0,p=0,u=0,i;u<t.length;++u){if(i=r(t,u),0>i){'-'==t.charAt(u)&&0==this.signum()&&(s=!0);continue}p=o*p+i,++d>=a&&(this.dMultiply(n),this.dAddOffset(p,0),d=0,p=0)}0<d&&(this.dMultiply(e(o,d)),this.dAddOffset(p,0)),s&&l.ZERO.subTo(this,this)},l.prototype.fromNumber=function(e,o,r){if(!('number'==typeof o)){var a=[],i=7&e;a.length=(e>>3)+1,o.nextBytes(a),0<i?a[0]&=(1<<i)-1:a[0]=0,this.fromString(a,256)}else if(2>e)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(l.ONE.shiftLeft(e-1),g,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(o);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(l.ONE.shiftLeft(e-1),this)},l.prototype.bitwiseTo=function(e,t,o){var r=p(e.t,this.t),a,i;for(a=0;a<r;++a)o[a]=t(this[a],e[a]);if(e.t<this.t){for(i=e.s&this.DM,a=r;a<this.t;++a)o[a]=t(this[a],i);o.t=this.t}else{for(i=this.s&this.DM,a=r;a<e.t;++a)o[a]=t(i,e[a]);o.t=e.t}o.s=t(this.s,e.s),o.clamp()},l.prototype.changeBit=function(e,t){var o=l.ONE.shiftLeft(e);return this.bitwiseTo(o,t,o),o},l.prototype.addTo=function(e,t){for(var o=0,r=0,a=p(e.t,this.t);o<a;)r+=this[o]+e[o],t[o++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;o<this.t;)r+=this[o],t[o++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;o<e.t;)r+=e[o],t[o++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=0>r?-1:0,0<r?t[o++]=r:-1>r&&(t[o++]=this.DV+r),t.t=o,t.clamp()},l.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},l.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},l.prototype.multiplyLowerTo=function(e,t,o){var r=p(this.t+e.t,t);for(o.s=0,o.t=r;0<r;)o[--r]=0;var a;for(a=o.t-this.t;r<a;++r)o[r+this.t]=this.am(0,e[r],o,r,0,this.t);for(a=p(e.t,t);r<a;++r)this.am(0,e[r],o,r,0,t-r);o.clamp()},l.prototype.multiplyUpperTo=function(e,t,o){--t;var r=o.t=this.t+e.t-t;for(o.s=0;0<=--r;)o[r]=0;for(r=u(t-this.t,0);r<e.t;++r)o[this.t+r-t]=this.am(t-r,e[r],o,0,0,this.t+r-t);o.clamp(),o.drShiftTo(1,o)},l.prototype.modInt=function(e){if(0>=e)return 0;var t=this.DV%e,o=0>this.s?e-1:0;if(0<this.t)if(0==t)o=this[0]%e;else for(var r=this.t-1;0<=r;--r)o=(t*o+this[r])%e;return o},l.prototype.millerRabin=function(e){var t=this.subtract(l.ONE),o=t.getLowestSetBit();if(0>=o)return!1;var n=t.shiftRight(o);e=e+1>>1,e>P.length&&(e=P.length);for(var r=s(),a=0;a<e;++a){r.fromInt(P[d(Math.random()*P.length)]);var i=r.modPow(n,this);if(0!=i.compareTo(l.ONE)&&0!=i.compareTo(t)){for(var p=1;p++<o&&0!=i.compareTo(t);)if(i=i.modPowInt(2,this),0==i.compareTo(l.ONE))return!1;if(0!=i.compareTo(t))return!1}}return!0},l.prototype.clone=function(){var e=s();return this.copyTo(e),e},l.prototype.intValue=function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},l.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},l.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},l.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1},l.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var o=this.DB-e*this.DB%8,r=0,a;if(0<e--)for(o<this.DB&&(a=this[e]>>o)!=(this.s&this.DM)>>o&&(t[r++]=a|this.s<<this.DB-o);0<=e;)8>o?(a=(this[e]&(1<<o)-1)<<8-o,a|=this[--e]>>(o+=this.DB-8)):(a=255&this[e]>>(o-=8),0>=o&&(o+=this.DB,--e)),0!=(128&a)&&(a|=-256),0==r&&(128&this.s)!=(128&a)&&++r,(0<r||a!=this.s)&&(t[r++]=a);return t},l.prototype.equals=function(e){return 0==this.compareTo(e)},l.prototype.min=function(e){return 0>this.compareTo(e)?this:e},l.prototype.max=function(e){return 0<this.compareTo(e)?this:e},l.prototype.and=function(e){var t=s();return this.bitwiseTo(e,i,t),t},l.prototype.or=function(e){var t=s();return this.bitwiseTo(e,g,t),t},l.prototype.xor=function(e){var t=s();return this.bitwiseTo(e,h,t),t},l.prototype.andNot=function(e){var t=s();return this.bitwiseTo(e,m,t),t},l.prototype.not=function(){for(var e=s(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},l.prototype.shiftLeft=function(e){var t=s();return 0>e?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},l.prototype.shiftRight=function(e){var t=s();return 0>e?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},l.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+n(this[e]);return 0>this.s?this.t*this.DB:-1},l.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,o=0;o<this.t;++o)e+=T(this[o]^t);return e},l.prototype.testBit=function(e){var t=d(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},l.prototype.setBit=function(e){return this.changeBit(e,g)},l.prototype.clearBit=function(e){return this.changeBit(e,m)},l.prototype.flipBit=function(e){return this.changeBit(e,h)},l.prototype.add=function(e){var t=s();return this.addTo(e,t),t},l.prototype.subtract=function(e){var t=s();return this.subTo(e,t),t},l.prototype.multiply=function(e){var t=s();return this.multiplyTo(e,t),t},l.prototype.divide=function(e){var t=s();return this.divRemTo(e,t,null),t},l.prototype.remainder=function(e){var t=s();return this.divRemTo(e,null,t),t},l.prototype.divideAndRemainder=function(e){var t=s(),o=s();return this.divRemTo(e,t,o),[t,o]},l.prototype.modPow=function(o,e){var a=o.bitLength(),i=_(1),r,l;if(0>=a)return i;r=18>a?1:48>a?3:144>a?4:768>a?5:6,l=8>a?new c(e):e.isEven()?new b(e):new y(e);var d=[],p=3,n=r-1,u=(1<<r)-1;if(d[1]=l.convert(this),1<r){var g=s();for(l.sqrTo(d[1],g);p<=u;)d[p]=s(),l.mulTo(g,d[p-2],d[p]),p+=2}var h=o.t-1,m=!0,x=s(),T,v;for(a=f(o[h])-1;0<=h;){for(a>=n?T=o[h]>>a-n&u:(T=(o[h]&(1<<a+1)-1)<<n-a,0<h&&(T|=o[h-1]>>this.DB+a-n)),p=r;0==(1&T);)T>>=1,--p;if(0>(a-=p)&&(a+=this.DB,--h),m)d[T].copyTo(i),m=!1;else{for(;1<p;)l.sqrTo(i,x),l.sqrTo(x,i),p-=2;0<p?l.sqrTo(i,x):(v=i,i=x,x=v),l.mulTo(x,d[T],i)}for(;0<=h&&0==(o[h]&1<<a);)l.sqrTo(i,x),v=i,i=x,x=v,0>--a&&(a=this.DB-1,--h)}return l.revert(i)},l.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return l.ZERO;for(var o=e.clone(),r=this.clone(),i=_(1),a=_(0),n=_(0),s=_(1);0!=o.signum();){for(;o.isEven();)o.rShiftTo(1,o),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):!a.isEven()&&a.subTo(e,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),t?((!n.isEven()||!s.isEven())&&(n.addTo(this,n),s.subTo(e,s)),n.rShiftTo(1,n)):!s.isEven()&&s.subTo(e,s),s.rShiftTo(1,s);0<=o.compareTo(r)?(o.subTo(r,o),t&&i.subTo(n,i),a.subTo(s,a)):(r.subTo(o,r),t&&n.subTo(i,n),s.subTo(a,s))}if(0!=r.compareTo(l.ONE))return l.ZERO;if(0<=s.compareTo(e))return s.subtract(e);if(0>s.signum())s.addTo(e,s);else return s;return 0>s.signum()?s.add(e):s},l.prototype.pow=function(t){return this.exp(t,new x)},l.prototype.gcd=function(e){var o=0>this.s?this.negate():this.clone(),r=0>e.s?e.negate():e.clone();if(0>o.compareTo(r)){var a=o;o=r,r=a}var t=o.getLowestSetBit(),i=r.getLowestSetBit();if(0>i)return o;for(t<i&&(i=t),0<i&&(o.rShiftTo(i,o),r.rShiftTo(i,r));0<o.signum();)0<(t=o.getLowestSetBit())&&o.rShiftTo(t,o),0<(t=r.getLowestSetBit())&&r.rShiftTo(t,r),0<=o.compareTo(r)?(o.subTo(r,o),o.rShiftTo(1,o)):(r.subTo(o,r),r.rShiftTo(1,r));return 0<i&&r.lShiftTo(i,r),r},l.prototype.isProbablePrime=function(e){var t=this.abs(),o;if(1==t.t&&t[0]<=P[P.length-1]){for(o=0;o<P.length;++o)if(t[0]==P[o])return!0;return!1}if(t.isEven())return!1;for(o=1;o<P.length;){for(var r=P[o],a=o+1;a<P.length&&r<k;)r*=P[a++];for(r=t.modInt(r);o<a;)if(0==r%P[o++])return!1}return t.millerRabin(e)},l.prototype.square=function(){var e=s();return this.squareTo(e),e},o.int2char=a,o.default=l},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(7),l=r(n),d=o(174),p=r(d),u=function(){function e(t){(0,i.default)(this,e),this._url=t,this._parsedUrl=p.default.parse(this._url,!0)}return e.prototype._isJSONPRequest=function(){var e=this._parsedUrl.query;for(var t in e){var o=e[t];if('?'===o)return!0}return!1},e.prototype.load=function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()},e.prototype._loadJSON=function(){var e=this;return new l.default(function(t,o){var r;window.XDomainRequest?(r=new window.XDomainRequest,r.onload=function(){var e=JSON.parse(r.responseText);t(e)},r.onerror=function(t){o(t)}):window.XMLHttpRequest&&(r=new XMLHttpRequest,r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var e=JSON.parse(r.responseText);t(e)}else o(new Error('HTTP Status '+r.status))}),r.open('GET',e._url,!0),r.send()})},e.prototype._loadJSONP=function(){var e=this,t=!1,o=!1,r='pesdk'+s(99999999999999*Math.random());return new l.default(function(a,i){var n=e._createJSONPNode(r);window[r]=function(r){e._removeJSONPNode(n),t||(o=!0,a(r))},window.setTimeout(function(){o||(e._removeJSONPNode(n),t=!0,i(new Error('Timeout of 5 seconds exceeded.')))},5e3)})},e.prototype._createJSONPNode=function(e){var t=this._buildJSONPUrl(e),o=document.querySelector('head'),r=document.createElement('script');return r.src=t,o.appendChild(r),r},e.prototype._removeJSONPNode=function(e){e.parentNode.removeChild(e)},e.prototype._buildJSONPUrl=function(e){var t=this._parsedUrl.query,o=null;for(var r in t)if('?'===t[r]){o=r;break}return delete this._parsedUrl.search,t[o]=e,p.default.format(this._parsedUrl)},e}();t.default=u},function(e,t,o){'use strict';function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function a(e,t,o){if(e&&d.isObject(e)&&e instanceof r)return e;var a=new r;return a.parse(e,t,o),a}var n=o(175),d=o(177);t.parse=a,t.resolve=function(e,t){return a(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?a(e,!1,!0).resolveObject(t):t},t.format=function(e){return d.isString(e)&&(e=a(e)),e instanceof r?e.format():r.prototype.format.call(e)},t.Url=r;var u=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s=['{','}','|','\\','^','`'].concat(['<','>','"','`',' ','\r','\n','\t']),p=['\''].concat(s),_=['%','/','?',';','#'].concat(p),f=['/','?','#'],c=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=o(178);r.prototype.parse=function(e,t,o){if(!d.isString(e))throw new TypeError('Parameter \'url\' must be a string, not '+typeof e);var r=e.indexOf('?'),a=-1!==r&&r<e.indexOf('#')?'?':'#',v=e.split(a),b=/\\/g;v[0]=v[0].replace(b,'/'),e=v.join(a);var C=e;if(C=C.trim(),!o&&1===e.split('#').length){var R=l.exec(C);if(R)return this.path=C,this.href=C,this.pathname=R[1],R[2]?(this.search=R[2],this.query=t?T.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search='',this.query={}),this}var O=u.exec(C);if(O){O=O[0];var E=O.toLowerCase();this.protocol=E,C=C.substr(O.length)}if(o||O||C.match(/^\/\/[^@\/]+@[^@\/]+/)){var S='//'===C.substr(0,2);S&&!(O&&m[O])&&(C=C.substr(2),this.slashes=!0)}if(!m[O]&&(S||O&&!x[O])){for(var F=-1,M=0,i;M<f.length;M++)i=C.indexOf(f[M]),-1!==i&&(-1==F||i<F)&&(F=i);var P,D;D=-1===F?C.lastIndexOf('@'):C.lastIndexOf('@',F),-1!==D&&(P=C.slice(0,D),C=C.slice(D+1),this.auth=decodeURIComponent(P)),F=-1;for(var M=0,i;M<_.length;M++)i=C.indexOf(_[M]),-1!==i&&(-1===F||i<F)&&(F=i);-1===F&&(F=C.length),this.host=C.slice(0,F),C=C.slice(F),this.parseHost(),this.hostname=this.hostname||'';var B='['===this.hostname[0]&&']'===this.hostname[this.hostname.length-1];if(!B)for(var I=this.hostname.split(/\./),M=0,w=I.length,L;M<w;M++)if(L=I[M],L&&!L.match(c)){for(var A='',N=0,U=L.length;N<U;N++)A+=127<L.charCodeAt(N)?'x':L[N];if(!A.match(c)){var k=I.slice(0,M),G=I.slice(M+1),z=L.match(g);z&&(k.push(z[1]),G.unshift(z[2])),G.length&&(C='/'+G.join('.')+C),this.hostname=k.join('.');break}}this.hostname=this.hostname.length>255?'':this.hostname.toLowerCase(),B||(this.hostname=n.toASCII(this.hostname));var V=this.port?':'+this.port:'',j=this.hostname||'';this.host=j+V,this.href+=this.host,B&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),'/'!==C[0]&&(C='/'+C))}if(!y[E])for(var M=0,w=p.length,h;M<w;M++)if(h=p[M],-1!==C.indexOf(h)){var W=encodeURIComponent(h);W===h&&(W=escape(h)),C=C.split(h).join(W)}var H=C.indexOf('#');-1!==H&&(this.hash=C.substr(H),C=C.slice(0,H));var q=C.indexOf('?');if(-1===q?t&&(this.search='',this.query={}):(this.search=C.substr(q),this.query=C.substr(q+1),t&&(this.query=T.parse(this.query)),C=C.slice(0,q)),C&&(this.pathname=C),x[E]&&this.hostname&&!this.pathname&&(this.pathname='/'),this.pathname||this.search){var V=this.pathname||'',Y=this.search||'';this.path=V+Y}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||'';e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,':'),e+='@');var t=this.protocol||'',o=this.pathname||'',r=this.hash||'',a=!1,i='';this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(':')?this.hostname:'['+this.hostname+']'),this.port&&(a+=':'+this.port)),this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&(i=T.stringify(this.query));var n=this.search||i&&'?'+i||'';return t&&':'!==t.substr(-1)&&(t+=':'),this.slashes||(!t||x[t])&&!1!==a?(a='//'+(a||''),o&&'/'!==o.charAt(0)&&(o='/'+o)):!a&&(a=''),r&&'#'!==r.charAt(0)&&(r='#'+r),n&&'?'!==n.charAt(0)&&(n='?'+n),o=o.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),n=n.replace('#','%23'),t+a+o+n+r},r.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(d.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var o=new r,a=Object.keys(this),n=0,l;n<a.length;n++)l=a[n],o[l]=this[l];if(o.hash=e.hash,''===e.href)return o.href=o.format(),o;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),_=0,f;_<u.length;_++)f=u[_],'protocol'!==f&&(o[f]=e[f]);return x[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname='/'),o.href=o.format(),o}if(e.protocol&&e.protocol!==o.protocol){if(!x[e.protocol]){for(var c=Object.keys(e),g=0,y;g<c.length;g++)y=c[g],o[y]=e[y];return o.href=o.format(),o}if(o.protocol=e.protocol,!e.host&&!m[e.protocol]){for(var h=(e.pathname||'').split('/');h.length&&!(e.host=h.shift()););e.host||(e.host=''),e.hostname||(e.hostname=''),''!==h[0]&&h.unshift(''),2>h.length&&h.unshift(''),o.pathname=h.join('/')}else o.pathname=e.pathname;if(o.search=e.search,o.query=e.query,o.host=e.host||'',o.auth=e.auth,o.hostname=e.hostname||e.host,o.port=e.port,o.pathname||o.search){var T=o.pathname||'',p=o.search||'';o.path=T+p}return o.slashes=o.slashes||e.slashes,o.href=o.format(),o}var s=o.pathname&&'/'===o.pathname.charAt(0),v=e.host||e.pathname&&'/'===e.pathname.charAt(0),b=v||s||o.host&&e.pathname,C=b,R=o.pathname&&o.pathname.split('/')||[],h=e.pathname&&e.pathname.split('/')||[],O=o.protocol&&!x[o.protocol];if(O&&(o.hostname='',o.port=null,o.host&&(''===R[0]?R[0]=o.host:R.unshift(o.host)),o.host='',e.protocol&&(e.hostname=null,e.port=null,e.host&&(''===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),b=b&&(''===h[0]||''===R[0])),v)o.host=e.host||''===e.host?e.host:o.host,o.hostname=e.hostname||''===e.hostname?e.hostname:o.hostname,o.search=e.search,o.query=e.query,R=h;else if(h.length)R||(R=[]),R.pop(),R=R.concat(h),o.search=e.search,o.query=e.query;else if(!d.isNullOrUndefined(e.search)){if(O){o.hostname=o.host=R.shift();var E=o.host&&0<o.host.indexOf('@')&&o.host.split('@');E&&(o.auth=E.shift(),o.host=o.hostname=E.shift())}return o.search=e.search,o.query=e.query,d.isNull(o.pathname)&&d.isNull(o.search)||(o.path=(o.pathname?o.pathname:'')+(o.search?o.search:'')),o.href=o.format(),o}if(!R.length)return o.pathname=null,o.path=o.search?'/'+o.search:null,o.href=o.format(),o;for(var S=R.slice(-1)[0],F=(o.host||e.host||1<R.length)&&('.'===S||'..'===S)||''===S,M=0,k=R.length;0<=k;k--)S=R[k],'.'===S?R.splice(k,1):'..'===S?(R.splice(k,1),M++):M&&(R.splice(k,1),M--);if(!b&&!C)for(;M--;M)R.unshift('..');b&&''!==R[0]&&(!R[0]||'/'!==R[0].charAt(0))&&R.unshift(''),F&&'/'!==R.join('/').substr(-1)&&R.push('');var i=''===R[0]||R[0]&&'/'===R[0].charAt(0);if(O){o.hostname=o.host=i?'':R.length?R.shift():'';var E=o.host&&0<o.host.indexOf('@')&&o.host.split('@');E&&(o.auth=E.shift(),o.host=o.hostname=E.shift())}return b=b||o.host&&R.length,b&&!i&&R.unshift(''),R.length?o.pathname=R.join('/'):(o.pathname=null,o.path=null),d.isNull(o.pathname)&&d.isNull(o.search)||(o.path=(o.pathname?o.pathname:'')+(o.search?o.search:'')),o.auth=e.auth||o.auth,o.slashes=o.slashes||e.slashes,o.href=o.format(),o},r.prototype.parseHost=function(){var e=this.host,t=i.exec(e);t&&(t=t[0],':'!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,o){(function(e,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(n){function l(e){throw new RangeError(B[e])}function s(e,t){for(var o=e.length,r=[];o--;)r[o]=t(e[o]);return r}function p(e,t){var o=e.split('@'),r='';1<o.length&&(r=o[0]+'@',e=o[1]),e=e.replace(D,'.');var a=e.split('.'),i=s(a,t).join('.');return r+i}function u(e){for(var t=[],o=0,r=e.length,a,i;o<r;)a=e.charCodeAt(o++),55296<=a&&56319>=a&&o<r?(i=e.charCodeAt(o++),56320==(64512&i)?t.push(((1023&a)<<10)+(1023&i)+65536):(t.push(a),o--)):t.push(a);return t}function _(e){return s(e,function(e){var t='';return 65535<e&&(e-=65536,t+=w(55296|1023&e>>>10),e=56320|1023&e),t+=w(e),t}).join('')}function f(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:b}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function g(e,t,o){var r=0;for(e=o?L(e/E):e>>1,e+=L(e/t);e>I*R>>1;r+=b)e=L(e/I);return L(r+(I+1)*e/(e+O))}function y(e){var o=[],r=e.length,a=0,i=F,n=S,s,d,p,u,c,y,h,m,x,t;for(d=e.lastIndexOf(M),0>d&&(d=0),p=0;p<d;++p)128<=e.charCodeAt(p)&&l('not-basic'),o.push(e.charCodeAt(p));for(u=0<d?d+1:0;u<r;){for(c=a,y=1,h=b;;h+=b){if(u>=r&&l('invalid-input'),m=f(e.charCodeAt(u++)),(m>=b||m>L((v-a)/y))&&l('overflow'),a+=m*y,x=h<=n?C:h>=n+R?R:h-n,m<x)break;t=b-x,y>L(v/t)&&l('overflow'),y*=t}s=o.length+1,n=g(a-c,s,0==c),L(a/s)>v-i&&l('overflow'),i+=L(a/s),a%=s,o.splice(a++,0,i)}return _(o)}function h(e){var o=[],r,a,i,n,s,d,p,_,f,y,t,h,m,x,T;for(e=u(e),h=e.length,r=F,a=0,s=S,d=0;d<h;++d)t=e[d],128>t&&o.push(w(t));for(i=n=o.length,n&&o.push(M);i<h;){for(p=v,d=0;d<h;++d)t=e[d],t>=r&&t<p&&(p=t);for(m=i+1,p-r>L((v-a)/m)&&l('overflow'),a+=(p-r)*m,r=p,d=0;d<h;++d)if(t=e[d],t<r&&++a>v&&l('overflow'),t==r){for(_=a,f=b;;f+=b){if(y=f<=s?C:f>=s+R?R:f-s,_<y)break;T=_-y,x=b-y,o.push(w(c(y+T%x,0))),_=L(T/x)}o.push(w(c(_,0))),s=g(a,m,i==n),a=0,++i}++a,++r}return o.join('')}var m='object'==typeof t&&t&&!t.nodeType&&t,x='object'==typeof e&&e&&!e.nodeType&&e,T='object'==typeof r&&r;(T.global===T||T.window===T||T.self===T)&&(n=T);var v=2147483647,b=36,C=1,R=26,O=38,E=700,S=72,F=128,M='-',k=/^xn--/,P=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:'Overflow: input needs wider integers to process',"not-basic":'Illegal input >= 0x80 (not a basic code point)',"invalid-input":'Invalid input'},I=b-C,L=d,w=a,A;A={version:'1.4.1',ucs2:{decode:u,encode:_},decode:y,encode:h,toASCII:function(e){return p(e,function(e){return P.test(e)?'xn--'+h(e):e})},toUnicode:function(e){return p(e,function(e){return k.test(e)?y(e.slice(4).toLowerCase()):e})}};i=function(){return A}.call(t,o,t,e),!(void 0!==i&&(e.exports=i))})(this)}).call(t,o(176)(e),o(39))},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],!e.children&&(e.children=[]),Object.defineProperty(e,'loaded',{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,'id',{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e){'use strict';e.exports={isString:function(e){return'string'==typeof e},isObject:function(e){return'object'==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,o){'use strict';t.decode=t.parse=o(179),t.encode=t.stringify=o(180)},function(e){'use strict';function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,r,a,n){r=r||'&',a=a||'=';var l={};if('string'!=typeof e||0===e.length)return l;var s=/\+/g;e=e.split(r);var d=1e3;n&&'number'==typeof n.maxKeys&&(d=n.maxKeys);var p=e.length;0<d&&p>d&&(p=d);for(var u=0;u<p;++u){var i=e[u].replace(s,'%20'),_=i.indexOf(a),f,c,g,y;0<=_?(f=i.substr(0,_),c=i.substr(_+1)):(f=i,c=''),g=decodeURIComponent(f),y=decodeURIComponent(c),t(l,g)?o(l[g])?l[g].push(y):l[g]=[l[g],y]:l[g]=y}return l};var o=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)}},function(e){'use strict';function t(e,t){if(e.map)return e.map(t);for(var o=[],r=0;r<e.length;r++)o.push(t(e[r],r));return o}var o=function(e){switch(typeof e){case'string':return e;case'boolean':return e?'true':'false';case'number':return isFinite(e)?e:'';default:return'';}};e.exports=function(e,i,n,l){return i=i||'&',n=n||'=',null===e&&(e=void 0),'object'==typeof e?t(a(e),function(a){var l=encodeURIComponent(o(a))+n;return r(e[a])?t(e[a],function(e){return l+encodeURIComponent(o(e))}).join(i):l+encodeURIComponent(o(e[a]))}).join(i):l?encodeURIComponent(o(l))+n+encodeURIComponent(o(e)):''};var r=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.push(o);return t}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.sha256=/*!
 *  Secure Hash Algorithm (SHA256)
 *  http://www.webtoolkit.info/
 *
 *  Original code by Angel Marin, Paul Johnston.
 */function(e){function t(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function o(e,t){return e>>>t|e<<32-t}function r(e,t){return e>>>t}function n(e,t,o){return e&t^~e&o}function l(e,t,o){return e&t^e&o^t&o}function s(e){return o(e,2)^o(e,13)^o(e,22)}function p(e){return o(e,6)^o(e,11)^o(e,25)}function u(e){return o(e,7)^o(e,18)^r(e,3)}function _(e){return o(e,17)^o(e,19)^r(e,10)}var d=8;return e=function(e){e=e.replace(/\r\n/g,'\n');for(var t='',o=0,r;o<e.length;o++)r=e.charCodeAt(o),128>r?t+=a(r):127<r&&2048>r?(t+=a(192|r>>6),t+=a(128|63&r)):(t+=a(224|r>>12),t+=a(128|63&r>>6),t+=a(128|63&r));return t}(e),function(e){for(var t='0123456789abcdef',o='',r=0;r<4*e.length;r++)o+=t.charAt(15&e[r>>2]>>8*(3-r%4)+4)+t.charAt(15&e[r>>2]>>8*(3-r%4));return o}(function(o,r){var y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],x=Array(64),T,a,v,c,d,e,f,g,h,i,b,C;o[r>>5]|=128<<24-r%32,o[(r+64>>9<<4)+15]=r;for(var h=0;h<o.length;h+=16){T=m[0],a=m[1],v=m[2],c=m[3],d=m[4],e=m[5],f=m[6],g=m[7];for(var i=0;64>i;i++)x[i]=16>i?o[i+h]:t(t(t(_(x[i-2]),x[i-7]),u(x[i-15])),x[i-16]),b=t(t(t(t(g,p(d)),n(d,e,f)),y[i]),x[i]),C=t(s(T),l(T,a,v)),g=f,f=e,e=d,d=t(c,b),c=v,v=a,a=T,T=t(b,C);m[0]=t(T,m[0]),m[1]=t(a,m[1]),m[2]=t(v,m[2]),m[3]=t(c,m[3]),m[4]=t(d,m[4]),m[5]=t(e,m[5]),m[6]=t(f,m[6]),m[7]=t(g,m[7])}return m}(function(e){for(var t=[],o=0;o<e.length*d;o+=d)t[o>>5]|=(e.charCodeAt(o/d)&(1<<d)-1)<<24-o%32;return t}(e),e.length*d))}},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(8),_=r(u),f=o(92),c=r(f),g=p.Constants.OptionType,y=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype._render=function(e){return this._selectedFilter.render(this._sdk,e,this._renderTexture)},t.prototype.render=function(t){return this._selectedFilter.getDirty()&&this.setDirty(!0),!this.getEnabled()||this._selectedFilter.constructor.isIdentity?p.Promise.resolve(t):e.prototype.render.call(this,t)},t.prototype.setDirtyForRenderer=function(t,o){e.prototype.setDirtyForRenderer.call(this,t,o),this._selectedFilter.setDirtyForRenderer(t,o)},t.prototype.disposeRenderTextures=function(){e.prototype.disposeRenderTextures.call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._selectedFilter&&this._selectedFilter.dispose()},t}(_.default);y.identifier='filter',y.prototype.availableOptions={identifier:{type:g.STRING,default:'identity'},intensity:{type:g.NUMBER,default:1,setter:function(e){return this._selectedFilter&&this._selectedFilter.setIntensity(e),e}},filter:{type:g.OBJECT,default:new c.default,setter:function(e){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=e,'undefined'!=typeof this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),e}}},t.default=y},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(7),_=r(u),f=p.Constants.OptionType,c=p.Constants.UniformType,g=p.Constants.RendererType,y=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(184),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),i=o.getContext(),n=this._options.filteredCanvas;i.save(),i.drawImage(a,0,0),i.globalAlpha=this._options.intensity,i.drawImage(n,0,0),i.restore()},t}(p.Engine.Filter);y.prototype.availableOptions={filteredImage:{type:f.NUMBER,default:1,uniformType:c.INT},filteredCanvas:{type:f.OBJECT,default:null},intensity:{type:f.NUMBER,default:1,uniformType:c.FLOAT}};var h=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;(0,i.default)(this,e),this._intensity=t,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new p.Engine.Container,this._sprite=new p.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new y}return e.prototype.push=function(e){this._stack.push(e)},e.prototype.clear=function(){this._stack=[]},e.prototype.render=function(e,t,o){if(0===this._stack.length)return _.default.resolve();var r=e.getRenderer();this._sprite.setTexture(t);var a=this._renderTextures[r.id];if(!a){var i=e.getSprite().getTexture().getFrame();a=new p.Engine.RenderTexture(e.getRenderer(),i.width,i.height),this._renderTextures[r.id]=a}var n=o.getDimensions();a.resizeTo(n);var l=this.isDirtyForRenderer(r);if(l){this._stack.forEach(function(t){t.update(e)});var s=this._stack.map(function(e){return e.getFilter()});this._sprite.setFilters(s),a.render(this._container),this.setDirtyForRenderer(!1,r)}if(this._blendFilter.setIntensity(this._intensity),r.isOfType(g.CANVAS))this._blendFilter.setFilteredCanvas(a.getRenderTarget().getCanvas());else if(r.isOfType(g.WEBGL)){var d=a.getBaseTexture();d.setGLUnit(this._blendFilter.getFilteredImage()),r.updateTexture(d,!1)}return this._sprite.setFilters([this._blendFilter]),o.clear(p.Color.TRANSPARENT),o.render(this._container),l&&this.disposeRenderTextures(),_.default.resolve(o)},e.prototype.setIntensity=function(e){this._intensity=e},e.prototype.isDirtyForRenderer=function(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]},e.prototype.setDirtyForRenderer=function(e,t){this._dirtiness[t.id]=e},e.prototype.setDirty=function(e){for(var t in this._dirtiness)this._dirtiness[t]=e},e.prototype.disposeRenderTextures=function(){for(var e in this._renderTextures)this._renderTextures[e].dispose(),delete this._renderTextures[e]},e.prototype.dispose=function(){this.disposeRenderTextures(),this._stack.forEach(function(e){return e.dispose()}),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()},e}();t.default=h},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n'},function(e,r,a){'use strict';function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,'__esModule',{value:!0});var l=a(0),s=n(l),p=a(1),u=n(p),_=a(2),f=n(_),c=a(3),g=a(8),y=n(g),h=a(7),m=n(h),x=a(186),T=n(x),v=c.Constants.OptionType,b=function(e){function r(){return(0,s.default)(this,r),(0,u.default)(this,e.apply(this,arguments))}return(0,f.default)(r,e),r.prototype._render=function(e){this._sprite.setRotation(0);var t=e.getDimensions(),o=this._options,r=o.start,a=o.end,i=o.rotation,n=o.textureScale,l=r.clone().add(a.clone().subtract(r).divide(2)),s=this.calculateScale(),d=s*n,p=this.getNewDimensions(t);return this._sprite.setAnchor(l),this._sprite.setRotation(i),this._sprite.setScale(d,d),this._sprite.setPosition(p.clone().multiply(0.5)),this._renderTexture.render(this._container),m.default.resolve()},r.prototype.calculateScale=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._options.rotation,r=this.getInputDimensions(!1),a=new c.Vector2(i(r.x*o(e))+i(r.y*t(e)),i(r.x*t(e))+i(r.y*o(e))),n=r.clone().multiply(0.5);n.subtract(a.clone().divide(2)),n.abs();var l=1;return l=n.y>n.x?2*n.y/r.y+1:2*n.x/r.x+1,l},r.prototype.getNewDimensions=function(e){var t=this._options,o=t.start,r=t.end,a=t.textureScale,i=this.calculateScale();return e.clone().multiply(a*i).multiply(r.clone().subtract(o)).round()},r.prototype.flip=function(e){var t=this._options,o=t.start,r=t.end,a=o.clone();'horizontal'===e?(o.set(1-r.x,o.y),r.set(1-a.x,r.y)):'vertical'===e&&(o.set(o.x,1-r.y),r.set(r.x,1-a.y))},r.prototype.rotate=function(e){for(var t=this._options,o=t.start,r=t.end,a=d((e+360)%360/90),n=0,i;n<a;n++)i=o.clone(),o.set(1-r.y,i.x),r.set(1-i.y,r.x)},r}(y.default);b.identifier='transform',b.prototype.availableOptions={start:{type:v.VECTOR2,default:new c.Vector2(0,0)},end:{type:v.VECTOR2,default:new c.Vector2(1,1)},textureScale:{type:v.NUMBER,default:1},rotation:{type:v.NUMBER,default:0}},b.TransformChange=T.default,r.default=b},function(e,a,i){'use strict';Object.defineProperty(a,'__esModule',{value:!0});var n=i(0),l=function(e){return e&&e.__esModule?e:{default:e}}(n),s=i(3),d=function(){function e(r,a){(0,l.default)(this,e),this._operation=r,this._options=a,this._inputDimensions=this._operation.getInputDimensions(!1),this._rotationDelta=a.rotation-this._operation.getRotation(),this._deltaCos=o(this._rotationDelta),this._deltaSin=t(this._rotationDelta),this._oldAbsoluteSize=this._operation.getEnd().clone().subtract(this._operation.getStart()).multiply(this._inputDimensions),this._newAbsoluteSize=a.end.clone().subtract(a.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._operation.getStart().clone().subtract(a.start).multiply(this._inputDimensions),this._scaleRatio=this._operation.calculateScale(a.rotation)/this._operation.calculateScale(),this._absoluteStart=this._operation.getStart().clone().multiply(this._inputDimensions),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/this._operation.getTextureScale()}return e.prototype.applyToRelativePoint=function(e){var t=this._operation.getStart(),o=this._operation.getEnd(),r=t.clone().add(o.clone().subtract(t).divide(2)),a=r.multiply(this._inputDimensions),i=e.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),n=a.clone().add(i),l=n.clone().subtract(this._inputDimensions.clone().divide(2)),d=new s.Vector2(l.x*this._deltaCos-l.y*this._deltaSin,l.x*this._deltaSin+l.y*this._deltaCos),p=this._inputDimensions.clone().divide(2).add(d),u=this._options.start.clone().multiply(this._inputDimensions);return p.clone().subtract(u).divide(this._newAbsoluteSize)},e.prototype.applyToRelativeSize=function(e){return e*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()},e.prototype.applyToDimensions=function(e){return e=e.clone().multiply(this._scaleRatio),this._options.textureScale&&e.multiply(this._textureScaleFactor),e},e.prototype.scaleSize=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'y';return e/this._sizeFactor[t]},e.prototype.applyToRotation=function(e){return(e+this._rotationDelta)%(2*r)},e}();a.default=d},function(e,t,o){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var i=o(0),n=a(i),l=o(1),s=a(l),d=o(2),p=a(d),u=o(3),_=o(7),f=a(_),c=o(21),g=a(c),y=o(8),h=a(y),m=u.Constants.OptionType,x=function(e){function t(){return(0,n.default)(this,t),(0,s.default)(this,e.apply(this,arguments))}return(0,p.default)(t,e),t.prototype._render=function(){var e=this._options.rotation%360;this._sprite.setScale(this._options.flipHorizontally?-1:1,this._options.flipVertically?-1:1),this._sprite.setRotation(e*(r/180)),this._sprite.setAnchor(0.5,0.5),this._sprite.updateTransform();var t=this._sprite.getBounds();return this._renderTexture.resizeTo(new g.default(t.width,t.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),f.default.resolve()},t.prototype.getNewDimensions=function(e){return e=e.clone(),this._options.rotation%180&&e.flip(),e},t.prototype.flip=function(e){var t=this._options.rotation;(90===t||270===t)&&('vertical'===e?e='horizontal':e='vertical'),'vertical'===e?this.setFlipVertically(!this.getFlipVertically()):'horizontal'===e?this.setFlipHorizontally(!this.getFlipHorizontally()):void 0},t}(h.default);x.identifier='orientation',x.prototype.availableOptions={rotation:{type:m.NUMBER,default:0,validation:function(e){if(0!=e%90)throw new Error('OrientationOperation: `rotation` has to be a multiple of 90.')},setter:function(e){return(e+360)%360}},flipVertically:{type:m.BOOLEAN,default:!1},flipHorizontally:{type:m.BOOLEAN,default:!1}},t.default=x},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(7),_=r(u),f=o(8),c=r(f),g=o(93),y=r(g),h=o(190),m=r(h),x=o(10),T=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._clarityFilter=new m.default,n._filter=new y.default,n._sprite.setFilters([n._clarityFilter,n._filter]),n}return(0,d.default)(t,e),t.prototype._render=function(e){var t=e.getDimensions();t.x=1/t.x,t.y=1/t.y,this._clarityFilter.set({clarity:this._options.clarity,texSize:t});var o=new p.ColorMatrix;return o.multiply(p.ColorMatrix.createExposureMatrix(this._options.exposure)),o.multiply(p.ColorMatrix.createSaturationMatrix(this._options.saturation+1)),o.multiply(p.ColorMatrix.createContrastMatrix(this._options.contrast+1)),o.multiply(p.ColorMatrix.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,colorMatrix:o,colorOffset:o.getOffsets()}),0===this._options.clarity?this._sprite.setFilters([this._filter]):this._sprite.setFilters([this._clarityFilter,this._filter]),this._renderTexture.render(this._container),_.default.resolve()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._filter.dispose(),this._clarityFilter.dispose()},t}(c.default);T.identifier='adjustments',T.prototype.availableOptions={brightness:{type:x.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:x.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:x.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:x.OptionType.NUMBER,default:1,minValue:0.5,midValue:1,maxValue:2},exposure:{type:x.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:x.OptionType.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:x.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:x.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},t.default=T},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 color = texColor;\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = dot(color.rgb, luminanceWeighting);\n  float shadow = u_shadows >= 0.0\n      ? clamp(\n            pow(luminance, 1.0 / (u_shadows + 1.0))\n            + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n            - luminance\n      , 0.0, max(u_shadows, 1.0))\n      : -clamp(\n            pow(luminance, 1.0 / (-u_shadows + 1.0))\n            + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n            - luminance\n      , 0.0, max(-u_shadows, 1.0));\n\n    float highlight = u_highlights < 0.0\n      ? clamp(\n            1.0\n            - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n            - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n            - luminance\n       , -1.0, 0.0)\n      : -clamp(\n            1.0\n            - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n            - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n            - luminance\n       , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n  color.rgb = clamp((luminance + highlight + shadowContrast) * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n\n  // Apply Color Matrix\n  color = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0);\n\n  // Apply alpha\n  color = vec4(color.rgb * texColor.a, texColor.a);\n\n  gl_FragColor = color;\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),_=o(34),f=r(_),c=p.Constants.OptionType,g=p.Constants.UniformType,y=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(191),r._lastClarity=null,r._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(a);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),i&&this._blurImage(t),this._applyClarity(t,o)},t.prototype._blurImage=function(e){var t=e.getCanvas(),o=e.getContext(),r=o.getImageData(0,0,t.width,t.height);f.default.stackBlurCanvasRGBA(r,0,0,t.width,t.height,1);var a=this._blurredRenderTarget.getContext();a.putImageData(r,0,0)},t.prototype._applyClarity=function(e,t){for(var o=t.getContext(),a=e.getCanvas(),n=e.getContext(),l=this._blurredRenderTarget.getContext(),s=this._options.clarity,d=n.getImageData(0,0,a.width,a.height),p=d.data,_=l.getImageData(0,0,a.width,a.height).data,f=u(0.2*this._options.clarity,0),c=1-f,y=1+s,h=1-(1+s),m=0;m<4*(a.width*a.height);m+=4){var i=_[m]*h+p[m]*y,r=_[m+1]*h+p[m+1]*y,g=_[m+2]*h+p[m+2]*y,x=(0.2125*i+0.7154*r+0.0721*g)*f;p[m]=i*c+x,p[m+1]=r*c+x,p[m+2]=g*c+x}o.putImageData(d,0,0)},t}(p.Engine.Filter);y.prototype.availableOptions={clarity:{type:c.NUMBER,default:0,uniformType:g.FLOAT},texSize:{type:c.VECTOR2,default:new p.Vector2(100,100),uniformType:g.FLOAT2}},t.default=y},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_clarity;\nuniform vec2 u_texSize;\n\nfloat random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n  vec4 original = texture2D(u_image, v_texCoord);\n\n  vec4 color = texture2D(u_image, v_texCoord);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, 0.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, 0.0) * u_texSize);\n\n  color +=  texture2D(u_image, v_texCoord + vec2(0.0, 1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, 1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, 1.0) * u_texSize);\n\n  color +=  texture2D(u_image, v_texCoord + vec2(0.0, -1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, -1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, -1.0) * u_texSize);\n\n  // apply unsharp mask\n  vec4 blurred = color / 9.0;\n  color = mix(blurred, original, 1.0 + u_clarity);\n\n  // desaturation, to emphesize the effect\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, color.xyz));\n  float desaturation = clamp(u_clarity * 0.13, 0.0, 1.0);\n  gl_FragColor = vec4(mix(color.xyz, gray, desaturation) * color.a, color.a);\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(8),_=r(u),f=o(7),c=r(f),g=o(193),y=r(g),h=p.Constants.OptionType,m=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._lastBlurRadius=n._options.blurRadius,n._lastSize=n._options.size,n._lastGradientSize=n._options.gradientSize,n._horizontalFilter=new y.default,n._verticalFilter=new y.default,n._sprite.setFilters([n._horizontalFilter,n._verticalFilter]),n._horizontalFilter.setDelta(new p.Vector2(1,1)),n._verticalFilter.setDelta(new p.Vector2(-1,1)),n._filter=new y.default,n}return(0,d.default)(t,e),t.prototype.rotate=function(e){var t=this._options.start,o=this._options.end;90===e?(t.flip(),t.x=1-t.x,o.flip(),o.x=1-o.x):-90===e&&(t.flip(),t.y=1-t.y,o.flip(),o.y=1-o.y),this.set({start:t,end:o})},t.prototype.flip=function(e){var t=this._options.start,o=this._options.end;'horizontal'===e?(t.x=1-t.x,o.x=1-o.x):'vertical'===e?(t.y=1-t.y,o.y=1-o.y):void 0,this.set({start:t,end:o})},t.prototype.transform=function(e){var t=this,o={};['start','end'].forEach(function(r){var a=t.getOption(r);o[r]=e.applyToRelativePoint(a)}),['blurRadius','size','gradientSize'].forEach(function(r){var a=t.getOption(r);o[r]=e.applyToRelativeSize(a)}),this.set(o,!1)},t.prototype._renderWebGL=function(e){var t=e.getDimensions(),o=t.min(),r=this._options.start.clone(),a=this._options.end.clone(),i=this._options,n=i.blurRadius,l=i.size,s=i.gradientSize,d={blurRadius:n*o,size:l*o,gradientSize:s*o,start:r.clone().multiply(t),end:a.clone().multiply(t),texSize:t};return this._horizontalFilter.set(d),this._verticalFilter.set(d),this._renderTexture.render(this._container),c.default.resolve()},t.prototype._renderCanvas=function(e){var t=e.getDimensions(),o=this._options,r=o.blurRadius,a=o.size,i=o.gradientSize,n=o.start,l=o.end;return this._filter.set({blurRadius:r,gradientSize:i,size:a,start:n.clone(),end:l.clone(),texSize:t}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),c.default.resolve()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},t}(_.default);m.identifier='mirrored-focus',m.prototype.availableOptions={start:{type:h.VECTOR2,default:new p.Vector2(0,0.5)},end:{type:h.VECTOR2,default:new p.Vector2(1,0.5)},blurRadius:{type:h.NUMBER,default:0.025},size:{type:h.NUMBER,default:0.1},gradientSize:{type:h.NUMBER,default:0.1}},t.default=m},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(34),_=r(u),f=p.Constants.OptionType,c=p.Constants.UniformType,g=function(e){function t(){(0,i.default)(this,t);for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];var s=(0,l.default)(this,e.call.apply(e,[this].concat(a)));return s._fragmentSource=o(194),s._lastBlurRadius=null,s._lastGradientRadius=null,s._lastStart=new p.Vector2,s._lastEnd=new p.Vector2,s._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),s._maskRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),s}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(a);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions()),this._lastStart.equals(this._options.start)&&this._lastEnd.equals(this._options.end)&&this._lastGradientRadius===this._options.size&&!i||(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,o)},t.prototype._blurImage=function(e){var t=e.getCanvas(),o=e.getContext(),r=new p.Vector2(t.width,t.height),a=o.getImageData(0,0,t.width,t.height);_.default.stackBlurCanvasRGBA(a,0,0,t.width,t.height,this._options.blurRadius*r.min());var i=this._blurredRenderTarget.getContext();i.putImageData(a,0,0)},t.prototype._renderMask=function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),o=this._maskRenderTarget.getPixelRatio(),r=new p.Vector2(e.width,e.height),a=this._options.size*r.min()*o,i=this._options.gradientSize*r.min()*o,n=this._options.start.clone().multiply(r),l=this._options.end.clone().multiply(r),s=l.clone().subtract(n),d=n.clone().add(s.clone().divide(2)),u=s.len(),_=s.clone().divide(u),f=d.clone().add((a+i)*_.y,-(a+i)*_.x),c=d.clone().add(-(a+i)*_.y,(a+i)*_.x),g=t.createLinearGradient(f.x,f.y,c.x,c.y),y=c.clone().subtract(f).len();g.addColorStop(0,'#000000'),g.addColorStop(i/2/y,'#FFFFFF'),g.addColorStop(1-i/2/y,'#FFFFFF'),g.addColorStop(1,'#000000'),t.fillStyle=g,t.fillRect(0,0,e.width,e.height)},t.prototype._applyMask=function(e,t){for(var o=t.getContext(),r=e.getCanvas(),a=e.getContext(),n=this._blurredRenderTarget.getContext(),l=this._maskRenderTarget.getContext(),s=a.getImageData(0,0,r.width,r.height),d=s.data,p=n.getImageData(0,0,r.width,r.height).data,u=l.getImageData(0,0,r.width,r.height).data,_=void 0,f=0;f<4*(r.width*r.height);f+=4)_=u[f]/255,d[f]=_*d[f]+(1-_)*p[f],d[f+1]=_*d[f+1]+(1-_)*p[f+1],d[f+2]=_*d[f+2]+(1-_)*p[f+2];o.putImageData(s,0,0)},t}(p.Engine.Filter);g.prototype.availableOptions={blurRadius:{type:f.NUMBER,default:30,uniformType:c.FLOAT},size:{type:f.NUMBER,default:50,uniformType:c.FLOAT},gradientSize:{type:f.NUMBER,default:50,uniformType:c.FLOAT},start:{type:f.VECTOR2,default:new p.Vector2(0,0.5),uniformType:c.FLOAT2},end:{type:f.VECTOR2,default:new p.Vector2(1,0.5),uniformType:c.FLOAT2},delta:{type:f.VECTOR2,default:new p.Vector2(1,1),uniformType:c.FLOAT2},texSize:{type:f.VECTOR2,default:new p.Vector2(100,100),uniformType:c.FLOAT2}},t.default=g},function(e){e.exports='/*\n * Based on evanw\'s glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(8),_=r(u),f=o(7),c=r(f),g=o(196),y=r(g),h=p.Constants.OptionType,m=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._lastBlurRadius=n._options.blurRadius,n._lastGradientRadius=n._options.gradientRadius,n._horizontalFilter=new y.default,n._verticalFilter=new y.default,n._sprite.setFilters([n._horizontalFilter,n._verticalFilter]),n._horizontalFilter.setDelta(new p.Vector2(1,1)),n._verticalFilter.setDelta(new p.Vector2(-1,1)),n._filter=new y.default,n}return(0,d.default)(t,e),t.prototype.rotate=function(e){var t=this._options.position;90===e?(t.flip(),t.x=1-t.x):-90===e&&(t.flip(),t.y=1-t.y),this.set({position:t})},t.prototype.flip=function(e){var t=this._options.position;'horizontal'===e?t.x=1-t.x:'vertical'===e?t.y=1-t.y:void 0,this.set({position:t})},t.prototype.transform=function(e){var t=this,o={},r=this.getPosition();o.position=e.applyToRelativePoint(r),['radius','blurRadius','gradientRadius'].forEach(function(r){var a=t.getOption(r);o[r]=e.applyToRelativeSize(a)}),this.set(o,!1)},t.prototype._renderWebGL=function(e){var t=e.getDimensions(),o=t.min(),r=this._options,a=r.position,i=r.blurRadius,n=r.radius,l=r.gradientRadius,s={blurRadius:i*o,radius:n*o,gradientRadius:l*o,position:a.clone().multiply(t),texSize:t};return this._horizontalFilter.set(s),this._verticalFilter.set(s),this._renderTexture.render(this._container),c.default.resolve()},t.prototype._renderCanvas=function(e){var t=this._options,o=t.blurRadius,r=t.radius,a=t.gradientRadius,i=t.position,n=e.getDimensions();return this._filter.set({blurRadius:o,radius:r,gradientRadius:a,position:i,texSize:n}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),c.default.resolve()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},t}(_.default);m.identifier='radial-focus',m.prototype.availableOptions={position:{type:h.VECTOR2,default:new p.Vector2(0.5,0.5)},radius:{type:h.NUMBER,default:0.25},gradientRadius:{type:h.NUMBER,default:0.125},blurRadius:{type:h.NUMBER,default:0.025}},t.default=m},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(34),_=r(u),f=p.Constants.UniformType,c=p.Constants.OptionType,g=function(e){function t(){(0,i.default)(this,t);for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];var s=(0,l.default)(this,e.call.apply(e,[this].concat(a)));return s._fragmentSource=o(197),s._lastBlurRadius=null,s._lastGradientRadius=null,s._lastPosition=new p.Vector2,s._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),s._maskRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),s}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(a);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions()),(!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||i)&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,o)},t.prototype._blurImage=function(e){var t=e.getCanvas(),o=e.getContext(),r=new p.Vector2(t.width,t.height),a=o.getImageData(0,0,t.width,t.height);_.default.stackBlurCanvasRGBA(a,0,0,t.width,t.height,this._options.blurRadius*r.min());var i=this._blurredRenderTarget.getContext();i.putImageData(a,0,0)},t.prototype._renderMask=function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),o=new p.Vector2(e.width,e.height),r=this._maskRenderTarget.getPixelRatio(),a=this._options.position.clone().multiply(o),i=this._options,n=i.radius,l=i.gradientRadius;n*=e.height,l*=e.height;var s=t.createRadialGradient(a.x,a.y,0,a.x,a.y,(n+l)*r);s.addColorStop(0,'#FFFFFF'),s.addColorStop(n/(n+l),'#FFFFFF'),s.addColorStop(1,'#000000'),t.fillStyle=s,t.fillRect(0,0,o.x,o.y)},t.prototype._applyMask=function(e,t){for(var o=t.getContext(),r=e.getCanvas(),a=e.getContext(),n=this._blurredRenderTarget.getContext(),l=this._maskRenderTarget.getContext(),s=a.getImageData(0,0,r.width,r.height),d=s.data,p=n.getImageData(0,0,r.width,r.height).data,u=l.getImageData(0,0,r.width,r.height).data,_=void 0,f=0;f<4*(r.width*r.height);f+=4)_=u[f]/255,d[f]=_*d[f]+(1-_)*p[f],d[f+1]=_*d[f+1]+(1-_)*p[f+1],d[f+2]=_*d[f+2]+(1-_)*p[f+2];o.putImageData(s,0,0)},t}(p.Engine.Filter);g.prototype.availableOptions={blurRadius:{type:c.NUMBER,default:30,uniformType:f.FLOAT},radius:{type:c.NUMBER,default:50,uniformType:f.FLOAT},gradientRadius:{type:c.NUMBER,default:25,uniformType:f.FLOAT},position:{type:c.VECTOR2,default:new p.Vector2(0.5,0.5),uniformType:f.FLOAT2},delta:{type:c.VECTOR2,default:new p.Vector2(1,1),uniformType:f.FLOAT2},texSize:{type:c.VECTOR2,default:new p.Vector2(100,100),uniformType:f.FLOAT2}},t.default=g},function(e){e.exports='/*\n * Based on evanw\'s glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = smoothstep(\n      0.0, 1.0,\n      (abs(\n        distance(v_texCoord * u_texSize, u_position)\n      ) - u_radius) / (u_gradientRadius * 2.0)\n    ) * u_blurRadius;\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(8),_=r(u),f=o(7),c=r(f),g=o(199),y=r(g),h=p.Constants.OptionType,m=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._lastBlurRadius=n._options.blurRadius,n._lastControlPoint1=n._options.controlPoint1.clone(),n._lastControlPoint2=n._options.controlPoint2.clone(),n._horizontalFilter=new y.default,n._verticalFilter=new y.default,n._sprite.setFilters([n._horizontalFilter,n._verticalFilter]),n._horizontalFilter.setDelta(new p.Vector2(1,1)),n._verticalFilter.setDelta(new p.Vector2(-1,1)),n._filter=new y.default,n}return(0,d.default)(t,e),t.prototype.rotate=function(e){var t=this._options.controlPoint1,o=this._options.controlPoint2;90===e?(t.flip(),t.x=1-t.x,o.flip(),o.x=1-o.x):-90===e&&(t.flip(),t.y=1-t.y,o.flip(),o.y=1-o.y),this.set({controlPoint1:t,controlPoint2:o})},t.prototype.flip=function(e){var t=this._options.controlPoint1,o=this._options.controlPoint2;'horizontal'===e?(t.x=1-t.x,o.x=1-o.x):'vertical'===e?(t.y=1-t.y,o.y=1-o.y):void 0,this.set({controlPoint1:t,controlPoint2:o})},t.prototype.transform=function(e){var t=this,o={};['controlPoint1','controlPoint2'].forEach(function(r){var a=t.getOption(r);o[r]=e.applyToRelativePoint(a)}),['blurRadius'].forEach(function(r){var a=t.getOption(r);o[r]=e.applyToRelativeSize(a)}),this.set(o,!1)},t.prototype._renderWebGL=function(e){var t=e.getDimensions(),o=t.min(),r=this._options,a=r.blurRadius,i=r.controlPoint1,n=r.controlPoint2,l={blurRadius:a*o,controlPoint1:i,controlPoint2:n,texSize:t};return this._horizontalFilter.set(l),this._verticalFilter.set(l),this._renderTexture.render(this._container),c.default.resolve()},t.prototype._renderCanvas=function(e){var t=e.getDimensions(),o=this._options,r=o.blurRadius,a=o.controlPoint1,i=o.controlPoint2;return this._filter.set({blurRadius:r,controlPoint1:a.clone(),controlPoint2:i.clone(),texSize:t}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),c.default.resolve()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},t}(_.default);m.identifier='linear-focus',m.prototype.availableOptions={controlPoint1:{type:h.VECTOR2,default:new p.Vector2(0,0.5)},controlPoint2:{type:h.VECTOR2,default:new p.Vector2(1,0.5)},blurRadius:{type:h.NUMBER,default:0.025}},t.default=m},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(34),_=r(u),f=p.Constants.OptionType,c=p.Constants.UniformType,g=function(e){function t(){(0,i.default)(this,t);for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];var s=(0,l.default)(this,e.call.apply(e,[this].concat(a)));return s._fragmentSource=o(200),s._lastBlurRadius=null,s._lastControlPoint1=new p.Vector2,s._lastControlPoint2=new p.Vector2,s._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),s._maskRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),s}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(a);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions()),this._lastControlPoint1.equals(this._options.controlPoint1)&&this._lastControlPoint2.equals(this._options.controlPoint2)&&!i||(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,o)},t.prototype._blurImage=function(e){var t=e.getCanvas(),o=e.getContext(),r=new p.Vector2(t.width,t.height),a=o.getImageData(0,0,t.width,t.height);_.default.stackBlurCanvasRGBA(a,0,0,t.width,t.height,this._options.blurRadius*r.min());var i=this._blurredRenderTarget.getContext();i.putImageData(a,0,0)},t.prototype._renderMask=function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),o=new p.Vector2(e.width,e.height),r=this._options.controlPoint1.clone().multiply(o),a=this._options.controlPoint2.clone().multiply(o),i=t.createLinearGradient(r.x,r.y,a.x,a.y);i.addColorStop(0,'#FFFFFF'),i.addColorStop(1,'#000000'),t.fillStyle=i,t.fillRect(0,0,e.width,e.height)},t.prototype._applyMask=function(e,t){for(var o=t.getContext(),r=e.getCanvas(),a=e.getContext(),n=this._blurredRenderTarget.getContext(),l=this._maskRenderTarget.getContext(),s=a.getImageData(0,0,r.width,r.height),d=s.data,p=n.getImageData(0,0,r.width,r.height).data,u=l.getImageData(0,0,r.width,r.height).data,_=void 0,f=0;f<4*(r.width*r.height);f+=4)_=u[f]/255,d[f]=_*d[f]+(1-_)*p[f],d[f+1]=_*d[f+1]+(1-_)*p[f+1],d[f+2]=_*d[f+2]+(1-_)*p[f+2];o.putImageData(s,0,0)},t}(p.Engine.Filter);g.prototype.availableOptions={blurRadius:{type:f.NUMBER,default:30,uniformType:c.FLOAT},controlPoint1:{type:f.VECTOR2,default:new p.Vector2(0,0.5),uniformType:c.FLOAT2},controlPoint2:{type:f.VECTOR2,default:new p.Vector2(1,0.5),uniformType:c.FLOAT2},delta:{type:f.VECTOR2,default:new p.Vector2(1,1),uniformType:c.FLOAT2},texSize:{type:f.VECTOR2,default:new p.Vector2(100,100),uniformType:c.FLOAT2}},t.default=g},function(e){e.exports='/*!\n * Based on evanw\'s glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      _sample.rgb *= _sample.a;\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(23),i=r(a),n=o(0),p=r(n),u=o(1),_=r(u),f=o(2),c=r(f),g=o(3),y=o(8),h=r(y),m=g.Constants.OptionType,x;x=window.Image;var T=function(e){function t(){(0,p.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var i=(0,_.default)(this,e.call.apply(e,[this].concat(r)));return i._colorOverlayFilter=new g.Engine.Filters.ColorOverlayFilter({color:i.getTintColor()}),i._frameContainer=new g.Engine.Container,i._resetSprites(),i._options.frame&&i._createSpritesForFrame(i._options.frame),i}return(0,c.default)(t,e),t.prototype._resetSprites=function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}},t.prototype._createSpritesForFrame=function(e){var t=this;if(!e)return this._disposeSprites();var o=e.imageGroups,r=e.layoutMode;this._layoutMode=r||'horizontal-inside',this._disposeSprites(),['top','left','right','bottom'].forEach(function(e){'undefined'==typeof o[e]||['start','mid','end'].forEach(function(r){if('undefined'!=typeof o[e][r]){var a=o[e][r];'image'in a&&(a=a.image);var i=g.Engine.Texture.fromImage(a),n=new g.Engine.Sprite(i);t._spriteGroups[e][r]=n,t._sprites.push(n),t._frameContainer.addChild(n)}})})},t.prototype._render=function(e){var t=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(e)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(t):(this._frameRenderTexture=new g.Engine.RenderTexture(this._sdk.getRenderer(),t.x,t.y),this._frameSprite=new g.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),g.Promise.resolve(this._renderTexture)},t.prototype._updateSprites=function(e){var t=e.getDimensions();this._frameWidth=l(e.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(e,'top',0),this._updateHorizontalSpriteGroup(e,'bottom',t.y-this._frameWidth),this._updateVerticalSpriteGroup(e,'left',0),this._updateVerticalSpriteGroup(e,'right',t.x-this._frameWidth)},t.prototype._updateHorizontalSpriteGroup=function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=e.getDimensions(),a='vertical-inside'===this._layoutMode,n=this._spriteGroups[t].start,p=this._spriteGroups[t].mid,u=this._spriteGroups[t].end,_=0,f=0,c,y;if(n){c=n.getTexture().getDimensions(),y=c.y/c.x,_=d(this._frameWidth/y);var h=new g.Vector2(0,o);h.x=a?this._frameWidth:0,n.setPosition(h),n.setHeight(this._frameWidth),n.setWidth(_)}if(u){c=u.getTexture().getDimensions(),y=c.y/c.x,f=d(this._frameWidth*y);var m=new g.Vector2(r.x-f,o);m.x-=a?this._frameWidth:0,u.setPosition(m),u.setHeight(this._frameWidth),u.setWidth(f)}if(p){c=p.getTexture().getDimensions(),y=c.y/c.x;var x=new g.Vector2(_,o),T=r.x-_-f;if(a&&(x.x+=this._frameWidth,T-=2*this._frameWidth),p.setPosition(x),p.setWidth(T),p.setHeight(this._frameWidth),'repeat'===this._options.frame.imageGroups[t].mid.mode){var v=this._frameWidth/y,b=l(T/v),C=0;if(-1!==b){var R=s(T/b);p.setWidth(R),C+=R,this._ensureRepeatSpritesExist(b-1,t,p);for(var O=0;O<b-1;O++){R=s((T-C)/(b-O-1));var i=this._repeatSprites[t][O],E=x.clone().add(C,0).floor();i.setPosition(E),i.setWidth(R),i.setHeight(this._frameWidth),C+=R}}}}},t.prototype._ensureRepeatSpritesExist=function(e,t,o){var r=this;o.getTexture().setMaxListeners(e+1);var a=this._repeatSprites[t].length;if(e>a)for(var n=0,i;n<e-a;n++)i=new g.Engine.Sprite(o.getTexture()),this._repeatSprites[t].push(i),this._frameContainer.addChild(i),this._sprites.push(i);else if(e<a){var l=this._repeatSprites[t].splice(e);l.forEach(function(e){var t=r._sprites.indexOf(e);-1===t||(r._sprites.splice(t,1),r._frameContainer.removeChild(e),e.dispose())})}},t.prototype._updateVerticalSpriteGroup=function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=e.getDimensions(),a='horizontal-inside'===this._layoutMode,n=this._spriteGroups[t].start,p=this._spriteGroups[t].mid,u=this._spriteGroups[t].end,_=0,f=0,c,y;if(n){c=n.getTexture().getDimensions(),y=c.y/c.x,_=d(this._frameWidth*y);var h=new g.Vector2(o,0);h.y=a?this._frameWidth:0,n.setPosition(h),n.setWidth(this._frameWidth),n.setHeight(_)}if(u){c=u.getTexture().getDimensions(),y=c.y/c.x,f=d(this._frameWidth*y);var m=new g.Vector2(o,r.y-f);m.y-=a?this._frameWidth:0,u.setPosition(m),u.setWidth(this._frameWidth),u.setHeight(f)}if(p){c=p.getTexture().getDimensions(),y=c.y/c.x;var x=new g.Vector2(o,_),T=r.y-_-f;if(a&&(x.y+=this._frameWidth,T-=2*this._frameWidth),p.setPosition(x),p.setHeight(T),p.setWidth(this._frameWidth),'repeat'===this._options.frame.imageGroups[t].mid.mode){var v=this._frameWidth*y,b=l(T/v),C=0;if(-1!==b){var R=s(T/b);p.setHeight(R),C+=R,this._ensureRepeatSpritesExist(b-1,t,p);for(var O=0;O<b-1;O++){R=s((T-C)/(b-O-1));var i=this._repeatSprites[t][O],E=x.clone().add(0,C).floor();i.setPosition(E),i.setHeight(R),i.setWidth(this._frameWidth),C+=R}}}}},t.prototype._disposeSprites=function(){var e=this;this._sprites.forEach(function(t){e._frameContainer.removeChild(t);var o=t.getTexture().getBaseTexture();o.dispose(),t.dispose()}),this._resetSprites()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._disposeSprites()},t.validateFrame=function(e){if(e){var t=e.imageGroups,o=e.layoutMode;if('string'!=typeof e.identifier)throw new Error('Frame needs a property `identifier` of type String.');if('object'!==(0,i.default)(e.imageGroups))throw new Error('Frame needs a property `imageGroups` of type Object.');var r=function(e){var o=t[e],r=o.start,a=o.end,n=o.mid;if('undefined'!=typeof t[e]){if('object'!==(0,i.default)(t[e]))throw new Error('Frame: `imageGroups.'+e+'` needs to be of type Object.');if('undefined'!=typeof r&&!(r instanceof x||'undefined'!=typeof HTMLImageElement&&r instanceof HTMLImageElement))throw new Error('Frame: `imageGroups.'+e+'.start` needs to be of type Image.');if('undefined'!=typeof n&&!(r instanceof x||'undefined'!=typeof HTMLImageElement&&r instanceof HTMLImageElement)&&'object'!==('undefined'==typeof n?'undefined':(0,i.default)(n)))throw new Error('Frame: `imageGroups.'+e+'.mid` needs to be of type Image or Object.');if('undefined'!=typeof a&&!(a instanceof x||'undefined'!=typeof HTMLImageElement&&a instanceof HTMLImageElement))throw new Error('Frame: `imageGroups.'+e+'.end` needs to be of type Image.')}};if('undefined'!=typeof o&&-1===['vertical-inside','horizontal-inside'].indexOf(o))throw new Error('Frame: `layoutMode` must be one of vertical-inside, horizontal-inside');if('undefined'!=typeof tintable&&'boolean'!=typeof tintable)throw new Error('Frame: `tintable` needs to be of type Boolean.');r('top'),r('left'),r('right'),r('bottom')}},t}(h.default);T.identifier='frame',T.prototype.availableOptions={frame:{type:m.OBJECT,validation:T.validateFrame,setter:function(e,t){return t||this._createSpritesForFrame(e),e}},alpha:{type:m.NUMBER,default:1},tintColor:{type:m.COLOR,default:new g.Color(1,1,1,0)},scale:{type:m.NUMBER,default:0.1}},t.default=T},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(8),_=r(u),f=o(43),c=r(f),g=o(203),y=r(g),h=o(204),m=r(h),x=o(94),T=r(x),v=p.Constants.OptionType,b=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));n._onSpriteUpdate=n._onSpriteUpdate.bind(n);var s=n._options.sprites.slice();return s.forEach(function(e){n.removeSprite(e),n.addSprite(e)}),n}return(0,d.default)(t,e),t.prototype.getSpritesOfType=function(e){return this._options.sprites.filter(function(t){return t instanceof e})},t.prototype.rotate=function(e){this._options.sprites.forEach(function(t){t.applyRotation(e)})},t.prototype.flip=function(e){this._options.sprites.forEach(function(t){t.applyFlip(e)})},t.prototype._onSpriteUpdate=function(){this.setDirty(!0)},t.prototype._applyRotation=function(e,t){this._options.sprites.forEach(function(o){return o.applyRotation(e,t)})},t.prototype.transform=function(e){this._options.sprites.forEach(function(t){return t.applyTransform(e)})},t.prototype.scale=function(e){this._options.sprites.forEach(function(t){return t.applyScale(e)})},t.prototype.serializeOption=function(t){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return'sprites'===t?this._options.sprites.map(function(e){return e.serializeOptions(void 0,o)}):e.prototype.serializeOption.call(this,t,o)},t.prototype.createSticker=function(e){return new y.default(this,e)},t.prototype.createText=function(e){return new m.default(this,e)},t.prototype.createBrush=function(e){return new T.default(this,e)},t.prototype.addSprite=function(e){this._options.sprites.push(e),this._container.addChild(e.getDisplayObject()),this.setDirty(!0),e.on('update',this._onSpriteUpdate)},t.prototype.removeSprite=function(e){var t=this._options.sprites,o=t.indexOf(e);return-1!==o&&(e.off('update',this._onSpriteUpdate),this._container.removeChild(e.getDisplayObject()),t.splice(o,1),this.setDirty(!0),!0)},t.prototype._render=function(e){var t=this,o=this._container,r=this._options.sprites,a=e.getDimensions().clone().floor();return p.Promise.all(r.map(function(e){return e.validateSettings()})).then(function(){r.forEach(function(e){return e.update(t._sdk,a)})}).then(function(){t._renderTexture.clear(),t._renderTexture.render(o)})},t.prototype.takeSpriteToFront=function(e){var t=this._options.sprites,o=t.indexOf(e);if(-1!==o){p.Utils.moveArrayItem(t,o,t.length-1);var r=e.getDisplayObject();this._container.removeChild(r),this._container.addChild(r),this.setDirty(!0)}},t.prototype.getSpritesAtPosition=function(e,t){var o=this,r=[];this._options.sprites.forEach(function(e){return e.update(o._sdk,t)});var a=this._sdk.getSprite(),n=a.getWorldTransform().applyInverseToVector(e),l=a.getTexture().getFrame(),s=l.width,d=l.height,p=a.getAnchor().clone().multiply(-s,-d);n.subtract(p);for(var u=this._options.sprites.slice(0).reverse(),_=0,i=u.length,f;_<i;_++)f=u[_],f.getHitTestDisplayObject().isAtPosition(n)&&r.push(f);return r},t.prototype.setDirtyForRenderer=function(t,o,r){e.prototype.setDirtyForRenderer.call(this,t,o,r),this._options.sprites.forEach(function(e){e.setDirtyForRenderer(t,o,r)})},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._options.sprites.forEach(function(e){e.dispose()})},t}(_.default);b.StickerSprite=y.default,b.TextSprite=m.default,b.BrushSprite=T.default,b.identifier='sprite',b.prototype.availableOptions={sprites:{type:v.ARRAY,default:[],setter:function(e,t){var o=this;if(e=e.map(function(e){if(e instanceof c.default)return e;var t=e.type;switch(delete e.type,t){case'text':return new m.default(o,e);case'sticker':return new y.default(o,e);case'brush':return new T.default(o,e);default:p.Log.error(o.constructor.name,'Invalid sprite type: '+e.type);}}),!t){if(this._options.sprites){var r=this._options.sprites.slice();r.forEach(function(e){e.dispose(),o.removeSprite(e)})}e.forEach(function(e){o.addSprite(e)})}return e}}},t.default=b},function(e,t,o){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var i=o(0),n=a(i),l=o(1),s=a(l),d=o(2),p=a(d),u=o(3),_=o(43),f=a(_),c=o(93),g=a(c),y=u.Constants.OptionType,h=u.Constants.RendererType,m=function(e){function t(){(0,n.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var i=(0,s.default)(this,e.call.apply(e,[this].concat(r))),l=i._options.image;return i._isSVG=l.src&&!!l.src.match(/\w+\.svg(?=\?|$)/i),i._isSVG&&(i._canvas=u.Utils.createCanvas(),i._context=i._canvas.getContext('2d')),l&&i._onImageUpdate(),i._tintFilter=new u.Engine.Filters.TintFilter,i._adjustmentsFilter=new g.default,i._lastRenderedDimensions=u.Vector2.NULL,i._lastRenderedInputDimensions=u.Vector2.NULL,i._onOptionsChange=i._onOptionsChange.bind(i),i._options.adjustments.on('updated',i._onOptionsChange),i._isSVG=l.src&&!!l.src.match(/\w+\.svg(?=\?|$)/i),i}return(0,p.default)(t,e),t.prototype.applyScale=function(e){this.setDimensions(this.getDimensions().multiply(e))},t.prototype.serializeOptions=function(t){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=e.prototype.serializeOptions.call(this,t,o);return t||(r.type='sticker'),r},t.prototype._rendersToRenderTexture=function(e){var t=this._options.smoothDownscaling&&!this._isSVG&&e.getRenderer().isOfType(h.WEBGL);return t||this._hasAdjustments()||'none'!==this._options.tintMode},t.prototype._getTexture=function(){return this._inputTexture},t.prototype.update=function(e,t){var o=this._options,r=o.dimensions,a=o.image;r.equals(u.Vector2.NULL)&&r.set(a.width,a.height);var i=!this._lastRenderedInputDimensions.equals(t)||!this._lastRenderedDimensions.equals(r)||this._lastRenderedImage!==a;if(i&&this._isSVG&&e.getRenderer().isOfType(h.WEBGL)){var n=e.getOutputDimensions();if(r.x>n.x||r.y>n.y){var l=u.Utils.resizeVectorToFit(r,n);a.width=l.x,a.height=l.y}else a.width=r.x,a.height=r.y;this._canvas.width=a.width,this._canvas.height=a.height,this._context.clearRect(0,0,a.width,a.height),this._context.drawImage(a,0,0,a.width,a.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(e)&&this._prepareRenderTexture(e);var s=[];if(this._rendersToRenderTexture(e)){if(this._hasAdjustments()){s.push(this._adjustmentsFilter);var d=this._options.adjustments,p=new u.ColorMatrix;p.multiply(u.ColorMatrix.createBrightnessMatrix(d.getBrightness())),p.multiply(u.ColorMatrix.createSaturationMatrix(d.getSaturation())),p.multiply(u.ColorMatrix.createContrastMatrix(d.getContrast())),this._adjustmentsFilter.set({colorMatrix:p})}this._options.tintMode&&'none'!==this._options.tintMode&&(s.push(this._tintFilter),this._tintFilter.set({mode:u.Engine.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor})),this._renderTextureSprite.setFilters(s)}this._rendersToRenderTexture(e)?this._renderToRenderTexture(e):this._sprite.setTexture(this._inputTexture),this._updateSprite(t),this._applyFlip(),this._lastRenderedDimensions.copy(r),this._lastRenderedInputDimensions.copy(t),this._lastRenderedImage=a},t.prototype._applyFlip=function(){var e=this._sprite.getScale();this._options.flipVertically&&(e.y*=-1),this._options.flipHorizontally&&(e.x*=-1),this._sprite.setScale(e)},t.prototype.applyFlip=function(t){e.prototype.applyFlip.call(this,t);var o={rotation:this._options.rotation},a=180*(o.rotation/r);o.rotation=-1*a*r/180,'horizontal'===t?(o.flipHorizontally=!this._options.flipHorizontally,this.set(o)):'vertical'===t?(o.flipVertically=!this._options.flipVertically,this.set(o)):void 0},t.prototype._hasAdjustments=function(){var e=this._options.adjustments;return 0!==e.getBrightness()||1!==e.getSaturation()||1!==e.getContrast()},t.prototype._onImageUpdate=function(){var e=this._options.image,t=this._operation.getSDK().getRenderer();this._isSVG&&t.isOfType(h.WEBGL)&&(e=this._canvas),this._inputTexture=u.Engine.Texture.fromImage(e),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)},t.prototype.setOption=function(t,o){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;e.prototype.setOption.call(this,t,o,r),'image'===t&&this._identitySprite&&this._onImageUpdate()},t.prototype._onOptionsChange=function(){var e=this._dirtiness;for(var t in e)e[t]=!0},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._inputTexture.getBaseTexture().dispose(),this._inputTexture=null,this._options.adjustments.off('updated',this._onOptionsChange)},t}(f.default);m.prototype.availableOptions={id:{type:y.STRING,default:function(){return u.Utils.getUUID()}},identifier:{type:y.STRING,default:''},image:{type:y.IMAGE,required:!0},position:{type:y.VECTOR2,default:u.Vector2.NULL},dimensions:{type:y.VECTOR2,default:u.Vector2.NULL},anchor:{type:y.VECTOR2,default:new u.Vector2(0,0)},pivot:{type:y.VECTOR2,default:new u.Vector2(0.5,0.5)},rotation:{type:y.NUMBER,default:0},flipHorizontally:{type:y.BOOLEAN,default:!1},flipVertically:{type:y.BOOLEAN,default:!1},smoothDownscaling:{type:y.BOOLEAN,default:!1},tintColor:{type:y.COLOR,default:u.Color.WHITE},tintMode:{type:y.STRING,default:'none',available:['none','solid','colorized']},alpha:{type:y.NUMBER,default:1},adjustments:{type:y.CONFIGURABLE,structure:{brightness:{type:y.NUMBER,default:0},saturation:{type:y.NUMBER,default:1},contrast:{type:y.NUMBER,default:1}}}},m.type='sticker',t.default=m},function(e,t,o){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var i=o(0),n=a(i),l=o(1),d=a(l),p=o(2),u=a(p),_=o(3),f=o(43),c=a(f),g=o(205),y=a(g),h=_.Constants.OptionType,m=_.Constants.RendererType,x=function(e){function t(){(0,n.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var i=(0,d.default)(this,e.call.apply(e,[this].concat(r)));return i._textRenderer=new y.default(i,i._operation),i._textRenderer.rotation=i.getRotation(),i._sprite.setTexture(i._textRenderer.getFinalTexture()),i._hitTestSprite.setTexture(i._textRenderer.getTexture()),i}return(0,u.default)(t,e),t.prototype.serializeOptions=function(t){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=e.prototype.serializeOptions.call(this,t,o);return t||(r.type='text'),r},t.prototype.getDOMStyle=function(e,t){var o=this.getFontSize()*t.y;return{fontWeight:this._options.fontWeight,fontSize:o+'px',fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:s(o*this.getLineHeight())+'px',color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}},t.prototype.getDimensions=function(e,t){return this._textRenderer.getDimensions(e,t)},t.prototype.applyFlip=function(t){e.prototype.applyFlip.call(this,t);var o=this._options.rotation;'horizontal'===t?(o+=2*(r-o),this.setRotation(o)):'vertical'===t?(o+=2*(r/2-o),this.setRotation(o)):void 0},t.prototype.applyTransform=function(t){e.prototype.applyTransform.call(this,t),this.set({fontSize:t.scaleSize(this.getFontSize(),'y'),maxWidth:t.scaleSize(this.getMaxWidth(),'x')},!1)},t.prototype.applyRotation=function(t){e.prototype.applyRotation.call(this,t);var o=(t+360)%360,r=this._operation.getInputDimensions();(90==o||270==o)&&(this.setMaxWidth(this.getMaxWidth()/r.x*r.y),this.setFontSize(this.getFontSize()/r.y*r.x))},t.prototype.setOption=function(t,o){return'rotation'===t?(this._options.rotation=o,this._textRenderer&&(this._textRenderer.rotation=o),void(this._rotation=o)):void e.prototype.setOption.call(this,t,o)},t.prototype.getOption=function(t){return'rotation'===t?this._rotation:e.prototype.getOption.call(this,t)},t.prototype.getHitTestDisplayObject=function(){return this._hitTestSprite},t.prototype.update=function(t,o){this._textRenderer.update(t,o);var r=this._textRenderer.getFinalTexture(),a=r.getBaseTexture();a.update();var i=t.getRenderer();i.isOfType(m.WEBGL)&&i.updateTexture(r.getBaseTexture()),e.prototype.update.call(this,t,o),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform()},t.prototype._getTexture=function(){return this._textRenderer.getFinalTexture()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._textRenderer.dispose()},t}(c.default);x.prototype.availableOptions={id:{type:h.STRING,default:function(){return _.Utils.getUUID()}},fontSize:{type:h.NUMBER,default:0.1},characterSpacing:{type:h.NUMBER,default:0},lineHeight:{type:h.NUMBER,default:1.1},fontIdentifier:{type:h.STRING},fontFamily:{type:h.STRING,default:'Times New Roman'},fontWeight:{type:h.ALL,default:'normal'},fontStyle:{type:h.STRING,default:'normal'},outlineWidth:{type:h.NUMBER,default:0},outlineColor:{type:h.COLOR,default:_.Color.BLACK},alignment:{type:h.STRING,default:'left',available:['left','center','right']},verticalAlignment:{type:h.STRING,default:'top',available:['top','center','bottom']},color:{type:h.COLOR,default:new _.Color(1,0,0,1)},backgroundColor:{type:h.COLOR,default:_.Color.TRANSPARENT},position:{type:h.VECTOR2,default:new _.Vector2(0.5,0.5)},anchor:{type:h.VECTOR2,default:new _.Vector2(0,0)},pivot:{type:h.VECTOR2,default:new _.Vector2(0.5,0.5)},rotation:{type:h.NUMBER,default:0},text:{type:h.STRING,required:!0},maxWidth:{type:h.NUMBER,default:0.5},maxHeight:{type:h.NUMBER,default:0}},x.type='text',t.default=x},function(e,r,a){'use strict';function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,'__esModule',{value:!0});var l=a(0),d=n(l),_=a(3),f=a(206),c=n(f),g=function(){function e(t,o){(0,d.default)(this,e),this._text=t,this._operation=o,this._textOptions={},this.rotation=0,this._createCanvas(),this._createMeasurementElement(),this._createTexture()}return e.prototype._createCanvas=function(){this._canvas=_.Utils.createCanvas(),this._context=this._canvas.getContext('2d'),this._textSplitter=new c.default(this._context),this._finalCanvas=_.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext('2d')},e.prototype._createMeasurementCanvas=function(){this._measurementCanvas=_.Utils.createCanvas(),this._measurementContext=this._measurementCanvas.getContext('2d')},e.prototype._createMeasurementElement=function(){var e=document.createElement('span');e.style.position='absolute',e.style.left='-9999px',e.style.top='-9999px',e.style.whiteSpace='nowrap',e.dataset&&(e.dataset.description='Measurement element for PhotoEditorSDK'),document.body.appendChild(e),this._measurementElement=e},e.prototype._createTexture=function(){this._texture=_.Engine.Texture.fromCanvas(this._canvas),this._finalTexture=_.Engine.Texture.fromCanvas(this._finalCanvas)},e.prototype._applyTextOptions=function(e,t){t.font=this._text.getFontStyle()+' '+this._text.getFontWeight()+' '+e.fontSize+'px '+this._text.getFontFamily(),t.textBaseline='top',t.textAlign=this._text.getAlignment(),t.fillStyle=this._text.getColor().toRGBA(),t.strokeStyle=this._text.getOutlineColor().toRGBA();var o=this._text.getOutlineWidth();0<o&&(t.lineWidth=o)},e.prototype._buildOutputLines=function(e){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines()},e.prototype._renderTextLine=function(e,t){var o=this._text.getAlignment(),r=this._textOptions,a=r.lineHeight,i=r.fontSize,n=new _.Vector2(0,t+a/2-i/2);'center'===o?n.x=this._canvas.width/2:'right'===o?n.x=this._canvas.width:void 0,this._context.fillText(e,n.x,n.y);var l=this._text.getOutlineWidth();0<l&&(this._context.miterLimit=2,this._context.strokeText(e,n.x,n.y))},e.prototype.update=function(e,t){var o=this.calculateFontStyles(e,t),r=this._calculateText(e,o,t),a=r.dimensions,i=r.lines;this._renderText(e,a,i,o,t),this._updateFinalTexture()},e.prototype._updateFinalTexture=function(){var e=this._canvas,r=e.width,a=e.height,n=this.rotation,l=o(n),s=t(n),d=new _.Vector2(i(r*l)+i(a*s),i(r*s)+i(a*l));this._finalCanvas.width=d.x,this._finalCanvas.height=d.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(n),this._finalContext.drawImage(this._canvas,-r/2,-a/2),this._finalContext.restore()},e.prototype._renderText=function(e,t,o,r,a){this._canvas.width=t.x,this._canvas.height=t.y,this._text.getMaxHeight()&&(this._canvas.height=p(this._text.getMaxHeight()*a.y,this._canvas.height)),this._context=this._canvas.getContext('2d'),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,t.x,t.y),this._applyTextOptions(r,this._context);for(var i=0,n;i<o.length;i++)n=o[i],this._renderTextLine(n,r.lineHeight*i)},e.prototype.calculateFontStyles=function(e,t){var o=this._text.getFontFamily(),r=this._text.getFontSize()*t.y,a=s(this._text.getLineHeight()*r),i={fontFamily:o,fontSize:r,lineHeight:a};return(this._textOptions.fontFamily!==o||this._textOptions.fontSize!==r||this._textOptions.lineHeight!==a)&&(this._maxTextHeight=null,this._textOptions=i),i},e.prototype._calculateText=function(e,t,o){var r=this._text.getMaxWidth()*o.x;this._applyTextOptions(t,this._context);var a=new _.Vector2,i=this._text.getText().split('\n');if('undefined'!=typeof r)a.x=r,i=this._buildOutputLines(r);else for(var n=0,l;n<i.length;n++)l=i[n],a.x=u(a.x,this._context.measureText(l).width);var s=t.lineHeight,d=1.1*this._getMaxTextHeight(e,t,o);return a.y+=i.length*s+u(0,d-s),{dimensions:a,lines:i}},e.prototype._getMaxTextHeight=function(e,t,o){return this._maxTextHeight?this._maxTextHeight:(this._maxTextHeight=this._getMaxTextHeightUsingDOM(e,t,o),this._maxTextHeight)},e.prototype._getMaxTextHeightUsingDOM=function(e,t,o){var r=this._text.getDOMStyle(e,o),a=this._measurementElement,i=['lineHeight'];for(var n in r)-1===i.indexOf(n)&&(a.style[n]=r[n]);return a.innerHTML='!"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~',a.offsetHeight},e.prototype._getMaxTextHeightUsingCanvas=function(e,t){var o=this._measurementCanvas,r=this._measurementContext,a=t.fontSize;o.width=10*a,o.height=2*a,this._applyTextOptions(t,this._measurementContext),r.textBaseline='middle',r.textAlign='center',r.fillStyle='black',r.clearRect(0,0,o.width,o.height);for(var i='!"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~',n=i.length,l=0,s;l<n;)s=i.substr(l,5),l+=5,r.fillText(s,o.width/2,o.height/2);var d=r.getImageData(0,0,o.width,o.height),p=d.data,u=null,_;for(_=0;_<o.height;_++){for(var f=!1,c=0;c<o.width;c++){var g=4*(_*o.width+c),y=p[g]+p[g+1]+p[g+2]+p[g+3];if(0<y){f=!0;break}}if(!f){u++;continue}break}var h=o.height;for(_=o.height-1;0<=_;_--){for(var m=!1,x=0;x<o.width;x++){var T=4*(_*o.width+x),v=p[T]+p[T+1]+p[T+2]+p[T+3];if(0<v){m=!0;break}}if(!m){h--;continue}break}return this._maxTextHeight=h-u,this._maxTextHeight},e.prototype.getTexture=function(){return this._texture},e.prototype.getFinalTexture=function(){return this._finalTexture},e.prototype.getDimensions=function(e,t){var o=this.calculateFontStyles(e,t),r=this._calculateText(e,o,t),a=r.dimensions;return a},e.prototype.dispose=function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture.getBaseTexture().dispose(),this._texture=null,this._finalTexture.getBaseTexture().dispose(),this._finalTexture=null},e}();r.default=g},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(t){(0,a.default)(this,e),this._context=t,this._lastFontStyle={}}return e.prototype.getLines=function(){for(var e=[],t=[],o=this._lines.length,r=0;r<o;r++){for(var a=this._lines[r],i=this._buildWords(a),n=i.length,l=0;l<n;l++){var s=i[l],d=t.concat(s).join('').replace(/\s+$/i,''),p=this._getWidth(d);if(p>this._maxWidth){0<t.length&&(e.push(t.join('')),t=[s]);var u=s.replace(/\s+$/i,'');if(this._getWidth(u)>this._maxWidth){var _=this._splitWord(s);e=e.concat(_.lines),_.rest&&(t=[_.rest])}}else t.push(s)}e.push(t.join('')),t=[]}return e},e.prototype._buildWords=function(e){for(var t=[],o='',r=e.length,a=0,i;a<r;a++)i=e[a],o+=i,(' '===i||'-'===i||a===r-1)&&(t.push(o),o='');return t},e.prototype._splitWord=function(e){for(var t={lines:[],rest:null},o=e.length,r=[],a=0,i;a<o;a++)i=e[a],this._getWidth(r.concat(i).join(''))>this._maxWidth?(0<r.length&&t.lines.push(r.join('')),r=[i]):r.push(i),a===o-1&&0<r.length&&(t.rest=r.join(''));return t},e.prototype._fontStyleChanged=function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)},e.prototype._getWidth=function(e){return this._context.measureText(e).width},e.prototype.setText=function(e){this._text=e,this._lines=e.split('\n')},e.prototype.setMaxWidth=function(e){this._maxWidth=e},e}();t.default=i},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),s=r(n),d=o(2),u=r(d),_=o(3),f=o(208),c=r(f),g=_.Constants.OptionType,y=function(e){function t(o,r,a){(0,i.default)(this,t);var n=(0,s.default)(this,e.call(this,r));return n._operation=o,n._canvas=a||_.Utils.createCanvas(),n._context=n._canvas.getContext('2d'),n}return(0,u.default)(t,e),t.prototype.serializeOption=function(t){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return'controlPoints'===t?this._options.controlPoints.map(function(e){var t=e.getPosition();return o?t.toObject():t.clone()}):e.prototype.serializeOption.call(this,t,o)},t.prototype._optionEquals=function(t,o){if('controlPoints'===t){for(var r=this._options.controlPoints,a=0,i=r.length;a<i;a++)if(!r[a].getPosition().equals(o[a]))return!1;return!0}return e.prototype._optionEquals.call(this,t,o)},t.prototype.render=function(e){var t=this._options,o=t.controlPoints,r=t.size;if(!(2>o.length)){_.Utils.ensureCanvasDimensions(this._canvas,e),this._brush&&this._lastBrushSize===r&&e.equals(this._brushInputDimensions)||(this._brushInputDimensions=e.clone(),this._lastBrushSize=r);for(var a=o[0],n=a,l=1;l<o.length;l++)n=o[l],n.renderToCanvas(this._options.brush.getBrushImage(e),this._canvas,a),a=n}},t.prototype._createBrush=function(e){var t=this._options,o=t.size,r=t.hardness,a=t.color,i=_.Utils.createCanvas();i.width=i.height=l(o*e.min());var n=i.getContext('2d');if(a=a.clone(),a.a=1,1===i.width)n.fillStyle=a.toRGBA(),n.fillRect(0,0,1,1);else{var s=n.createRadialGradient(i.width/2,i.height/2,p(i.width/2-1,i.width/2*r),i.width/2,i.height/2,i.width/2);s.addColorStop(0,a.toRGBA());var d=a.clone();d.a=0,s.addColorStop(1,d.toRGBA()),n.fillStyle=s,n.fillRect(0,0,i.width,i.height)}return i},t.prototype.addControlPoint=function(e){var t=new c.default(this,e);this._options.controlPoints.push(t),this.emit('update',this)},t.prototype.getCanvas=function(){return this._canvas},t.prototype.setCanvas=function(e){this._canvas=e,this._context=e.getContext('2d')},t.prototype.setDirty=function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(function(e){e.setDirty()})},t.prototype.forEachControlPoint=function(e){this._options.controlPoints.forEach(e)},t.prototype.renderToCanvas=function(e){var t=e.getContext('2d');t.save(),t.globalAlpha=this._options.brush.getColor().a,t.drawImage(this._canvas,0,0),t.restore()},t.prototype.getCanvasDimensions=function(){return this._canvasDimensions},t}(_.Configurable);y.prototype.availableOptions={id:{type:g.STRING,default:function(){return _.Utils.getUUID()}},brush:{type:g.OBJECT,required:!0},controlPoints:{type:g.ARRAY,default:[]},closed:{type:g.BOOLEAN,default:!1}},t.default=y},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),n=o(3),i=function(){function e(t,o){(0,a.default)(this,e),this._path=t,this._drawnCanvases=[],this._position=o}return e.prototype.renderToCanvas=function(e,o,r){if(-1===this._drawnCanvases.indexOf(o)){for(var a=new n.Vector2(o.width,o.height),l=o.getContext('2d'),s=this._position.clone().multiply(a),d=r.getPosition().clone().multiply(a),_=s.clone().subtract(d).len(),f=e.width/10,c=0;c<=_;){var i=u(0,p(1,c/_)),t=d.x+(s.x-d.x)*i,g=d.y+(s.y-d.y)*i;l.drawImage(e,t-e.width/2,g-e.height/2,e.width,e.height),c+=f}this._drawnCanvases.push(o)}},e.prototype.setPosition=function(e){this._position=e},e.prototype.getPosition=function(){return this._position.clone()},e.prototype.setDirty=function(){this._drawnCanvases=[]},e}();t.default=i},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),s=r(n),d=o(2),u=r(d),_=o(3),f=o(95),c=r(f),g=_.Constants.OptionType,y=function(e){function t(){return(0,i.default)(this,t),(0,s.default)(this,e.apply(this,arguments))}return(0,u.default)(t,e),t.prototype.getBrushImage=function(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;var t=this._options,o=t.size,r=t.hardness,a=t.color,i=_.Utils.createCanvas();i.width=i.height=l(o*e.min());var n=i.getContext('2d');if(a=a.clone(),a.a=1,1===i.width)n.fillStyle=a.toRGBA(),n.fillRect(0,0,1,1);else{var s=n.createRadialGradient(i.width/2,i.height/2,p(i.width/2-1,i.width/2*r),i.width/2,i.height/2,i.width/2);s.addColorStop(0,a.toRGBA());var d=a.clone();d.a=0,s.addColorStop(1,d.toRGBA()),n.fillStyle=s,n.fillRect(0,0,i.width,i.height)}return this._lastOptions=this.serializeOptions(['size','color','hardness']),this._brush=i,this._lastInputDimensions=e.clone(),i},t}(c.default);t.default=y,y.identifier='imgly_brush_radial',y.prototype.availableOptions=_.Utils.extend(c.default.prototype.availableOptions,{hardness:{type:g.NUMBER,default:1}})},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(8),_=r(u),f=p.Constants.OptionType,c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._watermarkSprite=new p.Engine.Sprite,n._watermarkSprite.setAnchor(0.5,0.5),n._container.addChild(n._watermarkSprite),n}return(0,d.default)(t,e),t.prototype._render=function(e){this._watermarkTexture||(this._watermarkTexture=p.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var t=e.getDimensions(),o=this._options.image,r=o.width,a=o.height,i=p.Utils.resizeVectorToFit(new p.Vector2(r,a),t);return this._watermarkSprite.setPosition(t.clone().divide(2)),this._watermarkSprite.setWidth(i.x),this._watermarkSprite.setHeight(i.y),this._renderTexture.render(this._container),p.Promise.resolve()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._watermarkSprite.dispose()},t}(_.default);c.identifier='watermark',c.prototype.availableOptions={image:{type:f.OBJECT,required:!0}},t.default=c},function(e,t,o){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var i=o(0),n=a(i),l=o(1),s=a(l),d=o(2),p=a(d),u=o(3),_=o(7),f=a(_),c=o(21),g=a(c),y=o(8),h=a(y),m=u.Constants.OptionType,x=function(e){function t(){return(0,n.default)(this,t),(0,s.default)(this,e.apply(this,arguments))}return(0,p.default)(t,e),t.prototype._getRotation=function(){var e=0;switch(this.getTags().Orientation){case 7:case 8:e=-90;break;case 3:case 4:e=-180;break;case 5:case 6:e=90;}return e},t.prototype._getFlipVertically=function(){var e=this.getTags(),t=e.Orientation;return-1!==[5,7].indexOf(t)},t.prototype._getFlipHorizontally=function(){var e=this.getTags(),t=e.Orientation;return-1!==[2,4].indexOf(t)},t.prototype._getFinalOptions=function(){return{rotation:this._getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}},t.prototype._render=function(){var e=this._getFinalOptions(),t=e.rotation%360;this._sprite.setScale(e.flipHorizontally?-1:1,e.flipVertically?-1:1),this._sprite.setRotation(t*(r/180)),this._sprite.setAnchor(0.5,0.5),this._sprite.updateTransform();var o=this._sprite.getBounds();return this._renderTexture.resizeTo(new g.default(o.width,o.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),f.default.resolve()},t.prototype.getNewDimensions=function(e){var t=this._getFinalOptions();return e=e.clone(),t.rotation%180&&e.flip(),e},t}(h.default);x.identifier='exif-orientation',x.prototype.availableOptions={tags:{type:m.OBJECT,default:{}}},t.default=x},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(8),_=r(u),f=o(94),c=r(f),g=o(7),y=r(g),h=o(96),m=r(h),x=o(214),T=r(x),v=p.Constants.OptionType,b=p.Constants.RendererType,C=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r))),s=n._sdk.getRenderer();n._lastBlurRadius=null,n._blurredRenderTexture=new p.Engine.RenderTexture(s,100,100,1),n._maskRenderTexture=new p.Engine.RenderTexture(s,100,100,1),n._brushSprite=new c.default(n),n._brushSpriteContainer=new p.Engine.Container;var d=n._brushSprite.getDisplayObject();if(n._brushSpriteContainer.addChild(d),n._outputSprite=new p.Engine.Sprite,n._outputContainer=new p.Engine.Container,n._outputContainer.addChild(n._outputSprite),n._maskFilter=new T.default,s.isOfType(b.WEBGL)){n._horizontalFilter=new m.default,n._verticalFilter=new m.default,n._sprite.setFilters([n._horizontalFilter,n._verticalFilter]),n._horizontalFilter.setDelta(new p.Vector2(1,1)),n._verticalFilter.setDelta(new p.Vector2(-1,1));var u=n._maskRenderTexture.getBaseTexture();u.setGLUnit(n._maskFilter.getMaskImage()),s.updateTexture(u,!1),u=n._blurredRenderTexture.getBaseTexture(),u.setGLUnit(n._maskFilter.getFilterImage()),s.updateTexture(u,!1)}else s.isOfType(b.CANVAS)&&(n._blurFilter=new m.default,n._sprite.setFilters([n._blurFilter]),n._maskFilter.setMaskCanvas(n._maskRenderTexture.getRenderTarget().getCanvas()),n._maskFilter.setFilterCanvas(n._blurredRenderTexture.getRenderTarget().getCanvas()));return n._outputSprite.setFilters([n._maskFilter]),n}return(0,d.default)(t,e),t.prototype.flip=function(e){this._brushSprite.applyFlip(e),this.setDirty(!0,!0),this._lastBlurRadius=null},t.prototype.rotate=function(e){this._brushSprite.applyRotation(e),this.setDirty(!0,!0),this._lastBlurRadius=null},t.prototype.transform=function(e,t){this._brushSprite.applyTransform(e,t),this.setDirty(!0,!0),this._lastBlurRadius=null},t.prototype._render=function(e){return this._renderBlur(e),this._renderMask(e),this._outputSprite.setTexture(e),this._renderTexture.render(this._outputContainer),y.default.resolve()},t.prototype._renderMask=function(e){var t=e.getDimensions(),o=this._maskRenderTexture.getDimensions();o.equals(t)||this._maskRenderTexture.resizeTo(t),this._brushSprite.update(this._sdk,t),this._maskRenderTexture.clear(p.Color.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var r=this._sdk.getRenderer();r.isOfType(b.WEBGL)&&r.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)},t.prototype._renderBlur=function(e){var t=e.getDimensions(),o=this._blurredRenderTexture.getDimensions();o.equals(t)||this._blurredRenderTexture.resizeTo(t);var r=this._options.blurRadius;if(this._lastBlurRadius!==r||!o.equals(t)){var a=this._sdk.getRenderer(),i;if(a.isOfType(b.WEBGL)){var n=t.min();i={blurRadius:r*n,texSize:t},this._horizontalFilter.set(i),this._verticalFilter.set(i)}else a.isOfType(b.CANVAS)&&(i={blurRadius:r},this._blurFilter.set(i));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=r}},t.prototype.getBrush=function(){return this._brushSprite},t.prototype.createPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,o=new c.default.Brushes.RadialBrush({size:e,hardness:t,color:p.Color.WHITE}),r=this._brushSprite.createPath(o);return this._options.paths.push(r),this.setDirty(!0),r},t.prototype.setDirtyForRenderer=function(t,o,r){e.prototype.setDirtyForRenderer.call(this,t,o,r),this._brushSprite.setDirtyForRenderer(t,o,r)},t.prototype.dispose=function(){e.prototype.dispose.call(this);var t=this._sdk.getRenderer();t.isOfType(b.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()},t}(_.default);C.identifier='selective-blur',C.prototype.availableOptions={blurRadius:{type:v.NUMBER,default:0.05},paths:{type:v.ARRAY,default:[],setter:function(e){return this._brushSprite&&this._brushSprite.setPaths(e),e}}},t.default=C},function(e){e.exports='/*\n * Based on evanw\'s glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=p.Constants.OptionType,_=p.Constants.UniformType,f=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(215),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){for(var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),n=t.getContext(),l=o.getContext(),s=this._options,d=s.maskCanvas,p=s.filterCanvas,u=d.getContext('2d'),_=p.getContext('2d'),f=u.getImageData(0,0,a.width,a.height).data,c=n.getImageData(0,0,a.width,a.height),g=c.data,y=_.getImageData(0,0,a.width,a.height).data,h=void 0,m=0;m<4*(a.width*a.height);m+=4)h=f[m]/255,g[m]=h*y[m]+(1-h)*g[m],g[m+1]=h*y[m+1]+(1-h)*g[m+1],g[m+2]=h*y[m+2]+(1-h)*g[m+2];l.putImageData(c,0,0)},t}(p.Engine.Filter);f.prototype.availableOptions={maskImage:{type:u.NUMBER,default:1,uniformType:_.INT},maskCanvas:{type:u.OBJECT,default:null},filterImage:{type:u.NUMBER,default:2,uniformType:_.INT},filterCanvas:{type:u.OBJECT,default:null}},t.default=f},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(8),_=r(u),f=o(7),c=r(f),g=o(96),y=r(g),h=p.Constants.OptionType,m=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._lastBlurRadius=n._options.blurRadius,n._horizontalFilter=new y.default,n._verticalFilter=new y.default,n._sprite.setFilters([n._horizontalFilter,n._verticalFilter]),n._horizontalFilter.setDelta(new p.Vector2(1,1)),n._verticalFilter.setDelta(new p.Vector2(-1,1)),n._filter=new y.default,n}return(0,d.default)(t,e),t.prototype._renderWebGL=function(e){var t=e.getDimensions(),o=t.min(),r=this._options.blurRadius,a={blurRadius:r*o,texSize:t};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),c.default.resolve()},t.prototype._renderCanvas=function(e){var t=this._options.blurRadius,o=e.getDimensions();return this._filter.set({blurRadius:t,texSize:o}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),c.default.resolve()},t.prototype.transform=function(e){var t=this.getBlurRadius(),o=e.applyToRelativeSize(t);this.set({blurRadius:o},!1)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},t}(_.default);m.identifier='blur',m.prototype.availableOptions={blurRadius:{type:h.NUMBER,default:0.025}},t.default=m},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(8),_=r(u),f=p.Engine.Filters.OverlayFilter,c=p.Constants.OptionType,g=p.Constants.RendererType,y=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._overlayTexture=p.Engine.Texture.fromImage(n._options.image),n._overlayContainer=new p.Engine.Container,n._overlaySprite=new p.Engine.Sprite,n._overlaySprite.setTexture(n._overlayTexture),n._overlaySprite.setAnchor(0,0),n._overlayContainer.addChild(n._overlaySprite),n._overlayFilter=new p.Engine.Filters.OverlayFilter({overlayImage:n._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:n._overlayTexture}),n._sprite.setFilters([n._overlayFilter]),n._renderedOverlaySprite=new p.Engine.Sprite,n._renderedOverlayContainer=new p.Engine.Container,n._renderedOverlayContainer.addChild(n._renderedOverlaySprite),n._overlayRendered=!1,n._lastInputDimensions=new p.Vector2(0,0),n}return(0,d.default)(t,e),t.prototype.setOption=function(t,o){if(e.prototype.setOption.call(this,t,o),'image'===t&&o&&this._sdk){var r=this._sdk.getRenderer(),a=this._overlayTexture.getBaseTexture();a.setSource(o),r.isOfType(g.WEBGL)&&r.updateTexture(a),this._overlayRendered=!1}},t.prototype._render=function(e){var t=e.getDimensions(),o=this._options,r=o.image,a=o.alpha,i=o.blendMode;return r?(this._overlayRendered&&this._lastInputDimensions.equals(t)||(this._renderOverlayToRenderTexture(e),this._overlayRendered=!0,this._lastInputDimensions.copy(t)),this._overlayFilter.set({blendMode:i,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:a}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),p.Promise.resolve(this._renderTexture)):(this._sprite.setFilters([]),this._renderTexture.render(this._container),p.Promise.resolve())},t.prototype._renderOverlayToRenderTexture=function(e){var t=this._sdk.getRenderer(),o=e.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new p.Engine.RenderTexture(t,o.x,o.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var r=this._options.image,a=r.width,i=r.height,n=p.Utils.resizeVectorToFill(new p.Vector2(a,i),o);this._overlaySprite.setWidth(n.x),this._overlaySprite.setHeight(n.y);var l=this._overlayRenderTexture.getBaseTexture();t.isOfType(g.WEBGL)&&(l.setGLUnit(4),t.updateTexture(l,!1)),this._overlayRenderTexture.resizeTo(o),this._overlayRenderTexture.render(this._overlayContainer)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._overlaySprite.dispose()},t}(_.default);y.identifier='overlay',y.BLEND_MODES=f.BLEND_MODES,y.prototype.availableOptions={identifier:{type:c.STRING},image:{type:c.IMAGE},blendMode:{type:c.NUMBER,default:f.BLEND_MODES.MULTIPLY,available:Object.keys(f.BLEND_MODES).map(function(e){return f.BLEND_MODES[e]})},alpha:{type:c.NUMBER,default:1}},t.default=y},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),i=o(3),n='imglySDKVersionCallback',l=function(){function e(t){(0,a.default)(this,e),this._version=t,this._check()}return e.prototype._check=function(){var e=this;if('undefined'==typeof document)return i.Log.info(this.constructor.name,'Not in browser environment. Version check skipped.');var t=this;window[n]=function(o){o.outdated&&i.Log.warn(e.constructor.name,'Your Version '+t._version+' is outdated. Current version is '+o.version+'.')};var o=document.createElement('script');o.src='https://www.photoeditorsdk.com/version.json?sdk=html5&jsoncallback='+n+'&version='+this._version,o.async=!0,document.getElementsByTagName('head')[0].appendChild(o)},e}();t.default=l},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=o(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),n=function(){function e(t){(0,i.default)(this,e),this._head=0,this._buf=t}return e.prototype.peekInt8=function(){return this._buf[this._head]},e.prototype.peekInt16=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],o=this._buf[this._head+1];return e?(o<<8)+t:(t<<8)+o},e.prototype.peekInt24=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],o=this._buf[this._head+1],r=this._buf[this._head+2];return e?(r<<16)+(o<<8)+t:(t<<16)+(o<<8)+r},e.prototype.peekInt32=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],o=this._buf[this._head+1],r=this._buf[this._head+2],a=this._buf[this._head+3];return e?(a<<32)+(r<<16)+(o<<8)+t:(t<<32)+(o<<16)+(r<<8)+a},e.prototype.writeInt16=function(e){this._buf[this._head]=e>>8,this._buf[this._head+1]=255&e},e.prototype.readInt8=function(){var e=this.peekInt8();return this._head+=1,e},e.prototype.readInt16=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.peekInt16(e);return this._head+=2,t},e.prototype.readInt24=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.peekInt24(e);return this._head+=3,t},e.prototype.readInt32=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.peekInt32(e);return this._head+=4,t},e.prototype.readString=function(e){for(var t='',o=0,r;o<e;o++)r=this.readInt8(),t+=a(r);return t},e.prototype.getHead=function(){return this._head},e.prototype.setHead=function(e){this._head=e},e}();t.default=n},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(10),u=o(11),_=r(u),f=o(26),c=r(f),g=o(66),y=r(g),h=o(16),m=r(h),x=function(e){function t(o){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,t);var a=(0,l.default)(this,e.call(this,r));return a._sdk=o,a}return(0,d.default)(t,e),t.prototype.export=function(){var e=this,t=this._sdk.getRenderer(),o=this._options,r=o.renderType,a=o.imageFormat,i=o.quality;return this.validateSettings().then(function(){return e._prepareSDK()}).then(function(o){var n=t.getCanvas();t.isOfType(p.RendererType.WEBGL)&&(n=e._createCanvasFromTexture(o));var l;if(r===p.RenderType.IMAGE||r===p.RenderType.DATAURL){l='undefined'==typeof window?n.toDataURL(a):n.toDataURL(a,i);var s=e._sdk.getImage();if(y.default.isJPEG(s.src)&&y.default.isJPEG(l)){var d=e._sdk.getExif();d&&(l=d.restoreExifTags(l))}}if(r===p.RenderType.IMAGE){var u;return u=new Image,u.src=l,u}return r===p.RenderType.DATAURL?l:r===p.RenderType.BUFFER?n.toBuffer():r===p.RenderType.MSBLOB?n.msToBlob():r===p.RenderType.BLOB?new Promise(function(e){n.toBlob(function(t){e(t)},a,i)}):void 0}).then(function(t){return e._restoreSDK().then(function(){return t})})},t.prototype._prepareSDK=function(){var e=this._sdk.getRenderer();this._sdkSettings={dimensions:e.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode('export'),this._sdk.setTextureQuality(1);var t=e.isOfType(p.RendererType.CANVAS);e.setPixelRatio(1),e.resizeTo(this._sdk.getFinalDimensions(),t),this._sdk.setAllOperationsToDirty(!0);var o=this._sdk.getOperationsStack();return o.forEach(function(e){e.disposeRenderTextures()}),o.disableCache(),this._sdk.render()},t.prototype._restoreSDK=function(){var e=this._sdk.getOperationsStack();e.enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var t=this._sdk.getRenderer(),o=t.isOfType(p.RendererType.CANVAS);return t.setPixelRatio(this._sdkSettings.pixelRatio),t.resizeTo(this._sdkSettings.dimensions,o),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()},t.prototype._createCanvasFromTexture=function(e){var t=this._sdk.getRenderer(),o=this._sdk.getFinalDimensions(),r=this._sdk.getRenderer().getContext(),a=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,a);var i=e.getBaseTexture().getGLTextureForRenderer(t);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0);var n=new Uint8Array(4*(o.x*o.y));r.readPixels(0,0,o.x,o.y,r.RGBA,r.UNSIGNED_BYTE,n);var l=this._checkPixelsForTransparency(n),s;if(l){var d=new _.default.Sprite(e);d.setFilters([new _.default.Filters.UnpremultiplyFilter]);var p=new _.default.Container;p.addChild(d),s=new _.default.RenderTexture(t,o.x,o.y),s.render(p);var u=s.getBaseTexture().getGLTextureForRenderer(t);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,u,0),r.readPixels(0,0,o.x,o.y,r.RGBA,r.UNSIGNED_BYTE,n),t.setRenderTarget(),s.dispose()}var f=c.default.createCanvas();f.width=o.x,f.height=o.y;var g=f.getContext('2d'),y=g.createImageData(o.x,o.y);return y.data.set(n),g.putImageData(y,0,0),r.deleteFramebuffer(a),f},t.prototype._checkPixelsForTransparency=function(e){for(var t=this._sdk.getFinalDimensions(),o=4*(t.x*t.y),r=void 0,a=3;a<o;a+=4)if(r=e[a],255!==r)return!0;return!1},t}(m.default);x.prototype.availableOptions={renderType:{type:p.OptionType.STRING,available:c.default.values(p.RenderType),default:p.RenderType.IMAGE},imageFormat:{type:p.OptionType.STRING,available:c.default.values(p.ImageFormat),default:p.ImageFormat.PNG},quality:{type:p.OptionType.NUMBER,default:0.8}},t.default=x},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(92);Object.defineProperty(t,'IdentityFilter',{enumerable:!0,get:function(){return r(a).default}});var i=o(222);Object.defineProperty(t,'A15Filter',{enumerable:!0,get:function(){return r(i).default}});var n=o(251);Object.defineProperty(t,'BreezeFilter',{enumerable:!0,get:function(){return r(n).default}});var l=o(252);Object.defineProperty(t,'BWFilter',{enumerable:!0,get:function(){return r(l).default}});var s=o(253);Object.defineProperty(t,'BWHardFilter',{enumerable:!0,get:function(){return r(s).default}});var d=o(254);Object.defineProperty(t,'CelsiusFilter',{enumerable:!0,get:function(){return r(d).default}});var p=o(255);Object.defineProperty(t,'ChestFilter',{enumerable:!0,get:function(){return r(p).default}});var u=o(256);Object.defineProperty(t,'FixieFilter',{enumerable:!0,get:function(){return r(u).default}});var _=o(257);Object.defineProperty(t,'FoodFilter',{enumerable:!0,get:function(){return r(_).default}});var f=o(258);Object.defineProperty(t,'FridgeFilter',{enumerable:!0,get:function(){return r(f).default}});var c=o(259);Object.defineProperty(t,'FrontFilter',{enumerable:!0,get:function(){return r(c).default}});var g=o(260);Object.defineProperty(t,'GlamFilter',{enumerable:!0,get:function(){return r(g).default}});var y=o(261);Object.defineProperty(t,'GobblinFilter',{enumerable:!0,get:function(){return r(y).default}});var h=o(262);Object.defineProperty(t,'K1Filter',{enumerable:!0,get:function(){return r(h).default}});var m=o(263);Object.defineProperty(t,'K2Filter',{enumerable:!0,get:function(){return r(m).default}});var x=o(264);Object.defineProperty(t,'K6Filter',{enumerable:!0,get:function(){return r(x).default}});var T=o(265);Object.defineProperty(t,'KDynamicFilter',{enumerable:!0,get:function(){return r(T).default}});var v=o(266);Object.defineProperty(t,'LeninFilter',{enumerable:!0,get:function(){return r(v).default}});var b=o(267);Object.defineProperty(t,'LomoFilter',{enumerable:!0,get:function(){return r(b).default}});var C=o(268);Object.defineProperty(t,'MellowFilter',{enumerable:!0,get:function(){return r(C).default}});var R=o(269);Object.defineProperty(t,'MetalFilter',{enumerable:!0,get:function(){return r(R).default}});var O=o(270);Object.defineProperty(t,'MorningFilter',{enumerable:!0,get:function(){return r(O).default}});var E=o(271);Object.defineProperty(t,'OrchidFilter',{enumerable:!0,get:function(){return r(E).default}});var S=o(272);Object.defineProperty(t,'PolaFilter',{enumerable:!0,get:function(){return r(S).default}});var F=o(273);Object.defineProperty(t,'Pola669Filter',{enumerable:!0,get:function(){return r(F).default}});var M=o(274);Object.defineProperty(t,'QuoziFilter',{enumerable:!0,get:function(){return r(M).default}});var k=o(275);Object.defineProperty(t,'SemiredFilter',{enumerable:!0,get:function(){return r(k).default}});var P=o(276);Object.defineProperty(t,'SunnyFilter',{enumerable:!0,get:function(){return r(P).default}});var D=o(277);Object.defineProperty(t,'TexasFilter',{enumerable:!0,get:function(){return r(D).default}});var B=o(278);Object.defineProperty(t,'X400Filter',{enumerable:!0,get:function(){return r(B).default}});var I=o(279);Object.defineProperty(t,'LUTFilter',{enumerable:!0,get:function(){return r(I).default}});var w=o(280);Object.defineProperty(t,'ThreeDLUTFilter',{enumerable:!0,get:function(){return r(w).default}})},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.Contrast({contrast:0.63})),n._stack.push(new f.Brightness({brightness:0.12})),n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='a15',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(9),_=r(u),f=o(10),c=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(224),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),n=t.getContext(),l=o.getContext(),s=n.getImageData(0,0,a.width,a.height),d=this._options.brightness;if(0!==d){d*=255;for(var p=0,i;p<a.width*a.height;p++)i=4*p,s.data[i]+=d,s.data[i+1]+=d,s.data[i+2]+=d;l.putImageData(s,0,0)}},t}(p.Engine.Filter);c.prototype.availableOptions={brightness:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT}};var g=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new c,n}return(0,d.default)(t,e),t.prototype.update=function(){this._filter.setBrightness(this._options.brightness)},t}(_.default);g.prototype.availableOptions=c.prototype.availableOptions,t.default=g},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(9),_=r(u),f=p.Constants.OptionType,c=p.Constants.UniformType,g=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(226),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),n=t.getContext(),l=o.getContext(),s=n.getImageData(0,0,a.width,a.height),d=this._options.contrast;if(1!==d){for(var p=0,i;p<a.width*a.height;p++)i=4*p,s.data[i]=(s.data[i]-127)*d+127,s.data[i+1]=(s.data[i+1]-127)*d+127,s.data[i+2]=(s.data[i+2]-127)*d+127;l.putImageData(s,0,0)}},t}(p.Engine.Filter);g.prototype.availableOptions={contrast:{type:f.NUMBER,default:1,uniformType:c.FLOAT}};var y=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new g,n}return(0,d.default)(t,e),t.prototype.update=function(){this._filter.setContrast(this._options.contrast)},t}(_.default);y.prototype.availableOptions=g.prototype.availableOptions,t.default=y},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(9),_=r(u),f=p.Constants.OptionType,c=p.Constants.UniformType,g=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(228),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){for(var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),n=t.getContext(),l=o.getContext(),s=n.getImageData(0,0,a.width,a.height),d=this._options.colorMatrix,u=new p.Color(0,0,0,0),_=0,i;_<a.width*a.height;_++)i=4*_,u.r=s.data[i]/255,u.g=s.data[i+1]/255,u.b=s.data[i+2]/255,u=d.apply(u),s.data[i]=255*u.r,s.data[i+1]=255*u.g,s.data[i+2]=255*u.b;l.putImageData(s,0,0)},t}(p.Engine.Filter);g.prototype.availableOptions={colorMatrix:{type:f.COLOR_MATRIX,default:new p.ColorMatrix,uniformType:c.MAT4},colorMatrixOffset:{type:f.ARRAY,default:[],uniformType:c.FLOAT4}};var y=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new g,n}return(0,d.default)(t,e),t.prototype.update=function(){this._filter.setColorMatrix(this._options.colorMatrix)},t}(_.default);y.prototype.availableOptions=g.prototype.availableOptions,t.default=y},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(11),u=r(p),_=o(9),f=r(_),c=o(10),g=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(230),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){for(var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),n=t.getContext(),l=o.getContext(),s=n.getImageData(0,0,a.width,a.height),d=[0.3,0.59,0.11],p=this._options.desaturation,u=0;u<a.width*a.height;u++){var i=4*u,_=d[0]*s.data[i]/255+d[1]*s.data[i+1]/255+d[2]*s.data[i+2]/255;s.data[i]+=(255*_-s.data[i])*p,s.data[i+1]+=(255*_-s.data[i+1])*p,s.data[i+2]+=(255*_-s.data[i+2])*p}l.putImageData(s,0,0)},t}(u.default.Filter);g.prototype.availableOptions={desaturation:{type:c.OptionType.NUMBER,default:1,uniformType:c.UniformType.FLOAT}};var y=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new g,n}return(0,d.default)(t,e),t.prototype.update=function(){this._filter.setDesaturation(this._options.desaturation)},t}(f.default);y.prototype.availableOptions=g.prototype.availableOptions,t.default=y},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n'},function(t,o,r){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,'__esModule',{value:!0});var i=r(0),n=a(i),l=r(1),s=a(l),d=r(2),p=a(d),u=r(3),_=r(9),f=a(_),c=r(12),g=a(c),y=u.Constants.OptionType,h=u.Constants.UniformType,m=function(t){function o(){(0,n.default)(this,o);var e=(0,s.default)(this,t.call(this));return e._fragmentSource=r(232),e}return(0,p.default)(o,t),o.prototype._applyCanvas=function(t,o,r){for(var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n=o.getCanvas(),l=o.getContext(),s=r.getContext(),d=l.getImageData(0,0,n.width,n.height),p=this._options.gamma,u=new Float32Array(256),_=0;256>_;_++)u[_]=255*e(_/255,p.r);for(var i=new Float32Array(256),f=0;256>f;f++)i[f]=255*e(f/255,p.g);for(var c=new Float32Array(256),g=0;256>g;g++)c[g]=255*e(g/255,p.b);for(var y=0,h;y<n.width*n.height;y++)h=4*y,d.data[h]=u[d.data[h]],d.data[h+1]=i[d.data[h+1]],d.data[h+2]=c[d.data[h+2]];s.putImageData(d,0,0)},o}(u.Engine.Filter);m.prototype.availableOptions={gamma:{type:y.COLOR,default:g.default.WHITE,uniformType:h.FLOAT3}};var x=function(e){function t(){(0,n.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var i=(0,s.default)(this,e.call.apply(e,[this].concat(r)));return i._filter=new m,i}return(0,p.default)(t,e),t.prototype.update=function(){this._filter.setGamma(this._options.gamma)},t}(f.default);x.prototype.availableOptions=m.prototype.availableOptions,o.default=x},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),_=o(9),f=r(_),c=o(12),g=r(c),y=o(3),h=y.Constants.OptionType,m=y.Constants.UniformType,x=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(234),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){for(var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),i=t.getContext(),n=o.getContext(),l=i.getImageData(0,0,a.width,a.height),s=this._options.color,_=0,f;_<a.width;_++)for(var d=0;d<a.height;d++){var c=4*(a.width*d+_),g=_/a.width,y=d/a.height,h=(g-0.5)/0.75,m=(y-0.5)/0.75;f=1-(h*h+m*m),f=p(u(f,0.1),1),l.data[c]*=f*s.r,l.data[c+1]=l.data[c+1]*(f*s.g),l.data[c+2]=l.data[c+2]*(f*s.b),l.data[c+3]=255}n.putImageData(l,0,0)},t}(y.Engine.Filter);x.prototype.availableOptions={color:{type:h.COLOR,default:g.default.WHITE,uniformType:m.FLOAT3}};var T=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new x,n}return(0,d.default)(t,e),t.prototype.update=function(){this._filter.setColor(this._options.color)},t}(f.default);T.prototype.availableOptions=x.prototype.availableOptions,t.default=T},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(11),u=r(p),_=o(9),f=r(_),c=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(236),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){for(var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),i=t.getContext(),n=o.getContext(),l=i.getImageData(0,0,a.width,a.height),s=0;s<a.width;s++)for(var d=0,p;d<a.height;d++)p=4*(a.width*d+s),l.data[p+2]=0.33*l.data[p+1],l.data[p]*=0.6,l.data[p+2]+=0.33*l.data[p],l.data[p+1]=0.7*l.data[p+1],l.data[p+3]=255;n.putImageData(l,0,0)},t}(u.default.Filter),g=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new c,n}return(0,d.default)(t,e),t}(f.default);t.default=g},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(11),u=r(p),_=o(9),f=r(_),c=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(238),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){for(var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),i=t.getContext(),n=o.getContext(),l=i.getImageData(0,0,a.width,a.height),s=0;s<a.width;s++)for(var d=0;d<a.height;d++){var p=4*(a.width*d+s),u=0.2125*l.data[p]+0.7154*l.data[p+1]+0.0721*l.data[p+2];l.data[p]=u,l.data[p+1]=u,l.data[p+2]=u}n.putImageData(l,0,0)},t}(u.default.Filter),g=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new c,n}return(0,d.default)(t,e),t}(f.default);t.default=g},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n'},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),p=r(s),u=o(3),_=o(11),f=r(_),c=o(9),g=r(c),y=o(10),h=3,m=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._precomputeQuads(),r._fragmentSource=o(241),r}return(0,p.default)(t,e),t.prototype._precomputeQuads=function(){this._quads=[];for(var e=0;256>e;e++){var t=63*(e/255),o=new u.Vector2;o.y=0|0.125*(0|t),o.x=(0|t)-8*o.y,this._quads.push(o)}},t.prototype._applyCanvas=function(e,t,o){for(var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n=t.getCanvas(),l=t.getContext(),s=o.getContext(),p=this._options.lookupTableImage,_=this._createImageCanvas(p),f=_.getContext('2d'),c=l.getImageData(0,0,n.width,n.height),y=f.getImageData(0,0,p.width,p.height),h=new u.Vector2,m=0;m<4*(n.width*n.height);m+=4){var x=c.data[m],r=c.data[m+1],g=c.data[m+2],T=c.data[m+3]/255,a=this._quads[g],v=64;h.x=a.x*v,h.y=a.y*v,h.x+=d(x/4),h.y+=d(r/4);var b=0|4*(p.width*h.y+h.x),C=y.data[b];C=x*(1-T)+C*T;var R=y.data[b+1];R=r*(1-T)+R*T;var O=y.data[b+2];O=g*(1-T)+O*T,c.data[m]=C,c.data[m+1]=R,c.data[m+2]=O}s.putImageData(c,0,0)},t.prototype._createImageCanvas=function(e){var t=u.Utils.createCanvas();t.width=e.width,t.height=e.height;var o=t.getContext('2d');return o.drawImage(e,0,0),t},t}(f.default.Filter);m.prototype.availableOptions={lookupTable:{type:y.OptionType.NUMBER,default:h,uniformType:y.UniformType.INT},lookupTableImage:{type:y.OptionType.IMAGE,uniformType:null}};var x=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new m,n._textures={},n}return(0,p.default)(t,e),t.prototype.update=function(e){var t=e.getRenderer();t.isOfType(y.RendererType.WEBGL)?this._updateWebGLTexture(e):t.isOfType(y.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)},t.prototype._updateWebGLTexture=function(e){var t=e.getRenderer(),o=t.id;this._textures[o]||(this._textures[o]=new f.default.BaseTexture);var r=this._textures[o];r.setSource(this._options.image),r.setGLUnit(h),t.updateTexture(r)},t.prototype.dispose=function(){for(var t in e.prototype.dispose.call(this),this._textures)delete this._textures[t]},t}(g.default);x.prototype.availableOptions={image:{type:y.OptionType.IMAGE}},t.default=x},function(e){e.exports='/**\n * Based off of GPUImage\'s LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(9),u=r(p),_=o(3),f=_.Constants.OptionType,c=_.Constants.UniformType,g=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(243),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){for(var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),i=t.getContext(),n=o.getContext(),l=i.getImageData(0,0,a.width,a.height),s=this._options.saturation,d=0;d<a.width;d++)for(var p=0;p<a.height;p++){var u=4*(a.width*p+d),_=0.2125*l.data[u]+0.7154*l.data[u+1]+0.0721*l.data[u+2];l.data[u]=_*(1-s)+l.data[u]*s,l.data[u+1]=_*(1-s)+l.data[u+1]*s,l.data[u+2]=_*(1-s)+l.data[u+2]*s}n.putImageData(l,0,0)},t}(_.Engine.Filter);g.prototype.availableOptions={saturation:{type:f.NUMBER,default:0,uniformType:c.FLOAT}};var y=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new g,n}return(0,d.default)(t,e),t.prototype.update=function(){this._filter.setSaturation(this._options.saturation)},t}(u.default);y.prototype.availableOptions=g.prototype.availableOptions,t.default=y},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(9),_=r(p),f=o(12),c=r(f),g=o(3),y=g.Constants.OptionType,h=g.Constants.UniformType,m=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(245),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){for(var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),i=t.getContext(),n=o.getContext(),l=i.getImageData(0,0,a.width,a.height),s=0;s<a.width;s++)for(var d=0,p;d<a.height;d++)p=4*(a.width*d+s),l.data[p]=u(255*this._options.color.r,l.data[p]),l.data[p+1]=u(255*this._options.color.g,l.data[p+1]),l.data[p+2]=u(255*this._options.color.b,l.data[p+2]);n.putImageData(l,0,0)},t}(g.Engine.Filter);m.prototype.availableOptions={color:{type:y.COLOR,default:c.default.WHITE,uniformType:h.FLOAT3}};var x=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new m,n}return(0,d.default)(t,e),t.prototype.update=function(){this._filter.setColor(this._options.color)},t}(_.default);x.prototype.availableOptions=m.prototype.availableOptions,t.default=x},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n'},function(t,o,r){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,'__esModule',{value:!0});var i=r(0),l=a(i),s=r(1),d=a(s),_=r(2),f=a(_),c=r(99),g=a(c),y=r(3),h=y.Constants.OptionType,m=function(t){function o(){(0,l.default)(this,o);for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];var i=(0,d.default)(this,t.call.apply(t,[this].concat(r)));return i._options.rgbControlPoints||(i._options.rgbControlPoints={red:i._options.controlPoints,green:i._options.controlPoints,blue:i._options.controlPoints}),i._updateLookupTable(),i}return(0,f.default)(o,t),o.prototype._updateLookupTable=function(){var e=this._calculateSplineCurve(this._options.rgbControlPoints.red),t=this._calculateSplineCurve(this._options.rgbControlPoints.green),o=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(e,t,o)},o.prototype._buildLookupTable=function(e,t,o){for(var r=[],a=0;256>a;a++)r.push(p(u(a+e[a],0),255)),r.push(p(u(a+t[a],0),255)),r.push(p(u(a+o[a],0),255)),r.push(255);return r},o.prototype._calculateSplineCurve=function(t){t=t.sort(function(e,t){return e[0]>t[0]});var o=this._getSplineCurve(t),r=o[0],a;if(0<r[0])for(a=0;a<r[0];a++)o.unshift([0,0]);var i=[];for(a=0;a<o.length;a++){var l=o[a],s=[l[0],l[0]],d=n(e(s[0]-l[0],2)+e(s[1]-l[1],2));s[1]>l[1]&&(d=-d),i.push(d)}return i},o.prototype._getSplineCurve=function(e){var o=this._secondDerivative(e),r=o.length,n=[],l;for(l=0;l<r;l++)n[l]=o[l];var i=[];for(l=0;l<r-1;l++)for(var s=e[l],d=e[l+1],p=s[0];p<d[0];p++){var u=(p-s[0])/(d[0]-s[0]),t=1-u,a=u,_=d[0]-s[0],f=t*s[1]+a*d[1]+_*_/6*((t*t*t-t)*n[l]+(a*a*a-a)*n[l+1]);255<f?f=255:0>f&&(f=0),i.push([p,f])}return 255===i.length&&i.push(e[e.length-1]),i},o.prototype._secondDerivative=function(e){var t=e.length;if(0>=t||1===t)return null;var o=[],r=[],a,i;for(o[0]=[0,1,0],a=1;a<t-1;a++){var n=e[a-1],l=e[a],s=e[a+1];o[a]=o[a]||[],o[a][0]=(l[0]-n[0])/6,o[a][1]=(s[0]-n[0])/3,o[a][2]=(s[0]-l[0])/6,r[a]=(s[1]-l[1])/(s[0]-l[0])-(l[1]-n[1])/(l[0]-n[0])}for(r[0]=0,r[t-1]=0,o[t-1]=[0,1,0],a=1;a<t;a++)i=o[1][0]/o[a-1][1],o[a][1]-=i*o[a-1][2],o[a][0]=0,r[a]-=i*r[a-1];for(a=t-2;0<a;a--)i=o[a][2]/o[a+1][1],o[a][1]-=i*o[a+1][0],o[a][2]=0,r[a]-=i*r[a+1];var d=[];for(a=0;a<t;a++)d[a]=r[a]/o[a][1];return d},o}(g.default);m.prototype.availableOptions={rgbControlPoints:{type:h.OBJECT},controlPoints:{type:h.ARRAY,default:[]},textureGLUnit:{type:h.NUMBER,default:1}},o.default=m},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),_=o(11),f=r(_),c=o(9),g=r(c),y=function(e){function t(){(0,i.default)(this,t);var r=(0,l.default)(this,e.call(this));return r._fragmentSource=o(248),r}return(0,d.default)(t,e),t.prototype._applyCanvas=function(e,t,o){for(var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=t.getCanvas(),i=t.getContext(),n=o.getContext(),l=i.getImageData(0,0,a.width,a.height),s=0;s<a.width;s++)for(var d=0;d<a.height;d++){var _=4*(a.width*d+s),f=0.3*(l.data[_]/255)+0.3*(l.data[_+1]/255)+0.3*(l.data[_+2]/255);f-=0.2,f=u(0,p(1,f)),f+=0.15,f*=1.4,f*=255,l.data[_]=f,l.data[_+1]=f,l.data[_+2]=f}n.putImageData(l,0,0)},t}(f.default.Filter),h=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new y,n}return(0,d.default)(t,e),t}(g.default);t.default=h},function(e){e.exports='varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),s=r(n),p=o(2),u=r(p),_=o(3),f=o(11),c=r(f),g=o(9),y=r(g),h=o(10),m=3,x=function(e){function t(){(0,i.default)(this,t);var r=(0,s.default)(this,e.call(this));return r._precomputeQuads(),r._fragmentSource=o(250),r}return(0,u.default)(t,e),t.prototype._precomputeQuads=function(){this._quads=[];for(var e=0;256>e;e++){var t=63*(e/255),o=new _.Vector2;o.y=0|0.125*(0|t),o.x=(0|t)-8*o.y,this._quads.push(o)}},t.prototype._applyCanvas=function(e,t,o){for(var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=this._options,i=a.resolution,n=a.horizontalTileCount,s=a.verticalTileCount,p=t.getCanvas(),u=t.getContext(),f=o.getContext(),c=this._options.lookupTableImage,g=this._createImageCanvas(c),y=g.getContext('2d'),h=u.getImageData(0,0,p.width,p.height),m=y.getImageData(0,0,c.width,c.height),x=d(i/n-1),T=d(i/s-1),v=d(n*s-1),b=void 0,C=void 0,R=void 0,O=void 0,E=void 0,S=void 0,F=new _.Color,M=new _.Color,k=new _.Color,P=new _.Color,D=new _.Color,B=new _.Color,I=new _.Color,w=new _.Color,L=new _.Vector2,A=new _.Vector2,N=function(e,t,o,r){e.r=t.r+r*(o.r-t.r),e.g=t.g+r*(o.g-t.g),e.b=t.b+r*(o.b-t.b)},U=function(e,t,o){var r=4*(d(o)*c.width+d(t));e.r=m.data[r]/255,e.g=m.data[r+1]/255,e.b=m.data[r+2]/255,e.a=m.data[r+3]/255},G=new _.Color,z=new _.Color,V=function(e){U(D,L.x+b,L.y+C),U(B,L.x+b,L.y+E),U(I,L.x+O,L.y+C),U(w,L.x+O,L.y+E),N(G,D,I,F.r*x%1),N(z,I,w,F.r*x%1),N(e,G,z,F.g*T%1)},j=new _.Vector2(i,i).divide(n,s).floor(),W=0;W<4*(p.width*p.height);W+=4)F.set(h.data[W]/255,h.data[W+1]/255,h.data[W+2]/255,h.data[W+3]/255),b=0|F.r*x,C=0|F.g*T,R=0|F.b*v,O=l(F.r*x),E=l(F.g*T),S=l(F.b*v),L.y=0|R/n,L.x=0|R/(L.y*n),A.y=0|S/n,A.x=0|S-A.y*n,L.multiply(j),A.multiply(j),V(k,L,A),V(P,A,A),N(M,k,P,F.b*v%1),h.data[W]=255*M.r,h.data[W+1]=255*M.g,h.data[W+2]=255*M.b;f.putImageData(h,0,0)},t.prototype._createImageCanvas=function(e){var t=_.Utils.createCanvas();t.width=e.width,t.height=e.height;var o=t.getContext('2d');return o.drawImage(e,0,0),t},t}(c.default.Filter);x.prototype.availableOptions={lookupTable:{type:h.OptionType.NUMBER,default:m,uniformType:h.UniformType.INT},lookupTableImage:{type:h.OptionType.IMAGE,uniformType:null},resolution:{type:h.OptionType.NUMBER,default:128,uniformType:h.UniformType.FLOAT},horizontalTileCount:{type:h.OptionType.NUMBER,default:5,uniformType:h.UniformType.FLOAT},verticalTileCount:{type:h.OptionType.NUMBER,default:5,uniformType:h.UniformType.FLOAT}};var T=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,s.default)(this,e.call.apply(e,[this].concat(r)));return n._filter=new x,n._textures={},n}return(0,u.default)(t,e),t.prototype.update=function(e){var t=e.getRenderer();t.isOfType(h.RendererType.WEBGL)?this._updateWebGLTexture(e):t.isOfType(h.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);var o=this._options,r=o.resolution,a=o.verticalTileCount,i=o.horizontalTileCount;this._filter.set({resolution:r,verticalTileCount:a,horizontalTileCount:i})},t.prototype._updateWebGLTexture=function(e){var t=e.getRenderer(),o=t.id;this._textures[o]||(this._textures[o]=new c.default.BaseTexture);var r=this._textures[o];r.setSource(this._options.image),r.setGLUnit(m),r.setMinFilter(c.default.BaseTexture.NearestFilter),t.updateTexture(r)},t.prototype.dispose=function(){for(var t in e.prototype.dispose.call(this),this._textures)delete this._textures[t]},t}(y.default);T.prototype.availableOptions={image:{type:h.OptionType.IMAGE},resolution:{type:h.OptionType.NUMBER,default:128},horizontalTileCount:{type:h.OptionType.NUMBER,default:5},verticalTileCount:{type:h.OptionType.NUMBER,default:5}},t.default=T},function(e){e.exports='uniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 belinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON));\n\n    float rRange = floor(u_resolution / u_horizontalTileCount - 1.0);\n    float gRange = floor(u_resolution / u_verticalTileCount - 1.0);\n    float bRange = floor(u_horizontalTileCount * u_horizontalTileCount - 1.0);\n\n    int rFloor = int(sourceColor.r * rRange);\n    int gFloor = int(sourceColor.g * gRange);\n    int bFloor = int(sourceColor.b * bRange);\n\n    int rCeil = int(ceil(sourceColor.r * rRange));\n    int gCeil = int(ceil(sourceColor.g * gRange));\n    int bCeil = int(ceil(sourceColor.b * bRange));\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = bFloor / int(u_horizontalTileCount);\n    tileFloor.x = bFloor - (tileFloor.y * int(u_horizontalTileCount));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = bCeil / int(u_horizontalTileCount);\n    tileCeil.x = bCeil - (tileCeil.y * int(u_horizontalTileCount));\n\n    // Map tile index to tile pixel pos.\n    tileFloor *= int(u_resolution / u_horizontalTileCount);\n    tileCeil  *= int(u_resolution / u_verticalTileCount);\n\n    // Interpolate between red and green\n    vec3 lutColorFB = belinearInterpolate(\n        lutColor(tileFloor.x + rFloor, tileFloor.y + gFloor),\n        lutColor(tileFloor.x + rFloor, tileFloor.y + gCeil),\n        lutColor(tileFloor.x + rCeil,  tileFloor.y + gFloor),\n        lutColor(tileFloor.x + rCeil,  tileFloor.y + gCeil),\n        fract(sourceColor.r * rRange), fract(sourceColor.g * gRange)\n    );\n    vec3 lutColorCB = belinearInterpolate(\n        lutColor(tileCeil.x + rFloor, tileCeil.y + gFloor),\n        lutColor(tileCeil.x + rFloor, tileCeil.y + gCeil),\n        lutColor(tileCeil.x + rCeil,  tileCeil.y + gFloor),\n        lutColor(tileCeil.x + rCeil,  tileCeil.y + gCeil),\n        fract(sourceColor.r * rRange), fract(sourceColor.g * gRange)\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fract(sourceColor.b * bRange));\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n\n\n\n'},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.Desaturation({desaturation:0.5})),n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='breeze',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.Grayscale),n}return(0,d.default)(t,e),t}(u.default);c.identifier='bw',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.Grayscale),n._stack.push(new f.Contrast({contrast:1.5})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='bwhard',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='celsius',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='chest',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='fixie',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.Saturation({saturation:1.35})),n._stack.push(new f.Contrast({contrast:1.1})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='food',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='fridge',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='front',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.Contrast({contrast:1.1})),n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='glam',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.Gobblin),n}return(0,d.default)(t,e),t}(u.default);c.identifier='gobblin',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),n._stack.push(new f.Saturation({saturation:0.9})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='k1',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=o(12),g=r(c),y=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),n._stack.push(new f.SoftColorOverlay({color:new g.default(40/255,40/255,40/255)})),n}return(0,d.default)(t,e),t}(u.default);y.identifier='k2',t.default=y},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.Saturation({saturation:0.5})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='k6',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),n._stack.push(new f.Saturation({saturation:0.7})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='kdynamic',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.Desaturation({desaturation:0.4})),n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='lenin',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='lomo',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='mellow',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=o(59),g=r(c),y=o(12),h=r(y),m=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r))),s=new g.default(0.8158218291630716,0,0,0,-0.01779810181190647,0,0.8098360655737704,0,0,0.0916393442622953,0,0,0.4596336773932402,0,0.12760574782432707,0,0,0,1,0);n._stack.push(new f.ColorMatrixPrimitive({colorMatrix:s}));var d=new h.default(0.8,0.6,0.9);return n._stack.push(new f.Gamma({gamma:d})),n}return(0,d.default)(t,e),t}(u.default);m.identifier='metal',t.default=m},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),n._stack.push(new f.Glow),n}return(0,d.default)(t,e),t}(u.default);c.identifier='morning',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),n._stack.push(new f.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),n._stack.push(new f.Desaturation({desaturation:0.65})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='orchid',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),n._stack.push(new f.Saturation({saturation:0.8})),n._stack.push(new f.Contrast({contrast:1.5})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='pola',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),n._stack.push(new f.Saturation({saturation:0.8})),n._stack.push(new f.Contrast({contrast:1.5})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='pola669',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.Desaturation({desaturation:0.65})),n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='quozi',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),n._stack.push(new f.Glow),n}return(0,d.default)(t,e),t}(u.default);c.identifier='semired',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),n._stack.push(new f.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='sunny',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),n}return(0,d.default)(t,e),t}(u.default);c.identifier='texas',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(4),u=r(p),_=o(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),c=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._stack.push(new f.X400),n}return(0,d.default)(t,e),t}(u.default);c.identifier='x400',t.default=c},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(4),_=r(u),f=o(5),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(f),g=p.Constants.OptionType,y=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return n._lutPrimitive=new c.LookupTableImage({image:n._options.image}),n._stack.push(n._lutPrimitive),n}return(0,d.default)(t,e),t}(_.default);y.prototype.availableOptions={image:{type:g.IMAGE,required:!0,setter:function(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}}},y.identifier='lut',t.default=y},function(e,t,o){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),i=r(a),n=o(1),l=r(n),s=o(2),d=r(s),p=o(3),u=o(4),_=r(u),f=o(5),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(f),g=p.Constants.OptionType,y=function(e){function t(){(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var n=(0,l.default)(this,e.call.apply(e,[this].concat(r))),s=n._options,d=s.image,p=s.resolution,u=s.verticalTileCount,_=s.horizontalTileCount;return n._lutPrimitive=new c.ThreeDLookupTableImage({image:d,resolution:p,verticalTileCount:u,horizontalTileCount:_}),n._stack.push(n._lutPrimitive),n}return(0,d.default)(t,e),t}(_.default);y.prototype.availableOptions={image:{type:g.IMAGE,required:!0,setter:function(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}},resolution:{type:g.NUMBER,default:128},horizontalTileCount:{type:g.NUMBER,default:5},verticalTileCount:{type:g.NUMBER,default:5}},y.identifier='3d-lut',t.default=y}])});